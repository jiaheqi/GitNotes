测试
先提交：python3 manage.py makemigrations
在同步：python3 manage.py migrate
python3 manage.py runserver

(venv) ➜ chaos git:(main) ✗ virtualenv venv --python=3.9  
(venv) ➜ chaos git:(main) ✗ source venv/bin/activate
(venv) ➜ chaos git:(main) ✗ pip install -r requirements.txt  
运行命令：nosetests -v test_case
运行某个文件：nosetests -v tests/test_antispam.py
python main.py run 输出的测试报告会写到 index.html 中

pip3 cache purge
pip3 install mysqlclient==2.0.1

工作目标：

1. 接口测试不需要在 MP 里写测试用例，通过自动化来搞。自动化脚本就是用例，可以写测试的时候通过方法的名字，或者备注，来描述用例。
2. 希望你能把测试流程形成一个闭环，维护起来：维护单元测试用例 -> 计划任务执行 -> 对结果监控 -> 当有失败的情况推动开发去修复。
3. 通过阅读发行系统文档来熟悉产品，同时产出测试用例，记录在 MP 中。 要求按功能模块分类，添加优先级，考虑多个角度： 功能，安全，易用性等等。
4. 在完成 3 的基础上，接手已经有的 UI 自动化测试，丰富测试用例，像目标 2 一样维护管理起来。
5. 把控流程：Zeus 的功能改动，在没有经过测试验收前，不能交付上线，对质量负责。
6. 和产品，开发密切沟通。

<https://orcaterm.cloud.tencent.com/terminal?instanceId=lhins-23efs8ph&region=na-siliconvalley&host=43.135.150.180&platformType=LINUX_UNIX&loginMode=tat&from=lh_console_login_btn&loginType=1> root/Xn199231800 这是 root 权限账号 你试试

自动化接口调试遇到的问题：
1./user/bind-third 接口对于用户 id 和 unionid 是否存在没有校验，都能返回成功 2.重复绑定也没有校验，每次都可以绑定成功 3.三方登录，传入不存在的 type 枚举，依旧可以登录成功，需要添加拦截 4.三方登录的时候的 token 从哪里获取？
5.third-login 的 union_id 是必填的，但是不传的时候也返回成功
6.secret_token 和 token 的关系，发现传了 secret_token 之后，token 传错误的也能返回成功 7.绑定账号的接口的绑定上限是多少？

-----2023.7.26
8./game/info 接口当请求参数为空或者不传，或者为 null 时候，也能返回：
{
'error_no': 0,
'message': '成功',
'result': {
'aihelp_appid': '050600_platform_c5487d76a25727d2050d2a2d45c578dc',
'aihelp_appkey': '050600_app_291aec1bf3cb4c6fb2768fa26d5075ef',
'aihelp_domain': '050600.aihelp.net',
'fb_appid': '495405604470359',
'fb_client_token': '',
'fb_secret': '0f9b3cf3f86115246dc70b8a72c817a8',
'freshdesk_appid': '58a3fdd7-879d-471f-9730-40ff1294c67f',
'freshdesk_appkey': 'e077a8cf-a1f2-42d8-a62b-f6f24a618b79',
'freshdesk_domain': 'msdk.freshchat.com',
'game': 'opsgametest',
'google_client_id': '742111184369-80f14hhsa3fo9rt5ikjhvci749gj7dn8.apps.googleusercontent.com',
'id': 10009,
'is_ali_payment_open': 1,
'is_google_payment_open': 1,
'is_ios_payment_open': 0,
'is_recharge_open': 1,
'is_wechat_payment_open': 1,
'is_xsolla_payment_open': 0,
'line_appid': '1654209506',
'name': 'SDKDemo',
'platform': 'android',
'qq_appid': '101479492',
'sampling_rate': 0,
'service_mail': '<sys@topjoy.com>',
'shushu_appid': '226d1c95988343a78f35131292ef56af',
'shushu_host': '<https://oversea-log.topjoy.com/>',
'twitter_key': 'gavLjcKwR7vRvTWV9IerHVQVP',
'twitter_secret': 'PCzkEeVqOO2wr8UWrG6MJHpXT5492itSzgGUfqX6L1dkxlALmO',
'wechat_appid': 'wx2e12144bd45d0c79'
}
} 9.用户注销，表单为空，也返回：0，账号注销成功
用户 id 为空的时候也返回：0，账号注销成功

10.third-list 接口空表单也能正常请求

11.

鹏哥，彩铃，张妍，慧敏，熊老师，希珍，宇宏，虎哥，太玉

Story - 由 Jira Software 创建——请勿编辑或删除。适用于一种用户故事的事务类型。 DEVOPS-4911 Google 支付旋转屏幕拉起多个支付问题测试 普通 - Has the potential to affect progress. 完成
删除此链接
描述

1. iOS SDK 新增 v2 支付接口，利用透传参数提高交易订单准确率
2. Unity SDK 中，iOS 支付升级到 v2 支付（和 1 是一个改动点）
3. 优化 log 打印级别（看一下 commit 中没有明显不合适的打印即可）
4. ZeusSDK 内部打点添加时间校准逻辑（不需要测试）
5. 三方登录和支付添加 loading 动画（只涉及 Android，不涉及 IOS）

{"channel":"ApplePay","currency":"","extend":"serverId=3|userId=1011s3p60896|productId=121690268549","notify_cnt":1,"order_id":"bc66d374-467a-487b-b020-c2257b6eec13","pay_amount":0,"pay_notify_url":"<http://117.50.187.91:8080/pay/check","pay_time":"2023-07-25T15:03:40.430716031+08:00","product_id":"com.topjoy.zeusdemo.iap1","result":"","sign":"006bf05a5544edf51f721b6993696f65","user_id":1910}>

{"channel":"ApplePay","currency":"USD","extend":"serverId=3|userId=1011s3p60896|productId=121690267864","notify_cnt":3,"order_id":"i_20230725145105_xJ9Htf","pay_amount":0.99,"pay_notify_url":"<http://117.50.187.91:8080/pay/check","pay_time":"2023-07-25T14:52:09+08:00","product_id":"com.topjoy.zeusdemo.iap1","result":"","sign":"57dbbb5318d944be9202f19cf31ff0b8","user_id":1910}>

手机密码：134836
问题记录： 1.支付输入密码之后后台，然后提示支付成功，再恢复到 demo，收到两次返回：一次成功，一次 payverifyfail
===test:V2 支付
resultCode:1,
msg:Success,
result:
{"payResultCode":0,"payRes
ultMsg":"paysuccess","exten
dinfo":"serverld=31
userld=1011s3p608961 productld=121690269924"}
resultCode:0,
msg:Fail,
result:
{"payResultCode":-1,"payRes
ultMsg". "payverifyfail","exten
dinfo"."serverld=31
userld=1011s3p608961 productld=121690269924")
无法复现了，能够复现的情况是： 1.弹出购买成功弹窗后，后台，然后再恢复前台，回调一个 payverifyfail
，但其实此时订单已经支付成功

2.v2 输入密码完成支付后，二次确认弹窗弹出前，断开网络连接，然后再恢复连接返回 paymenttransactionfail：
===test:V2 支付
resultCode:O, msg:Fail, result:
{"payResultCode":-1,"payRes ultMsg":"payfail, paymenttransactionfail","extendinfo":"serv erld=31 userld=1011s3p60896l productid=121690275166"}
V1 支付同样也会有这个问题

v2 输入密码完成支付后，二次确认弹窗弹出后，断开网络连接，然后再恢复连接返回 payverifyfail，再次唤起后可以唤起
但是其实这笔订单已经是支付成功的状态了
v1 输入密码完成支付后，二次确认弹窗弹出后，断开网络连接，然后再恢复连接返回 orderverifyail, networ kerror，再次唤起支付后返回：payverifyfail，再次唤起才能唤起成功
但是其实这笔订单已经是支付成功的状态了

3.选择 Line 登录之后，返回无法回到 SDK 了（应该和本次需求无关，需要确认是否是问题及后续是否修改）

4.支付方式选择支付宝支付，但是不支付，返回后，一直处于 loading。。（应该和本次需求无关，需要确认是否是问题及后续是否修改）

5.选择非 Google 支付的时候，系统存在本身的一个 loading。。（这个后续优化去掉原先的 loading）

6.V2 支付的通知项目组信息中的 payAmount 为 0（需要后端改一下）
{
"channel": "ApplePay",
"currency": "",
"extend": "serverId=3|userId=1011s3p60896|productId=121690268549",
"notify_cnt": 1,
"order_id": "bc66d374-467a-487b-b020-c2257b6eec13",
"pay_amount": 0,
"pay_notify_url": "<http://117.50.187.91:8080/pay/check>",
"pay_time": "2023-07-25T15:03:40.430716031+08:00",
"product_id": "com.topjoy.zeusdemo.iap1",
"result": "",
"sign": "006bf05a5544edf51f721b6993696f65",
"user_id": 1910
}

[用户管理]--用户登录验证
参数校验： 1.空表单 2.参数为空或者 nnull 3.参数缺失，只传部分参数
4.userid 不存在
5.token 无效
正常/异常： 1.正常验证+返回值校验

V2 支付正常逻辑： 1.订单 1，支付完成，transactionid 为 123，二次确认弹出前，杀掉进程，重新加载 app 后，唤起 V2 支付； 2.生成订单 2，此时应该触发 transactionid 为 123 的重新处理，更新订单 1 为支付成功，关联的 transactionid 为 123，订单 2 状态为未支付。
问题现象：transactionid 为 123 的重新处理没有返回支付成功，返回的是 payverifyfail

V1 支付逻辑： 1.订单 1，支付完成，transactionid 为 123，二次确认弹出前，杀掉进程，重新加载 app 后，唤起 V2 支付； 2.生成订单 2，此时应该触发 transactionid 为 123 的重新处理，更新订单 2 为支付成功，关联的 transactionid 为 123，导致订单 1 状态始终为未支付（因为这种问题的存在，所以才衍生出 V2 支付）

腾讯 MSDK 交付流程：<https://cloud.tencent.com/developer/article/1132197>

开发的心得： 1.接口名称、参数名称要足够清晰 2.一个接口只做一件事。如果有两个比较接近的功能，但是用一个接口实现有点麻烦，那就用两个接口，不要为了减少接口而生硬的把两个接口合为一个 3.接口参数要一定要校验、需要转义或者转换的一定要尽可能早的
避免逻辑走了很长了然后抛出一个校验类型的异常 4.通用的名称要统一
openid,openID,openId,OpenID
WX，wechat，weChat，wx，weixin 5.关于同步和异步接口
可以同步的接口，一定不要异步
能不用全局回调就一定不要用全局的回调
一定要用全局回调最好按照模块分开，一个模块一个回调。开发者只需实现他关心模块的回调即可。无关模块的回调设置与否对 SDK 的正常使用没有影响；另外每一个回调里最好又能区分回调属于哪次调用的字段。
同一个回调里面的接口尽可能的少，可以合并的尽量合并。

i_20230728114659_PIfcWa

"""
[用户管理]--用户注册：
参数校验 1.空表单，参数全不传 2.表单不为空，参数内容为空或 null 3.参数缺失只传其中部分参数：手机信息为空；设备号为空；平台为空 4.不合法的设备号信息 5.使用不存在的 force_renew 枚举
正常/异常 1.正常登录+返回值校验 2.使用设备 ID 获取之前的用户信息 3.使用设备 ID 强制生成新账号
"""

"""
[用户管理]--用户注销：
参数校验 1.空表单，参数全不传 2.表单不为空，参数内容为空或 null 3.参数缺失只传其中部分参数：手机信息为空；设备号为空；平台为空 4.不合法的设备号信息 5.使用不存在的 force_renew 枚举
正常/异常 1.正常登录+返回值校验 2.使用设备 ID 获取之前的用户信息 3.使用设备 ID 强制生成新账号
"""

[用户管理]--用户更新：
参数校验 1.空表单，参数全不传 2.表单不为空，参数内容为空或 null 3.参数缺失只传其中部分参数：缺少 user_id，缺少 name
4.user_id 不存在
正常/异常 1.正常请求

ORDER BY "#event_time" DESC LIMIT 10

设置为 0.5：
10 次请求，大约有 5 次成功上报；测试 3 次求平均值 1.上报 4，不上报 6 2.上报 3，不上报 7 3.上报 5，不上报 5
20 次请求，大约有 10 次成功上报；测试 3 次求平均值

两笔请求同时请求，一笔上报，一笔不上报 1.一笔上报，一笔不上报 2.一笔上报，一笔不上报 3.一笔上报，一笔不上报 4.两笔都不上报 5.一笔上报，一笔不上报

---

1.一笔上报，一笔不上报 2.一笔上报，一笔不上报 3.两笔都上报 4.两笔都不上报 5.两笔都不上报

---

1.两笔都不上报 2.一笔上报，一笔不上报 3.一笔上报，一笔不上报 4.一笔上报，一笔不上报 5.两笔都上报

设置为 0.3：
10 次请求，大约有 3 次成功上报；测试 3 次求平均值
20 次请求，大约有 6 次成功上报；测试 3 次求平均值

请求地址非提供的两个地址，也能正常上报数据；
请求地址是一个错误的地址，比如：哈哈，会上报到 network_test_failed 中去；
请求协议是 TCP 的时候，当请求地址包含空格的时候，上报数据报下标越界异常，app 闪退；如果协议是 HTTP 没问题；
请求协议含有空格的时候（协议不存在的时候），sdk 无法识别出当前配置；

前端需要添加的校验： 1.用户白名单限制只能输入数字，过滤：汉字，空格，特殊字符等； 2.请求地址也过滤掉：汉字，空格，特殊字符等； 3.请求协议和方法做成下拉菜单，过滤掉不支持的协议 4.采样率设置最多两位小数

第一次用黑泥质地的洗面奶，好好用
我们平时用的大多数的洗面奶是氨基酸泡沫的洗面奶，这种洗面奶可能存在的一个问题就是清洁力度不够。
然后我最近其实用的挺多产品都是爵威尔家的。
我一般会搭配这种非泡沫的洗面奶喝泡沫洗面奶间隔使用，早上用泡沫型的，晚上用非泡沫的，这样不会让皮肤过渡清洁，导致长痘痘或者泛红什么的。
然后这款的话颜色是那种酷黑的，但是起泡后也是白色的泡沫，亲肤干和清洁力度都还不错，主要价格也很便宜大碗，一瓶可以用好久。使用后脸上也很清爽，不会有紧绷的感觉。

海洋味道洗面奶拯救了我的混油皮
我因为平时上课会很长时间的对着电脑，所以导致皮肤会出油很多
经常一模额头就会有很有油脂
然后我又是一个皮肤肤质很脆弱的人，稍微一些刺激的洗面奶用起来就会脸部出红痘子
然后大家买洗面奶的话一定要看一下主要成分
海洋至尊的这款我看主要成分是海藻，海泥还有冰川糖蛋白，会在不刺激的同时减少皮肤的油脂分泌
然后呢亲肤效果也不错，洗脸过后也不会紧紧的，冲洗之后脸部特别清爽
海洋至尊家的洗面奶都是很大一只，真的可以用很久，如果也是混油皮的话大家可以试试嗷

温和又控油的洗面奶好爱
这款米云的洗面奶从外观上面看就是那种比较柔和一点的风格
用起来的感觉和预料中的一样，用过后脸部很舒服，一点不紧绷
然后这款洗面奶的特点是控油和除螨
控油的话应该是油皮同学都需要面临的洗面奶问题
除螨经常被大家忽略，但是尤其是潮湿的天气，一定要多注意一些
这款的洗面奶容量也很足，可以用蛮久的
价格的话也算比较平价，名字也很好听（我特别喜欢这个名字）！

订阅页面打开就闪退

WINY 家的首饰的盒子总是给我感觉很舒服又干净的感觉
整体的外包装色调是白色和粉色为主
里面会有一个小袋子的内包装
这个项链的设计是一个两个 💍 环环相扣的感觉
会有一种永远不分开的象征
上身效果戴起来也很棒，同时也很百搭
七夕马上到了，不知道给男朋友送什么礼物的可以参考下凹

应用后台进前台，切换商品后，唤起支付，支付成功后的确认，orderId 为空，然后后端返回被支付订单不存在
exchange 返回的成功：
{
"error_no": 0,
"message": "成功",
"result": {
"order_id": "032e019d-8bbc-4763-9c4b-f9df97cc356e"
}
}
verify 的请求：
{
"order_id" : "",
"pay_currency" : "USD",
"transaction_id" : "2000000383104349",
"platform" : "ios",
"pay_amount" : "0.99",
"sign" : "af1e5a634dc9cb4cd25b77f701d65110",
"sdk_version" : "2.7.1",
"appid" : "2YBKKM9W9TX9"
}
verify 的返回：
{
"error_no": 10011,
"message": "被支付订单不存在"
}

今天预计 2.8.0 的内容回归完成，不会影响明天的正常发布

1.网络拨测打点数据中是否能区分项目
通过包名 bundle_id 区分不同项目 2.用 HTTPMethod IS NULL 来判断是 TCP 拨测不合理，需要有明确的字段标记。
新增 protocol 字段区分类型 3.三方登录和静默登录都可以触发拨测
已经测试了，三方登录和静默登录都可以触发拨测

<sandbox2@ouyang.me>
YEEM8wea.crey
<https://zeus-admin-prerelease.youle.game/>
<https://zeus-prerelease.youle.game/>

Unity 的 apk http 的数据无法采样上传，依赖于某个配置需要存在，如果不存在，只能拨测 https，不能拨测 http

需求内容：

<https://jira.youle.game/browse/DEVOPS-4911>

兼容设备和版本：

OPPOA8 Android 9
MI9 Android 11
MEIZU20Pro Android13

VivoX21iA Android9

备注：测试设备有限，暂时兼容了这 4 个版本

问题：

1.Google 支付完成后闪退（已解决）：<https://jira.youle.game/browse/DEVOPS-4914> 2.唤起后，切换到后台，再恢复到前台，然后支付后还是会闪退（已解决）：<https://jira.youle.game/browse/DEVOPS-4914>

3.Google 支付闪退后重新加载 sdk 进行支付，一直处于 waiting 状态（已解决）：<https://jira.youle.game/browse/DEVOPS-4915>

4.竖屏时 Google 支付弹窗不展示取消按钮，横屏下展示，恢复竖屏后又出现（弹窗是谷歌的弹窗，所以确认为该问题和我们无关）：<https://jira.youle.game/browse/DEVOPS-4917>

上线计划：

1.提供 2.7.1 版本 sdk（包含：闪退问题+横竖屏问题修复），用于升级后的项目使用；

2.提供 2.5.3 版本 adk（不存在闪退问题，只包含横竖屏问题修复），用于兼容给不做升级的项目使用

tips：后续更新计划为：优先上线闪退 bug 的修复，后续再上线横竖屏的支付问题。

需求内容：

<https://jira.youle.game/browse/DEVOPS-4843>

版本：

跟版 2.8.0

问题：

1.<https://jira.youle.game/browse/DEVOPS-4969>

备注：如果是 unity 的版本，不支持 http 的采样，只支持 https，如果需要支持 http，需要添加支持

上线计划：

1.2.8.0 版本：安卓+unity

2.发布时间：2023.08.08

gavLjcKwR7vRvTWV9IerHVQVP
PCzkEeVqOO2wr8UWrG6MJHpXT5492itSzgGUfqX6L1dkxlALmO

"""[防沉迷]--用户实名认证
参数校验： 1.表单为空 2.参数为空或者 null 3.参数缺失：缺少 id_no,name,account
4.id_no 不合法,id_no 传空
5.name 为空
6.id_no 和 name 不匹配
正常/异常： 1.正常请求
"""

"""[防沉迷]--支付限额
参数校验： 1.表单为空 2.参数为空或者 null
正常/异常： 1.正常请求 2.未实名，无配额 3.已实名，成人，无限额 4.已实名，未成年，有限额
"""

"""[防沉迷]--游戏许可
参数校验： 1.表单为空 2.参数为空或者 null
正常/异常： 1.正常请求 2.未实名，有限制 3.已实名，成人，无限制
"""

"""[内容安全]--服务端屏蔽字检查
参数校验： 1.表单为空 2.参数为空或者 null
正常/异常： 1.正常请求，不拦截，全文通过 2.全文拒绝 3.部分通过，部分拒绝
"""

token=7a6aca0770bf1d70fdf3a22d179df3b2

<https://tkw-pay.youle.game/pay_return?merchant_id=zeus2023&pay_way=8>

ReturnCode=1&ReturnMsg=%25e6%2588%2590%25e5%258a%259f&PayResult=3&FacTradeSeq=mycard_20230811141743_11juqI&PaymentType=FA200000002&Amount=33.00&Currency=TWD&MyCardTradeNo=MFF230811000056&MyCardType=&PromoCode=A0000&SerialId=&Hash=e967475ff05b605115554df53ab66b1373a449097d3d23d9157ff02c09739959&submit1=Resend

class ServerHTTPClient(object):

    def __init__(self, host, app_id):
        self.host = host
        self.app_id = app_id

    @property
    def headers(self):
        return {
            "content-type": "application/json"
        }

server_http_client = ServerHTTPClient(
get_host(),
get_app_id()
)
def generate_jwt_token():
"""
:return: 生成 admin 后台接口请求所需要的 token
"""
JWT_SECRET_KEY = "topjoy"
JWT_ALGORITHM = "HS256"
user_data = {
"User": {
"name": 'chaos',
"user_id": '999999',
"is_admin": True,
"allow_games": [{"alias": "opsgametest", "en_name": "admin"}],
},
"exp": 1691856291,
"iss": "zeus"
}
jwt_token = jwt.encode(user_data, JWT_SECRET_KEY, algorithm=JWT_ALGORITHM)
return jwt_token

class TestGame(TestCase):
def setUp(self) -> None:
jwt_token = generate_jwt_token()
self.jwt_token = jwt_token

    def test_game(self):
        path = "/api/v1/game?alias=opsgametest&_t=1691562726109"
        server_http_client.headers['authorization'] = self.jwt_token
        print(server_http_client.headers)
        response = server_http_client.get(path)

af08623513c145cd86d27c0bc819dd65
ec7bf8ddf9934279abd27500f733c54e

wx2e12144bd45d0c79
9ea04eed100e3bdf13325c8ea4127f1a

Qq 登录：8 未安装 app 的时候会显示扫码登录，扫码登录可以成功登录，但是也会报一个异常

Line 登录：3 未安装应用，会跳转到浏览器登录
会弹窗选择浏览器后一直处于 waiting 状态，日志未见异常（应该和手机安卓的版本有关系，安卓 9 会有这个问题，安卓 13 正常）

Twitter 登录：2 未安装应用，返回无法完成操作，日志报异常

Facebook 登录：1 未安装应用，会通过内嵌浏览器跳转到网业登录，但是 facebook 拦截了内嵌浏览器登录

Google 登录：6 会通过内嵌浏览器登录，可以登陆成功

微信登录：9 安装了微信无法唤起，也会一直处于 waiting，无法跳转过去；未安装应用，也一直处于 waiting

account 不存在，role_id 不存在，product_id 不存在，server_id 不存在，pay_way 不存在，pay_status 不存在，notify_status 不存在，order_attribute 不存在

                                                                                                    java.lang.IllegalStateException: Could not find method startGetRemainingTime(View) in a parent or ancestor Context for android:onClick attribute defined on view class android.widget.TextView with id 'getRemainingTime'

be86c9c83c2f9e71875691eab0e1392f28e44f5f

ZeusSDK.getInstance().login(this@MainTxtLogActivity){}是一个匿名函数，而 login 方法本身需要两个参数 public void login(Activity context, MCLoginCallback userObsv){}，为什么使用匿名函数的地方只需要有一个 context 参数呢,第二个 MCLoginCallback 参数为什么不需要传递呢

Api/v1/game 的 post 没有改完

api/login 的非法 token

<https://www.googleapis.com/androidpublisher/v3/applications/com.topjoy.sdk_demo>
/purchases/subscriptions/com.topjoy.sdk_demo.pay100
/tokens/hgojaodehfkgnpbehakcadjk.AO-J1OzVRrnjkPYnQfLZ9VgA6DqJ62TH9m4-QuAQicXOC3YbEWs5GsuwUPuOLCW62t-H0eqWauq9cqmAohes3hDGYlLVaHmDrg
?access_token=ya29.a0AfB_byDmL4S2fKcTPheMTk4WBX1p9ctJN3FzyLzDWmq8A9RF4nWglBN6rK5YbpbUow93lVVHiERgwF6_DAJ-sZgpGEOTtGQJALYMHh6v9ZCNs-sQ3UIkj8htLfITG5vc-hwPqBbxfpi-eMaXHV_aDY8yVqgLihhVruOJmU6Z350aCgYKAfISARASFQHsvYlsP6K4oiXG5XufNqvpMj_8eg0178

{
"signature" = "BKy/jkI/eYOTo17CM47Ba7yzwkeq5bPtTu6Ceo7wR9asnhCB04REi2kKO9wbKqmi2iMVAcW5Re88eIHQxVYGgc3rkQ0c9ivLqCXxyiLfRDbLmO8LWh3sIFmO8vD3E/OuvrgjQeocxNnhYoMginjfek7anLL6u0XuUSwnqDXi0e+DfmUjV3/NSXaF5JLaUrNHYRUZAPNhJl1mW6pF287r5RRMkyITBcl+IyydFe+lYlr+Xiife0yBO0C0o4WOcoF7kKZtU6y3x3cjbO8LuM/C0r/Lu1Cfh7wyh6c5DGbl0fLTY1fmoo+55EPRUTHZka2JHvVbiMxK2UnaqGTxZJ8flhEAAAXKMIIFxjCCBK6gAwIBAgIQFeefzlJVCmUBfJHf5O6zWTANBgkqhkiG9w0BAQsFADB1MUQwQgYDVQQDDDtBcHBsZSBXb3JsZHdpZGUgRGV2ZWxvcGVyIFJlbGF0aW9ucyBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTELMAkGA1UECwwCRzUxEzARBgNVBAoMCkFwcGxlIEluYy4xCzAJBgNVBAYTAlVTMB4XDTIyMDkwMjE5MTM1N1oXDTI0MTAwMTE5MTM1NlowgYkxNzA1BgNVBAMMLk1hYyBBcHAgU3RvcmUgYW5kIGlUdW5lcyBTdG9yZSBSZWNlaXB0IFNpZ25pbmcxLDAqBgNVBAsMI0FwcGxlIFdvcmxkd2lkZSBEZXZlbG9wZXIgUmVsYXRpb25zMRMwEQYDVQQKDApBcHBsZSBJbmMuMQswCQYDVQQGEwJVUzCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALxEzgutajB2r8AJDDR6GWHvvSAN9fpDnhP1rPM8kw7XZZt0wlo3J1Twjs1GOoLMdb8S4Asp7lhroOdCKveHAJ+izKki5m3oDefLD/TQZFuzv41jzcKbYrAp197Ao42tG6T462jbc4YuX8y7IX1ruDhuq+8ig0gT9kSipEac5WLsdDt/N5SidmqIIXsEfKHTs57iNW2njo+w42XWyDMfTo6KA+zpvcwftaeGjgTwkO+6IY5tkmJywYnQmP7jVclWxjR0/vQemkNwYX1+hsJ53VB13Qiw5Ki1ejZ9l/z5SSAd5xJiqGXaPBZY/iZRj5F5qz1bu/ku0ztSBxgw538PmO8CAwEAAaOCAjswggI3MAwGA1UdEwEB/wQCMAAwHwYDVR0jBBgwFoAUGYuXjUpbYXhX9KVcNRKKOQjjsHUwcAYIKwYBBQUHAQEEZDBiMC0GCCsGAQUFBzAChiFodHRwOi8vY2VydHMuYXBwbGUuY29tL3d3ZHJnNS5kZXIwMQYIKwYBBQUHMAGGJWh0dHA6Ly9vY3NwLmFwcGxlLmNvbS9vY3NwMDMtd3dkcmc1MDUwggEfBgNVHSAEggEWMIIBEjCCAQ4GCiqGSIb3Y2QFBgEwgf8wNwYIKwYBBQUHAgEWK2h0dHBzOi8vd3d3LmFwcGxlLmNvbS9jZXJ0aWZpY2F0ZWF1dGhvcml0eS8wgcMGCCsGAQUFBwICMIG2DIGzUmVsaWFuY2Ugb24gdGhpcyBjZXJ0aWZpY2F0ZSBieSBhbnkgcGFydHkgYXNzdW1lcyBhY2NlcHRhbmNlIG9mIHRoZSB0aGVuIGFwcGxpY2FibGUgc3RhbmRhcmQgdGVybXMgYW5kIGNvbmRpdGlvbnMgb2YgdXNlLCBjZXJ0aWZpY2F0ZSBwb2xpY3kgYW5kIGNlcnRpZmljYXRpb24gcHJhY3RpY2Ugc3RhdGVtZW50cy4wMAYDVR0fBCkwJzAloCOgIYYfaHR0cDovL2NybC5hcHBsZS5jb20vd3dkcmc1LmNybDAdBgNVHQ4EFgQUIsk8e2MThb46O8UzqbT6sbCCkxcwDgYDVR0PAQH/BAQDAgeAMBAGCiqGSIb3Y2QGCwEEAgUAMA0GCSqGSIb3DQEBCwUAA4IBAQA8Ru7PqDy4/Z6Dy1Hw9qhR/OIHHYIk3O6SihvqTajqO0+HMpo5Odtb+FvaTY3N+wlKC7HNmhlvTsf9aFs73PlXj5MkSoR0jaAkZ3c5gjkNjy98gYEP7etb+HW0/PPelJG9TIUcfdGOZ2RIggYKsGEkxPBQK1Zars1uwHeAYc8I8qBR5XP5AZETZzL/M3EzOzBPSzAFfC2zOWvfJl2vfLl2BrmuCx9lUFUBzaGzTzlxBDHGSHUVJj9K3yrkgsqOGGXpYLCOhuLWStRzmSStThVObUVIa8YDu3c0Rp1H16Ro9w90QEI3eIQovgIrCg6M3lZJmlDNAnk7jNA6qK+ZHMqB";
"purchase-info" = "ewoJIm9yaWdpbmFsLXB1cmNoYXNlLWRhdGUtcHN0IiA9ICIyMDIzLTA4LTE0IDAyOjE4OjE3IEFtZXJpY2EvTG9zX0FuZ2VsZXMiOwoJInF1YW50aXR5IiA9ICIxIjsKCSJzdWJzY3JpcHRpb24tZ3JvdXAtaWRlbnRpZmllciIgPSAiMjEzNzI1OTYiOwoJInVuaXF1ZS12ZW5kb3ItaWRlbnRpZmllciIgPSAiRDE1OEM4NEMtNzgyRi00RUEwLUIzMEMtMjQ5NEQwRjJBRkJBIjsKCSJvcmlnaW5hbC1wdXJjaGFzZS1kYXRlLW1zIiA9ICIxNjkyMDA0Njk3MDAwIjsKCSJleHBpcmVzLWRhdGUtZm9ybWF0dGVkIiA9ICIyMDIzLTA4LTE0IDA5OjMzOjEwIEV0Yy9HTVQiOwoJImlzLWluLWludHJvLW9mZmVyLXBlcmlvZCIgPSAiZmFsc2UiOwoJInB1cmNoYXNlLWRhdGUtbXMiID0gIjE2OTIwMDU0MTAwMDAiOwoJImV4cGlyZXMtZGF0ZS1mb3JtYXR0ZWQtcHN0IiA9ICIyMDIzLTA4LTE0IDAyOjMzOjEwIEFtZXJpY2EvTG9zX0FuZ2VsZXMiOwoJImlzLXRyaWFsLXBlcmlvZCIgPSAiZmFsc2UiOwoJIml0ZW0taWQiID0gIjY0NjEzODM4ODkiOwoJInVuaXF1ZS1pZGVudGlmaWVyIiA9ICIwMDAwODExMC0wMDE0NTUxQzBDNkI4MDFFIjsKCSJvcmlnaW5hbC10cmFuc2FjdGlvbi1pZCIgPSAiMjAwMDAwMDM4OTYyMzcyNyI7CgkiZXhwaXJlcy1kYXRlIiA9ICIxNjkyMDA1NTkwMDAwIjsKCSJhcHAtaXRlbS1pZCIgPSAiNjQ1MTE5MDgyNCI7CgkidHJhbnNhY3Rpb24taWQiID0gIjIwMDAwMDAzOTQxODM4MzciOwoJImluLWFwcC1vd25lcnNoaXAtdHlwZSIgPSAiUFVSQ0hBU0VEIjsKCSJidnJzIiA9ICIxIjsKCSJ3ZWItb3JkZXItbGluZS1pdGVtLWlkIiA9ICIyMDAwMDAwMDM0MTcyODMzIjsKCSJiaWQiID0gImNvbS50b3Bqb3kuemV1c2RlbW8iOwoJInByb2R1Y3QtaWQiID0gImNvbS50b3Bqb3kuemV1c2RlbW8uc3ViIjsKCSJwdXJjaGFzZS1kYXRlIiA9ICIyMDIzLTA4LTE0IDA5OjMwOjEwIEV0Yy9HTVQiOwoJInB1cmNoYXNlLWRhdGUtcHN0IiA9ICIyMDIzLTA4LTE0IDAyOjMwOjEwIEFtZXJpY2EvTG9zX0FuZ2VsZXMiOwoJIm9yaWdpbmFsLXB1cmNoYXNlLWRhdGUiID0gIjIwMjMtMDgtMTQgMDk6MTg6MTcgRXRjL0dNVCI7Cn0=";
"environment" = "Sandbox";
"pod" = "100";
"signing-status" = "0";
}

locust -f locustfile.py

1.实现只单独通知失败的用例结果，然后投屏到电视上
一种策略是对于失败的用例自动添加 jira 的任务，但是可能存在网络问题波动导致用例执行失败，所以暂时先没加 2.如何将自动化用例的执行集成在提测和上线流程中； 3.对于接口的自动化的覆盖率的统计 4.接口的覆盖率和质量上升的可视化
5.SDK 是否只通过 UI 自动化就足够？

微信登录用例：
def test_third_login_wechat(self):
"""[用户管理]--直接使用第三方登录, 微信登录"""
path = "/v2/user/third-login"
body = {
"device": generate_device_id(),
"mobile_info": json.dumps(generate_mobile_info()),
"platform": "android",
"secret_token": "",
"token": "0513dy0005Y6tQ1kWU000fuJtT23dy08",
"type": "9"
}
response = sdk_http_client.post(path, body)
self.assertEqual(response.json().get("error_no"), 0)

微信支付用例：
def test_wechat_verify_not_pay_order(self):
"""[微信支付]未支付订单确认"""
path = "/order/wechat-exchange"
body = {
"appid": get_app_id(),
"description": "crystal",
"device": self.device,
"extend": self.extend,
"lang": "1",
"level": "5",
"platform": "android",
"price": "1",
"product_id": "com.topjoy.sdk_demo.pay100",
"role_id": self.role_id,
"role_name": self.role_name,
"sdk_version": "2.8.0",
"server_id": "1",
"server_name": "区服名",
"user_id": self.user_id,
"vip": "1",
}
response = sdk_http_client.post(path, body)
order_id = response.json().get('result').get('order_id')
path = "/order/wechat-verify"
body = {
"appid": get_app_id(),
"order_id": order_id,
"platform": "android",
"sdk_version": "2.8.0"
}
response = sdk_http_client.post(path, body) # {'error_no': 10009, 'message': '订单支付失败'}
self.assertEqual(response.json().get('error_no'), 10009)

        1.获取skuList和subskulist一直处于waiting
        2.谷歌应用评分返回：fail一直处于waiting
        3.分享接口和制定平台分享接口返回取消，line分享报错

ios 订阅确认{'error_no': 10009, 'message': '支付订单认证失败, receipt 字段为空'}

用户中心重构的问题： 1.如果绑定的时候，google 账号达到绑定上限了，绑定不成功，是不是应该提示一下，现在用户完全感知不出来是因为达到绑定上限了
{"error_no":10003,"message":"该第三方账号绑定已经达到上限"}

已完成测试但是未发布的功能：
安卓：
1.realname、paylimit、getRemainingTime 后端请求需要在 MCZeusService 中重写 2.安卓打点添加 trace 信息 3.用户中心代码重构：绑定，获取绑定列表等接口 代码使用同一份。

iosv2 订阅问题： 1.如果已经成功订阅了项目，然后再次订阅提示已订阅的时候，点击“好”，sdk 会去调用一次 ios-verify，然后后端会查询不到订单，返回：
{
"error_no": 10011,
"message": "订单：9fe6bf6b-df4f-403c-896d-193ec5a6c93c 不存在, record not found"
} 2.而且针对于 1 的情况就会有多次 fail 的 verify 回调，订单号都是同一笔，但是 transaction 是多笔不一样的，后端返回的是：
{
"error_no": 10008,
"message": "订单已被支付"
} 3.输入密码后，支付成功，在没有调用 verify 之前回调一个失败的回调：paymenttransactionfail，然后 verify 确认，返回
{
"message" : "订单：f19fbc62-9d5a-4d61-8945-a441bec6e4e3 不存在, record not found",
"error_no" : 10011
} 4.感觉会有自动的重试 verify，在返回：{
"message" : "订单：f19fbc62-9d5a-4d61-8945-a441bec6e4e3 不存在, record not found",
"error_no" : 10011
}
之后，重复调用 verify，还是返回不存在 5.有时候点击点阅就直接弹出一个：支付成功

第二道大题是：
现有一个硬件加速器资源，可以通过 100000 个通道对其下发任务。要求设计一种通道资源管理方案，满足:
当某个用户需输入-1 时。此时资源管理方案分配未使用的最小通道号给用户。
当某个用户输入有效的通道号时，此时资源管理方案回收对应通道，允许之后重新分配。
计算经过一段时间后，下次用户申请时，所申请到的通道号，如无未使用的通道，输出-1。

账号体系的问题： 1.短信验证码校验界面的“重新发送”按钮，现在展示的是“retry”，需要中文还是英文？ 2.输入错误的短信验证码之后也不提示错误； 3.短信验证码校验的界面，是否需要加收不到验证码联系客服的选项？ 4.用户中心还需要添加邮件和手机号绑定吗？（需要加，本次需求不加，下次用户中心优化的时候再加） 5.用户协议和隐私政策的勾选按钮和 loginview 中的样式不一致 6.用户协议和隐私政策应该是一个链接还是两个链接？loginview 中的是一个，新做的是两个 7.注册的时候没有拦截，如果不勾选用户协议，不允许注册；
8.loginview 界面并没有添加邮箱登录的入口; 9.获取区号的接口保一个数组转换为 jsonObject 的异常
org.json.JSONException: Value ["+86"] at result of type org.json.JSONArray cannot be converted to JSONObject
2023-08-25 15:44:15.848 20934-25915 System.err com.topjoy.sdk_demo W at org.json.JSON.typeMismatch(JSON.java:101)
2023-08-25 15:44:15.848 20934-25915 System.err com.topjoy.sdk_demo W at org.json.JSONObject.getJSONObject(JSONObject.java:622)
2023-08-25 15:44:15.848 20934-25915 System.err com.topjoy.sdk_demo W at com.topjoy.zeussdk.net.NetUtil$1.onResponse(NetUtil.java:135)
2023-08-25 15:44:15.848 20934-25915 System.err              com.topjoy.sdk_demo                  W   at okhttp3.internal.connection.RealCall$AsyncCall.run(RealCall.kt:519)
2023-08-25 15:44:15.848 20934-25915 System.err com.topjoy.sdk_demo W at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1137)
2023-08-25 15:44:15.849 20934-25915 System.err com.topjoy.sdk_demo W at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:637)
2023-08-25 15:44:15.849 20934-25915 System.err com.topjoy.sdk_demo W at java.lang.Thread.run(Thread.java:1012) 10.区号无法自动识别，需要加这个功能吗？ 11.手机号的区号下拉菜单只由一个+86；（这个需要后端去加配置文件中的 list 值：specs/configmap_test.yaml） 12.找回密码界面返回之后，无法返回登录界面，然后还会一直处于 loading 13.邮箱登录界面，从注册界面跳转过来的话，无法返回上一级的注册界面 14.邮箱登录成功之后，没有弹窗的“登陆成功”提示

验证码过期的用例增加：短信验证码，邮箱验证码

自动化用例增加：
1.login-with-email
2.third-login 的邮箱登录

{"code":10,"msg":"Emaiil 不支持解绑","type":11,"status":2}

    public boolean dispatcher(){
        checkBillingAndRetry(new Callback() {
            @Override
            public void onSuccess() {
                MCChoosePayModel.isSupportNewAPI=isFeatureSupported(BillingClient.FeatureType.PRODUCT_DETAILS);
                new MCChoosePayModel();
            }
        });
        return true;
    }

       private void checkBillingAndRetry(Callback back) {
        callback = back;
        isConnected = false;
        tryCount = 0;

        if (billingClient != null && billingClient.isReady()) {
            callback.onSuccess();
            return;
        } else if (billingClient == null) {
            billingClient = BillingClient.newBuilder(MCApiFactoryControl.getInstance().getContext())
                    .setListener(mPurchasesUpdatedListener)
                    .enablePendingPurchases()
                    .build();
        }

        //需要重连
        retry();
    }这里的写法是什么意思？



        private void retry(){
        int maxTryCount = 3;
        if (isConnected || tryCount++ > maxTryCount){
            //已连接或重试次数超过最大次数，执行回调
            if (!isConnected) {
                if (code == BillingClient.BillingResponseCode.USER_CANCELED){
                    //payCancelBackFinish("User canceled");
                    payFail();
                }else{
                    //payFailBackFinish(Pay.BILLING_CLIENT_NOT_READY.jsonWithMsg(tryOverMsg));
                    payFail();
                }
            }else{
                callback.onSuccess();
            }
            return;
        }

            private void checkBillingAndRetry(Callback back) {
        callback = back;
        isConnected = false;
        tryCount = 0;

        if (billingClient != null && billingClient.isReady()) {
            callback.onSuccess();
            return;
        } else if (billingClient == null) {
            billingClient = BillingClient.newBuilder(MCApiFactoryControl.getInstance().getContext())
                    .setListener(mPurchasesUpdatedListener)
                    .enablePendingPurchases()
                    .build();
        }

        //需要重连
        retry();
    }
    retry方法中的callback.onSuccess()是会回调到checkBillingAndRetry中的callback.onSuccess()吗

2023-08-30 15:45:39.512 13696-17032
2023-08-30 15:45:40.504 13696-17032

2023-08-30 15:45:39.509 13696-13696

$.error_no

{"orderId":"GPA.3308-7902-5578-98044","packageName":"com.topjoy.sdk_demo","productId":"com.topjoy.sdk_demo.pay100","purchaseTime":1693386594176,"purchaseState":0,"purchaseToken":"mdglbpoeclnfdjmlmhoofkfc.AO-J1OyLdaPe_drtDcwMNpCIc1nSTE-79K1f15fEzdz69GmYCsBAOPPkPjOdY3lujvQ4WfMlxhc8JKfuGa1o0MKMwME1F2Y_Yg","obfuscatedAccountId":"a_20230830170948_3T8kL4","quantity":1,"acknowledged":false,"developerPayload":"a_20230830170948_3T8kL4"}

{"orderId":"GPA.3308-7902-5578-98044","packageName":"com.topjoy.sdk_demo","productId":"com.topjoy.sdk_demo.pay100","purchaseTime":1693386594176,"purchaseState":0,"purchaseToken":"mdglbpoeclnfdjmlmhoofkfc.AO-J1OyLdaPe_drtDcwMNpCIc1nSTE-79K1f15fEzdz69GmYCsBAOPPkPjOdY3lujvQ4WfMlxhc8JKfuGa1o0MKMwME1F2Y_Yg","obfuscatedAccountId":"a_20230830170948_3T8kL4","quantity":1,"acknowledged":false,"developerPayload":"a_20230830170948_3T8kL4"}

1.如果输入了登录密码，没有输入重复密码，注册提示：请输入重复密码，不需要清空登录密码； 2.如果输入了登录密码，也输入了重复密码，但是不一致，注册提示：两次密码不一致，清空两个输入框，输入光标指示到输入登录密码的输入框

邮箱注册，提示密码不一致： 1.输入了登录密码，重复密码没输入； 2.输入了登录密码，重复密码输入和登录密码不一致
如果这时候跳转到了用户协议，再跳换回来，以上的两种情况的提示就变成了：请输入登录密码，感觉像是之前输入的登录密码就获取不到了

需要确认的问题： 1.在 toast 中写死的中文的提示怎么做全球化？ 2.联系客服的入口的规则； 4.用户协议和隐私政策合在一起还是分开的规则，以及分开的话内容/url 是同一个吗？；
都展示两个，如果项目需要一个，传两个一样的 url
5.loginview 中的入口受 admin 配置的控制是不是还没做？ 6.手机号的位数的判断规则？
统一限制 11 位

会议纪要：
1.60s 更新换手机号允许重新获取验证码 @陈重友 2.限制手机号只能输入数字 @陈重友 3.区号后端配置的时候按照数字大小升序 @童盛 4.手机号绑定不能解绑，做成和邮箱一样的限制 @陈重友 5.输入框：例如输入错误的登录密码的时候，提示我们要求的规则，提示语放在弹窗的位置 ，其他的错误通过 toast 的提示 @陈重友 6.邮箱注册的输入框提示，重复登录密码调整为确认登录密码 @陈重友 7.显示密码的按钮都加上，现在是密码找回展示，注册不展示 @陈重友 8.用户协议和隐私政策在 loginview 和短信邮箱的登录注册界面都展示两个入口，如果项目需要一个，传两个一样的 url @陈重友
目前的两个 url 是一样的，调整为不一样的
9.loginview 中的入口受 admin 配置不生效 @陈重友 10.手机号的规则统一限制 11 位 @陈重友

不同的邮箱类型：163，qq，gmail，等
息屏，前后台

需要补充的回归用例： 1.谷歌订阅的用例
2.ios 订阅的用例 3.谷歌的支付取消 4.谷歌的订阅取消

回归的时候的问题： 1.谷歌订阅返回：订单未支付，线上的环境
2.ios 的 twitter 登录闪退，打开用户中心也闪退

功能，交互，易用，安全

1. 发送短信改成每个手机号限制 60s
2. 手机号正则校验时区分国内国外（统一限制 11 位）
3. ✅ 手机号输入框限制只能输入数字
4. ✅ 短信登录取消解绑
5. ✅ 隐私协议：从 loginview 进入的不显示，接口进入的显示
6. ✅ 密码错误提示：请输入 4-20 位字母数字特殊字符（密码输入框下）
7. ✅ 邮箱格式：只需要包含@符号
8. 所有格式错误放到输入框下
9. ✅ 请确认登录密码
10. ✅ 维护一个列表支持返回和关闭
11. 登录未注册后端添加一个错误码
12. ✅ 找回密码点击客服按钮跳转，返回时返回到 dialog
13. 显示密码

密码错误提示：请输入 4-20 位字母数字特殊字符（密码输入框下）：fail

谷歌支付没有登录谷歌账号的时候返回：{"code":3007,"msg":"GooglePay onBillingSetupFinished code = 3 msg =Google Play In-app Billing API version is less than 3"}

facebook 分享闪退
E FATAL EXCEPTION: main
Process: com.topjoy.sdk_demo, PID: 13298
java.lang.ExceptionInInitializerError
at com.topjoy.zeussdk.activity.MCShareActivity.shareFacebook(MCShareActivity.java:184)
at com.topjoy.zeussdk.activity.MCShareActivity.access$500(MCShareActivity.java:51)
                                                                                                     at com.topjoy.zeussdk.activity.MCShareActivity$3.onClick(MCShareActivity.java:169)
                                                                                                     at android.view.View.performClick(View.java:7570)
                                                                                                     at android.view.View.performClickInternal(View.java:7540)
                                                                                                     at android.view.View.-$$Nest$mperformClickInternal(Unknown Source:0)
at android.view.View$PerformClick.run(View.java:29710)
                                                                                                     at android.os.Handler.handleCallback(Handler.java:942)
                                                                                                     at android.os.Handler.dispatchMessage(Handler.java:99)
                                                                                                     at android.os.Looper.loopOnce(Looper.java:240)
                                                                                                     at android.os.Looper.loop(Looper.java:351)
                                                                                                     at android.app.ActivityThread.main(ActivityThread.java:8416)
                                                                                                     at java.lang.reflect.Method.invoke(Native Method)
                                                                                                     at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:584)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1013)
Caused by: The SDK has not been initialized, make sure to call FacebookSdk.sdkInitialize() first.
at com.facebook.internal.Validate.sdkInitialized(Validate.kt:117)
at com.facebook.FacebookSdk.getCallbackRequestCodeOffset(FacebookSdk.kt:1036)
at com.facebook.internal.CallbackManagerImpl$RequestCodeOffset.toRequestCode(CallbackManagerImpl.kt:61)
                                                                                                     at com.facebook.share.widget.ShareDialog.<clinit>(ShareDialog.kt:394)
                                                                                                     at com.topjoy.zeussdk.activity.MCShareActivity.shareFacebook(MCShareActivity.java:184)
                                                                                                     at com.topjoy.zeussdk.activity.MCShareActivity.access$500(MCShareActivity.java:51)
                                                                                                     at com.topjoy.zeussdk.activity.MCShareActivity$3.onClick(MCShareActivity.java:169)
                                                                                                     at android.view.View.performClick(View.java:7570)
                                                                                                     at android.view.View.performClickInternal(View.java:7540)
                                                                                                     at android.view.View.-$$Nest$mperformClickInternal(Unknown Source:0)
at android.view.View$PerformClick.run(View.java:29710)
                                                                                                     at android.os.Handler.handleCallback(Handler.java:942)
                                                                                                     at android.os.Handler.dispatchMessage(Handler.java:99)
                                                                                                     at android.os.Looper.loopOnce(Looper.java:240)
                                                                                                     at android.os.Looper.loop(Looper.java:351)
                                                                                                     at android.app.ActivityThread.main(ActivityThread.java:8416)
                                                                                                     at java.lang.reflect.Method.invoke(Native Method)
                                                                                                     at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:584)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1013)

twitter 分享成功，但是 code 是 cancel
数据上传功能，闪退
49f2f609
49f2f609

后端的邮箱注册看起来像不支持含有汉字和特殊符号的邮箱
2023-09-07 10:29:26.644 14163-14163 SDK2.0 com.topjoy.sdk_demo I MCRequestParamUtil:发送的参数{"appid":"7AVS2D5QH2TV","captcha":"","email":"123..Abc#%@qq.com","password":"Test1234","platform":"android","sdk_version":"2.8.0","sign":"f95643f7166ed20cd864df5af1fddbf4"}
2023-09-07 10:29:26.686 14163-4289 SDK2.0 com.topjoy.sdk_demo E MCEmailRegisterDialog:{"error_no":1003,"message":"Key: 'RegisterWithEmail.email' Error:Field validation for 'email' failed on the 'isEmail' tag","trace_id":"28bbe2716d8640deb91eae1abe08277c","result":{"trace_id":"28bbe2716d8640deb91eae1abe08277c"},"code":10,"net_name":"register-with-email"}

邮箱账号：
<1097099589@qq.com>
<17600116844@163.com>
<jiaheqi77@sina.com>
<jiaheqi@sohu.com>
<jiaheqi177@gmail.com>
<jiaheqi@outlook.com>
<jiaheqi@topjoy.com>

toast("please wait " + MCSMSVerifyDialog.delayTime);

/Users/topjoy/StudioProjects/ZeusSDK/Android/ZeusSDK/app/src/main/java/com/topjoy/sdk_demo/MainTxtLogActivity.kt

com.topjoy.sdk_demo.MainTxtLogActivity

/Users/topjoy/StudioProjects/ZeusSDK/Android/ZeusSDK/app/build/outputs/apk/debug/app-debug.apk

/hierarchy/android.widget.FrameLayout/android.widget.FrameLayout/android.widget.FrameLayout/android.widget.LinearLayout/android.widget.LinearLayout[3]/android.widget.ImageView[1]
/hierarchy/android.widget.FrameLayout/android.widget.FrameLayout/android.widget.FrameLayout/android.widget.LinearLayout/android.widget.LinearLayout[3]/android.widget.ImageView[1]
/hierarchy/android.widget.FrameLayout/android.widget.FrameLayout/android.widget.FrameLayout/android.widget.LinearLayout/android.widget.LinearLayout[3]/android.widget.ImageView[4]

IOS 支付订单未持久化导致无法和 paymentTransAction 完成关联

admin 后台配置测试问题： 1.应用新增 api/v1/game 接口返回：code: 1
message:
"Key: 'GameInfoCreateForm.appid' Error:Field validation for 'appid' failed on the 'required' tag\nKey: 'GameInfoCreateForm.secret_key' Error:Field validation for 'secret_key' failed on the 'required' tag"
2./user/third-list 接口查询结果在设置开关状态更新了后，查询结果没变，如果开关关闭了，返回结果中还是开启 3.谷歌登录 sdk 返回：resultCode:0|msg:Fail|result:{"code":11,"msg":"10: ","native_code":10,"status":0,"third":6}

接口测试的对于网络问题的重试机制；

    "aihelp_appid"
    "aihelp_appkey"
    "aihelp_domain"
    "is_ali_payment_open":
    "is_google_payment_open":
    "is_ios_payment_open":
    "is_wechat_payment_open":
    "is_xsolla_payment_open":
    "shushu_appid": "226d1c95988343a78f35131292ef56af"
    "shushu_host": "https://oversea-log.topjoy.com/"

    "qq_appid": "101479492"

DB0 game_10009
{
"id": 10009,
"project_id": 1,
"name": "SDKDemo",
"alias": "opsgametest",
"appid": "7AVS2D5QH2TV",
"secret_key": "DF864TCE1XWZE1NH",
"platform": "all",
"type": "",
"service_mail": "",
"google_pay_package_name": "",
"google_pay_key": "MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAkWF+w1IrAoID9sndOKVRSd9O+b4DgdHktExKh3FNBGttH/gOwNKNXkjHQhCiApIkqTlgHv4eiQMZiVals2fa3lBZWL6QCMtqKAv+Xvtajy1mJGw0kctBEO36qXj+QgENjtSWxBA+Vkv4TfBwMHPlepHKgYQnoabfs7KW7i1p6StIeu0TsL/wzIBlKPWS+pI48cW+z21HJ2xdQCf+2mwoE+RPUc89G37HHtosO3gb3uuDaRu8wbpygS7EClUV3ocJ22C6B1sC/SIuiFdz5RaJloCR9NLwVrhXKRD7ef718TFT9V6VO8Y1/BmRvUU97dOj00QRaXnKTvopUx7fcRiDYwIDAQAB",
"google_client_id": "742111184369-80f14hhsa3fo9rt5ikjhvci749gj7dn8.apps.googleusercontent.com",
"google_client_secret": "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",
"google_refresh_token": "1//0eFMkCrZ-IRxnCgYIARAAGA4SNwF-L9IrFAKO86aIzl32uBR-3FGJsP35IHXKJIxdd3RpQVK34jaZcJA6C7NRzFHMtRao-ZIu-Q0",
"google_redirect_uri": "<http://localhost>",
"apple_password": "",
"apple_bundle_id": "com.topjoy.zeusdemo",
"apple_iss": "e5a4b6e6-0c9d-4702-b444-8a361bf4a17f",
"apple_key_id": "LML8N38Z9M",
"apple_secret": "-----BEGIN PRIVATE KEY-----\nMIGTAgEAMBMGByqGSM49AgEGCCqGSM49AwEHBHkwdwIBAQQgiFaVeqweepF6s1JZ\nwYJxJ26BbRM87PR0wZDWaHX7nbagCgYIKoZIzj0DAQehRANCAAT0HodCCuZsqyd3\n+hL82wmBBhSL4HEZwickLDJMLPdEFVPcj6Bs7f+iuoV2xxte2JCyr2U85NpyiAJ1\nm5lFKCfw\n-----END PRIVATE KEY-----",
"is_apple_check_transcation_id": false,
"pay_notify_key": "tkwhant",
"pay_notify_url": "<http://117.50.187.91:8080/pay/check>",
"is_recharge_close": 0,
"is_recharge_open": 1,
"is_fb_login": 1,
"is_tw_login": 1,
"is_line_login": 0,
"line_appid": "1654209506",
"is_gp_login": 0,
"is_gc_login": 0,
"is_gi_login": 1,
"is_ai_login": 0,
"is_qq_login": 1,
"is_wechat_login": 1,
"is_mobile_login": 1,
"is_email_login": 1,
"is_apple_id_login": 1,
"aihelp_appkey": "050600_app_291aec1bf3cb4c6fb2768fa26d5075ef",
"aihelp_appid": "050600_platform_c5487d76a25727d2050d2a2d45c578dc",
"aihelp_domain": "050600.aihelp.net",
"freshdesk_appkey": "e077a8cf-a1f2-42d8-a62b-f6f24a618b79",
"freshdesk_domain": "msdk.freshchat.com",
"freshdesk_appid": "58a3fdd7-879d-471f-9730-40ff1294c67f",
"fb_appid": "495405604470359",
"fb_secret": "0f9b3cf3f86115246dc70b8a72c817a8",
"fb_client_token": "c137b67ac1cc6c710cbca8082ec7bb07",
"twitter_key": "gavLjcKwR7vRvTWV9IerHVQVP",
"twitter_secret": "PCzkEeVqOO2wr8UWrG6MJHpXT5492itSzgGUfqX6L1dkxlALmO",
"shushu_appid": "226d1c95988343a78f35131292ef56af",
"shushu_host": "<https://oversea-log.topjoy.com/>",
"status": 1,
"create_time": "2020-05-14T09:53:50+08:00",
"update_time": "2023-08-18T10:57:13+08:00",
"bound_max_count": 2,
"xsolla_project_id": "654321",
"xsolla_merchant_id": "123456",
"xsolla_secret_key": "",
"is_xsolla_payment_open": 1,
"wechat_appid": "wx2e12144bd45d0c79",
"wechat_secret": "9ea04eed100e3bdf13325c8ea4127f1a",
"is_wechat_payment_open": 1,
"is_google_payment_open": 0,
"is_ios_payment_open": 1,
"is_ali_payment_open": 1,
"wechat_api_client_key": "-----BEGIN PRIVATE KEY-----\nMIIEvwIBADANBgkqhkiG9w0BAQEFAASCBKkwggSlAgEAAoIBAQC4uzc0iS2d/ai0\nFOhTyXzgdIUY5bWQMWm+MUkUpRwaLf7cUcQGqQyUat/JVps7p2NBwmcR4VvnkJld\ncw5cZA/1tMkMN1wQVqPpfumEBnYXzbnlvQbng6k9XL+wN8ztJzqKpCB0LQin1jJc\nh0IP9U+C6SmgRV9QeEde97ahUtzvdUULIGFAPD3nshlorz0jqZ/oswpaBK6qn6N1\nnN98bJZVFMdZOZTbzWDYEj630L1SyyfX/f8zByhQtjWoHDnULrDEfF+z2TvksRk6\nTMyJuVBYhwEaMJHkjHv61f0pdJHtzBCv0s4EAsIz5huilNAECGlTC9YCWNPcEjuR\nywebH195AgMBAAECggEBAKnU3GT9NKYKXP3qNslI9Ph5xx9jl+9PrlJ/hxtmzBY5\ncRRmS5x/8CPGuaSlbaODORpsuktS7yZN5uFl9K72A0I2CZukjYwryxfQaKjLM+ig\nZyaSCPXxMjdKvKQqOMlShlyNlZSZDlsW7kfoxdBcC9RjvbQt8vnNCniBrjJUNvAh\nQj/R32FQYqy1nlyntGDO9Wm1q4IIwLl02i7PXNKWsADDw9j8DnND/4DpX+5zDGKV\n4V/u0GxabHHMUBH9zFLrFMdmbVyWhFbEq0SxhB6d9GXNBzGhHg5efleIkxLEpCMN\njrVQYL9GZ2BkPUBRe4xlWtDXoK3KS4pwnYzJiUUVAIECgYEA9OuGmcSD9y5sNcFR\nx7/nSktILhdx49U1ODe6s3D2gBp0tnppUZ36uDTqoVzcs2wFBg33zq8Hh60wlQGT\nOUkxcT99Ij7BiVxstwbQwKAi2A8zB6GSHEdP+MOEZnqURlGBc4VFud0XztUXbgoN\nR9v/UXboGTTBrA/lT9LBGAH90kkCgYEAwRahejU4DaGGUsuNd3YBtcBy/emb5yj+\nQrnJkGQcu/9jYFnomTU8++c7I5UxY55NwKba9J0w3VD1Yv9whd2pl80LbDMLRzeB\nD9bLv3/zlZM5EyT5VgjMivDB+TWPCjnBtzQ3ii3hjbiAyfexZ78RKkpwX2BtkwuD\nVtIkNw/ZI7ECgYEAxzvRAsUZlLnuzMu1+wfg3k7fKJ9pxixqXpD3D4GVBCCBUO/D\nPOGGUtK5Cwq/fjUg4Qv7yeYX+gaovo3JdZBU6Ar9gB4M0fCdf0XMCuY5cgjrOgn1\nEYvxQivKSJLui0VCSPbhAZEZDOfLZ3hF1W7hAyP3KooAAjfsEkMfUKhOEgECgYAX\nvOmDNbG7c0UpPp8YtahGKO+6KZMiGxcPKvoNx1EFB8O237bJxxLFQUsy96+HuLmE\nWr8GXaDZRI+2aQLzYinsYKfr2GaljbxPLzADTf6rP9s/cEc6/X/wAONH+P6p2inn\nlQLS+QsGuk0TB2GHCKValqY0A43VCxBNhy4umsMuMQKBgQCehWcKcCSOlk+9rboT\nAsk+jFS2fuRozhmX2yZkf+uzaAxko9cASban0nki4n8yQnEhBLZu4qXKwgRdsZTx\n/4A7+b40NcSEV0p5gUToeXjNss3JtJPqFMjFkF3hsCzmx0tAAMaKmDtwMdFX9nUo\n0EcAHngzXVGVN8r8LXFSwIRieg==\n-----END PRIVATE KEY-----",
"wechat_mch_id": "1632471809",
"wechat_mch_sn": "4FF68B2B2037B9C0189117E36D47FB58EBFF1A9E",
"wechat_mch_api_key": "E4b4eTAPtFvZLKd76Ol4rxE70DPGrrcx",
"ali_private_key": "MIIEpQIBAAKCAQEA07Ww8ED6DpSVH5pSdT5GYUQU+LtBL1xfmO/12u+rUzTxLWHUsZojBMYWdwhFKtWl5dTJ2O532CrncwgI4XtFCk82v6Y1jvHnPnKozfXiBLVq65iJB+MUgXiw0P65TUQ7W46p7o2Kb/Z0oQ/r5TfEZhZL/OhmrI4grAYjvjLVAE2KsCFfmmJSKlQb+M9T/Xz8UaZz9F6s5EqAZgpLCFSZU5srvtsjwS/jhowCQ1tXSoW1yNmBCQ94ySCqP+ZrECXZyPpCD9dNj0XOMmE1aCX7szEP9Tc4eEP2VHSy0mUYGNQl94iOCu81RJ8JwOQYWTP3DAQ0FCLhFohRmc6JI3W5QwIDAQABAoIBAFjGMli8Vl6wzUtAMd157JcyrjySgMX0TR3bWVOh9kxgwdUO1dpXUOHakmb9b8uDZRpXvQAbFuPtMbpZnye1wgCNsN5yOrkjFJ1qBQDAXzMsQ5ZhEuzcuqeDzVkFxvvwZZeB3h3q+ibyyHsVKwyl8tP/+4MkjJFE08xukqRZullyZo02+0x3wQmKInGJHsZGrHWhmlSpKP1J+4Cm5/qq0fIz4B8tBHhBxvUJZRdwgs5O1mNLjYa25A+k2gbTpz7sjtcCNiP1d2zvZLE25bY1DYJShNra1Xu8B0WtFX0i8CfkkJ9okq0X6o6VAEUNfBwZL1KOL8nGUL3Cyi1PkhT8iPECgYEA/SKggiUZA1rE/Psl7hodf76z66sn0AFBTqDBYvXMLuWnl9G8pb209XJPjdixTXBCt5mxkRu8QKfpbaGjKS21W2deyssVhUeQXqxaSXqjbyl4rU8CD6DYIqKFIy69lKOllVBSc/unY85a6r+mwmBKkAtemcRtyLY6EnkbsOpUfjsCgYEA1hsMP575DMUwdPLEQHRm+pBNG4sblxmdqG0I9XjbQyevpV+uH1GWrdAeJA2bFbQgkyqLnXHj9OnKCK/oyMb9B6ivLRjFz/iTNF1BvZKe3IuoWgdmQi8JzLFKKZEmVRYs6VGQA7Sdxp0zJkxj5o2c3LAgx170uYsdZ+aeX++WWJkCgYEAx5f1DYlo1p9MsdjpyHtpBR/+R/W1t6o1r2TL91auP9AvPGNRJzKVK++NUOAqtU+uG4yhWTSQVD7RrPMFbuOumzq/oJFPD78k07F8o3GCypTdpXGlw2Lk6TJSXjJto3UBi+FAklk8XFMKlwy01ZENWdTNK9uZYOhmk8hQkEfEhZ8CgYEAqsGvpx32qwSpfNwRQQaVCskDdjAftQatAqLTPlNBK/H+1/nTOQ8tCTqujzp6sXiTckvARbWLhMzgYMVK9rYdH3qdG25idVder6igwbyqDmMjxYmZOLejLSlIaJZm5/1jnEF8hjgKjVjabnUGR94xeKDPw7Iro78bmL4JGaJPWiECgYEA4FvanHScNxlhkBgYhpC0LlGRUDodSsOEURZkRBEEOl+QMpnFmY8J6Us0uEwMyyhGohlzFBWVapDr7k0a2cOcMfwhDRrWtLdrB0rhdgLUt/vMs+Lf47opqyD0/YPh8fHrv+EYoHWN8jPrwnrROgFCZB9i7t6OktDKoKMuOVXjjAg=\n\n",
"ali_app_id": "2021003151622124",
"ali_pub_key": "MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAi6idD6PTJKTf6JHkVmd6iDWpALibowfIddv0aLNMVdsVPr8fCowvyfN9jwQY/VCzQipFwfhYyFuAiraSLw30pFhKCKn9iU3PmKWbhcp4yPOPtLHKar04F/0AyulyRDebfD00U3qVDj0RIDcMmWriktM2F9Q2b8gzrlMWTR9w5QmwefzF7PZzXXA/UFRY3eqPv4uZ1LMdOfwW4KkMQWQIbXuVoMOxPfkeP0l6W9m0Gea5S2a0ddcCayvcuW9cpY/kvDfGnFsiivoiJLig0cwX+EwxbNebQaR/TzO5r3G3Ka7bHBVMN+Qk0WvVu+dudZeNhdmDqRJxn5o6OVVZSMyBWQIDAQAB",
"qq_appid": "101479492",
"is_google_subscription_open": 1,
"is_ios_subscription_open": 0,
"sampling_rate": 1,
"apple_client_id": "",
"apple_client_secret": "",
"game_server_addr": "",
"cancel_game_server_addr": "",
"is_set_pay_notify_url": true,
"ding_talk_token": "8b2aee720f75e8e970b849663519d826907a8c6fc5815b6bdc7064de98f541ab",
"mycard_id": "zeus2023",
"mycard_service_id": "ALF",
"mycard_secret": "5b2f4b08b9502634de6156f72371ebbb",
"mycard_sandbox_mode": true,
"is_mycard_payment_open": 1,
"gash_configs": {
"hk": {
"service_id": "C009210001718",
"region": "",
"key": "CckfDshQFWQBBU5Nv90EyMnaApn4lA56",
"vi": "0vM5PGhYAa8=",
"password": "sdflkgj62w",
"sand_box_mode": false
},
"hk_staging": {
"service_id": "C010050003570",
"region": "",
"key": "wwkUocgxa+RL4EVaDgKv/IpEafR2CMl8",
"vi": "psrIAOKfB44=",
"password": "SDLE5555qaz",
"sand_box_mode": true
},
"tw": {
"service_id": "C009200001717",
"region": "",
"key": "asGSJVl8txtpixIfFciOIOU2F3MPP2R4",
"vi": "pPwGHDxtBnQ=",
"password": "ljslKD6WS",
"sand_box_mode": false
},
"tw_stage": {
"service_id": "C010040003569",
"region": "",
"key": "hsPhO6awFZfoIvWULny20DgkeaEc3f63",
"vi": "CwC2OwQ4QRQ=",
"password": "fdkjem55qq",
"sand_box_mode": true
}
},
"is_gash_payment_open": 1,
"merchant_id": "zeus2023",
"merchant_secret": "5b2f4b08b9502634de6156f72371ebbb",
"mycard_configs": {
"hk": {
"service_id": "ALFHK",
"secret": "5b2f4b08b9502634de6156f72371ebbb",
"sandbox_mode": true
},
"tw": {
"service_id": "ALF",
"secret": "5b2f4b08b9502634de6156f72371ebbb",
"sandbox_mode": true
}
},
"antispam_secret_id": "testSecretId1",
"antispam_secret_key": "testSecretk",
"antispam_business_id": "testBusinessId",
"open_status": 1
}

我测试的时候看关闭了开关之后谷歌支付是受影响的，这三个还是可以正常支付

    public static boolean _isFastDoubleClick(final long maxTime) {
        long time = System.currentTimeMillis();
        long timeD = time - mLastClickTime;
        if (0 < timeD && timeD < maxTime) {
            return true;
        }
        mLastClickTime = time;
        return false;
    }
        public static boolean isFastDoubleClick(int time) {
        return _isFastDoubleClick(time);
    }
        private boolean checkValid(Context context, MCOrderInfoBean orderInfo){
        if (!MCNetUtil.isFastDoubleClick(500)) {//如果是快速点击 则不发送请求
            currentOrderInfo = orderInfo;
            Loading.getInstance().show();
            if (MCTextUtil.isEmpty(MCPersonalCenterModel.getInstance().getUserId())) {
                MCLogUtil.cbLog("pay",MCConstant.RESULT_CODE_FAIL,MCConstant.RESULT_MSG_FAIL,"no login");
                MCCallbackBean.fail(MCCallbackBean.getInstance().getPayCallback(), MCConstant.UNITY_CALLBACK_PAY_FAIL_CODE, context.getString(MCInflaterUtil.getIdByName(context, "string", "XG_Recharge_Error_Tip2")));
                return false;
            }
            return true;
        }else{
            MCLogUtil.cbLog("pay", 0, "Fail", "quick click");
            MCCallbackBean.fail(MCCallbackBean.getInstance().getPayCallback(), MCConstant.UNITY_CALLBACK_PAY_FAIL_CODE, Common.QUICK_CLICK.jsonWithMsg(Common.QUICK_CLICK.description()).toString());
            return false;
        }
    }


    private static final String CHECK_EMAIL = "^[a-zA-Z\\d._%!#$&'*+-/=?^`{|}~]+@[a-zA-Z\\d.-]+\\.[a-zA-Z]{2,}$";

hw_20230912152958_MJrsLa

hw_20230912152816_zYvNg1

    MCGenericCallback3<PurchaseResultInfo> purchaseListener = new MCGenericCallback3<PurchaseResultInfo>() {
        @Override
        public void onSuccess(PurchaseResultInfo result) {
            String inAppPurchaseData = result.getInAppPurchaseData();
            String inAppPurchaseDataSignature = result.getInAppDataSignature();

            verifyPurchase(MCHuaweiPayActivity.this, inAppPurchaseDataSignature, inAppPurchaseData, new MCGenericCallback2<String>() {
                @Override
                public void onSuccess(String result) {
                    onPayResult(MCPayResult.PAY_RESULT_SUCCESS, "huawei pay successfully");
                }

                @Override
                public void onFail(String message) {
                    onPayResult(MCPayResult.PAY_RESULT_FAIL, message);
                }
            });
        }

        @Override
        public void onFail(String message) {
            MCLogUtil.e(TAG, "purchase fail:" + message);
            onPayResult(MCPayResult.PAY_RESULT_FAIL, message);
        }

        @Override
        public void onCancel() {
            MCLogUtil.e(TAG, "purchase cancel");
            onPayResult(MCPayResult.PAY_RESULT_CANCEL, "purchase cancel");
        }
    };
    我这里的写法，onSuccess的参数PurchaseResultInfo从哪来


    public void pay(Context context, MCOrderInfoBean orderInfo, MCPayCallback pck)
                ZeusSDK.getInstance().pay(
                this@MainTxtLogActivity, order
            ){lambda表达式}

我的 pay 方法是三个参数，但是下面的 getInstance()调用 pay 方法的时候圆括号中只有两个参数，这里的写法是把 lambda 作为一个参数了吗？

    public void pay(Context context, MCOrderInfoBean orderInfo, MCPayCallback pck) {
        //DONE 转换callback
        MCCommonCallback callback = new MCCommonCallback() {
            @Override
            public void onResult(int resultCode, String msg, String result) {
                if (pck != null)
                    pck.onPayResult(resultCode, msg, result);
            }
        };
        MCLogUtil.logWithUserInfo(
                "pay",
                orderInfo.toString()
        );
        MCChoosePayModel.payType = 0;
        MCApiFactoryControl.getInstance().pay(context, orderInfo, callback);
    }
    MCCommonCallback是一个通用回调，这样写在通用回调的重写方法中，用MCPayCallback的实例去调用重写的onPayResult方法，这样做是什么原因？
    以及MCChoosePayModel.payType = 0;这里给赋值之后有什么作用？

        public static synchronized MCApiFactoryControl getInstance() {
        if (instance == null) {
            instance = new MCApiFactoryControl();
        }
        return instance;
    }

        public static ZeusSDK getInstance() {
        if (null == instance) {
            instance = new ZeusSDK();
        }

        return instance;
    }


    只安装了hms core 没安装应用市场：

    跳转到华为的网页版登录华为账号之后，跳转回来就报这个错误，然后页面一直处于loading
    ZeusSDK:====== pay callback ======resultCode:-1|msg:{"message":"jump huawei login fail,return code:60054,message:current country not supported"}|result:1694573322565

    之后再点击支付报这个错误：
    MCHuaweiPayActivity:purchase fail:huawei iap api fail,purchase,status code:60004,status message:too frequent calls,error message:too frequent calls



    如果是手机安装过应用市场，即使再卸载掉，也能够正常唤起换位支付进行支付


    ZeusSDK:====== pay callback ======resultCode:-1|msg:{"message":"huawei iap api fail,huawei consume fail,status code:60005,status message:network error,error message:network error"}|result:1694585773513

    2023-09-13 14:18:06.444 16273-16273 SDK2.0                  com.topjoy.zeusdemo.huawei           I  ZeusSDK:====== pay callback ======resultCode:-1|msg:{"message":"{\"code\":4,\"msg\":\"Unable to resolve host \\\"zeus.youle.game\\\": No address associated with hostname\",\"net_name\":\"huawei-verify\"}"}|result:1694585869513


    task.addOnSuccessListener(new OnSuccessListener<IsEnvReadyResult>() {}).addOnFailureListener(new OnFailureListener() {} )


    MCZeusService.googleExchange(MCPayModel.Instance().order().getPayNotifyUrl(), cpHandler);
        private final Handler cpHandler = new Handler() {

        @Override
        public void handleMessage(Message msg) {
            super.handleMessage(msg);
            MCFlagControl.flag = true;
            switch (msg.what) {
                case MCConstant.GET_GOOGLEPAY_KEY_SUCCESS:
                    Context context = MCApiFactoryControl.getInstance().getContext();
                    MCPayGooglePayBean entity = (MCPayGooglePayBean) msg.obj;
                    Intent intent = new Intent(context, MCGooglePayActivity.class);
                    intent.putExtra("google_public_key", entity.getGoogleKey());
                    intent.putExtra("out_trade_no", entity.getOrderId());
                    context.startActivity(intent);
                    break;
                case MCConstant.GET_GOOGLEPAY_KEY_FAIL:
                    String message = msg.obj.toString();
                    MCLogUtil.w(TAG, message);
                    sendPayResult(MCPayResult.PAY_RESULT_FAIL, message);
                    MCPayModel.Instance().order().setOldPurchaseID(null);
                    break;
                default:
                    break;
            }
        }
    };
    googleExchange()方法中的参数cpHandler的声明逻辑是下面这些，这样的写法是cpHandler作为一个异步回调作为参数是吗？那这个异步回调是做了哪些事情呢？


    消息发送，会触发参数的handler，即上层的cphandler的处理逻辑



    回调的层级包含关系：
     <- MCCommonCallback(ZeusSDK) <-  (MCApiFactoryControl) <- MCCallbackBean(MCPayModel) <- Handler cpHandler(MCChoosePayModel) <-
    Callback(MCZeusService) <- HandleCallback (MCZeusService.handleResult)


    华为包不支持：
    谷歌登录绑定
    line登录绑定
    微信登录支付

    支持facebook登录绑定

The minCompileSdk (33) specified in a
dependency's AAR metadata (META-INF/com/android/build/gradle/aar-metadata.properties)
is greater than this module's compileSdkVersion (android-31).
Dependency: androidx.privacysandbox.ads:ads-adservices-java:1.0.0-beta05.
AAR metadata file: /Users/topjoy/.gradle/caches/transforms-2/files-2.1/7b65c0d6d7270bfc7c72c6d517840849/jetified-ads-adservices-java-1.0.0-beta05/META-INF/com/android/build/gradle/aar-metadata.properties.

MCCallbackBean.getInstance().getLogCallback().onLogResult("网络请求日志", url, resp);

     private static void handleResult(String resp, String url, HandleCallback callback){
        int status;
        try {
            JSONObject json = new JSONObject(resp);
            status = json.getInt("error_no");
            if (status == 0) {
                callback.success(json);
                MCCallbackBean.getInstance().getLogCallback().onLogResult("网络请求日志", url, resp);
            } else {
                //Tip: zeus service error
                json.put("code", Common.ZEUS_SERVICE_FAIL.code)
                                .put("net_name", NetUtil.splitUrl(url));
                callback.fail(status, json);
            }
        } catch (JSONException e) {
            //Tip: json parsing failed
            try {
                callback.fail(-1, Common.ZEUS_SDK_FAIL.jsonWithMsg(e.getMessage()).put("net_name", splitUrl(url)));
                e.printStackTrace();
            } catch (JSONException ex) {
                e.printStackTrace();
            }
        }
    }

        public MCTextLogCallback getLogCallback() {
        if (logCallback == null) {
            logCallback = new MCTextLogCallback() {
                @Override
                public void onLogResult(String title, String url, String body) {

                }
            };
        }
        return logCallback;
    }

这里如果满足了 status==0 的条件，callback.success(json)会去执行哪里的逻辑，MCCallbackBean.getInstance().getLogCallback().onLogResult("网络请求日志", url, resp)会去执行哪里的逻辑？

"gRmkkWsIUAGTfaghVeAMYA4I07MBxauGNzTPc5TgWIh9P5+N+SRsJQsZ3Ucwb+aPqGNKEpr4AIQI5heBDuqbUZua+kF7inCjxJCiqclrcTdE9D+HbnuX1KhCDw4++DfjwSoiXDNTeMu29e6Z0zFWA6lY2PbyS+ySlXHgB7L1G2XwUO0gTb4OxPk+ijGnP4AYpglRdD8cDGPwPG3qKJWprdPKB+PVUdgpUxh5T6gF+x1b7EefPh\/i80OXWUioRgUa+YMDHh2Bii7vLuq8pLkdnD7eVnMZ4tdFSaA1BiDNCzN0zDogUE4pxZaQFuJ2reV5HAo8dWHTkE6qmn85xpByotZlZuFU13DTWcQMOawIsX2hJHPBJUKBa7WEDcsTpnzJBs7KvGG7m3ar\/Tg4HOxoVsjznrKjnfHFN3XQU1CwgLftVXmFMgac3iYGDVdeBT0UuurfsG3DUIH1\/DKXqkd5uWF1ys8Zr9zWtEP7cCuY6dZlnSRjOkK5ikSv5yoAn3AE"
使用 python 的 base64.b64encode 编码之后，为什么 7m3ar 之后的\会变成\\

            "dataSignature": "gRmkkWsIUAGTfaghVeAMYA4I07MBxauGNzTPc5TgWIh9P5+N+SRsJQsZ3Ucwb+aPqGNKEpr4AIQI5heBDuqbUZua+kF7inCjxJCiqclrcTdE9D+HbnuX1KhCDw4++DfjwSoiXDNTeMu29e6Z0zFWA6lY2PbyS+ySlXHgB7L1G2XwUO0gTb4OxPk+ijGnP4AYpglRdD8cDGPwPG3qKJWprdPKB+PVUdgpUxh5T6gF+x1b7EefPh\/i80OXWUioRgUa+YMDHh2Bii7vLuq8pLkdnD7eVnMZ4tdFSaA1BiDNCzN0zDogUE4pxZaQFuJ2reV5HAo8dWHTkE6qmn85xpByotZlZuFU13DTWcQMOawIsX2hJHPBJUKBa7WEDcsTpnzJBs7KvGG7m3ar\/Tg4HOxoVsjznrKjnfHFN3XQU1CwgLftVXmFMgac3iYGDVdeBT0UuurfsG3DUIH1\/DKXqkd5uWF1ys8Zr9zWtEP7cCuY6dZlnSRjOkK5ikSv5yoAn3AE",

2023-09-18 14:28:44.986 15591-15591 SDK2.0 com.topjoy.sdk_demo I ZeusSDK:====== pay callback ======resultCode:-3|msg:{"orderId":"a_20230918142613_rD9hPU","packageName":"com.topjoy.sdk_demo","productId":"com.topjoy.sdk_demo.pay100","purchaseTime":1695018390870,"purchaseState":0,"purchaseToken":"oobjbfmekigaleipkfelhhei.AO-J1OxKxNsV0WEkzZqG7ydCUMWK8gosHeWn2UJW7oexamiDDU1-0h_tewK29SLtCVZIF51hyjJ4mgANFPJ326Ks3tYC48MGQg","obfuscatedAccountId":"a_20230918142613_rD9hPU","quantity":1,"acknowledged":false,"publicKey":"MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAkWF+w1IrAoID9sndOKVRSd9O+b4DgdHktExKh3FNBGttH\/gOwNKNXkjHQhCiApIkqTlgHv4eiQMZiVals2fa3lBZWL6QCMtqKAv+Xvtajy1mJGw0kctBEO36qXj+QgENjtSWxBA+Vkv4TfBwMHPlepHKgYQnoabfs7KW7i1p6StIeu0TsL\/wzIBlKPWS+pI48cW+z21HJ2xdQCf+2mwoE+RPUc89G37HHtosO3gb3uuDaRu8wbpygS7EClUV3ocJ22C6B1sC\/SIuiFdz5RaJloCR9NLwVrhXKRD7ef718TFT9V6VO8Y1\/BmRvUU97dOj00QRaXnKTvopUx7fcRiDYwIDAQAB"}|result:1695018523764

1. 调整连续点击时间间隔为 500ms（我测试）
2. Google 支付 verify 调整为判断后端 error_no 参数（我测试）
3. fix：添加获取商品详情回调（开发自测）
4. iOS 日志上报（开发自测）
5. 更新 demo 配置文件（我测试）
6. iOS 打点更新（开发自测）
7. 添加华为支付（我测试）
8. fix：修复 LINE 登录跳转到网页之后返回 loading 无法取消的问题（这个等下测试一下）
9. SDK 适配 Android33（这个应该只升级了 demo 的）

1,2,7 我测试

整理待发布内容：

1. 删除 v2 支付接口
2. 更新 iOS 证书
3. 用户中心代码重构（统一使用 sdk 接口）
4. 关闭 applovin debug 界面
5. 更新 LINE SDK（cocopods 集成）
6. http 请求头添加 traceID
7. 更新更多接口的打点
8. 在 MCZeusServer 中重写 paylimit and remaining time 网络请求

9. 重新开始移除成功后跳转切换账号界面的操作
10. unity 绑定三方失败后出现绑定成功的回调
11. getbindlist 两次失败回调

a_20230918184328_e5lFu3

scp testnotify.py jenkins@172.16.170.71:/Users/jenkins/testnotify

nohup python3 testnotify.py &

<https://orcaterm.cloud.tencent.com/terminal?instanceId=lhins-23efs8ph&region=na-siliconvalley&host=43.135.150.180&platformType=LINUX_UNIX&loginMode=tat&from=lh_console_login_btn&loginType=1> root/Xn199231800 这是 root 权限账号 你试试

<http://43.135.150.180/7777>

    dependencies {
        classpath 'com.android.tools.build:gradle:4.2.2'
        classpath 'com.google.gms:google-services:4.3.10'
        classpath 'com.google.firebase:firebase-crashlytics-gradle:2.9.1'
        classpath 'io.sentry:sentry-android-gradle-plugin:1.7.36'
        classpath 'org.jetbrains.kotlin:kotlin-gradle-plugin:1.7.1
        0'
    }


    sudo tar -xvf jdk-11.0.19_macos-x64_bin.tar.gz -C /Library/Java/JavaVirtualMachines/

        11.0.20 (x86_64) "Eclipse Adoptium" - "OpenJDK 11.0.20" /Users/topjoy/Library/Java/JavaVirtualMachines/temurin-11.0.20/Contents/Home


        /Users/topjoy/Library/Android/sdk

export ANDROID_HOME=/Users/topjoy/Library/Android/sdk
export ANDROID_SDK_ROOT=/Users/topjoy/Library/Android/sdk

192.168.219.56

    if findByXPath(ids.x_qq_user) is not None:
        findByXPath(ids.x_qq_user).click()
    findClick(ids.id_qq_ok)
    if findByXPath(ids.x_zeus_select_user):
        findByXPath(ids.x_zeus_select_user).click()


    if findByXPath(ids.x_zeus_select_user):
        findByXPath(ids.x_zeus_select_user).click()

test_ali_pay [支付宝支付]订单创建，正常请求 ：
test_ali_verify_not_pay_order [支付宝支付]未支付订单确认:支付关闭，admin 开关被关闭了
test_bind_twitter [用户管理]--绑定第三方账号 ：账号绑定上限了，但是为什么会上限呢？
test_get_bind_list [用户管理]--获取用户已经绑定的第三方账号信息 :因为该用户没有已经绑定的账号导致断言错误
test_bind_with_invalid_type [用户管理]--绑定第三方账号, 不存在的 type ：断言设置有问题，需要调整一下
test_bind_multi_account [用户管理]--绑定第三方账号, 绑定多个账号：绑定上限了，但是为什么会上限呢？
test_bind_multi_account_over_max [用户管理]--绑定第三方账号, 绑定多个账号, 超过上限：因为绑定的第一个就失败了，导致断言错误
test_duplicate_bind_twitter [用户管理]--绑定第三方账号, 重复绑定报错：账号绑定上限了，但是为什么会上限呢？
test_duplicate_unbind_twitter [用户管理]--绑定第三方账号, 重复解绑报错：因为绑定的时候就没绑定上，导致解绑断言错误
test_unbind_twitter [用户管理]--解绑第三方账号 ：因为绑定的时候就没绑定上，导致解绑断言错误
test_google_exchange [google 支付]创建 Google 订单：正常请求：{'error_no': 1003, 'message': '未配置 google 加密 key'}
test_order_ios_exchange [iosV1 支付]创建支付单，正常请求：支付关闭，admin 开关被关闭了
test_order_ios_exchange [iosV2 支付]创建支付单，正常请求:支付关闭，admin 开关被关闭了
test_order_ios_verify [iosV2 支付确认]已成功订单重复确认: 502 Bad Gateway

test_ios_subscription_exchange [ios 订阅]创建订单，正常请求 : ：支付关闭，admin 开关被关闭了
test_get_bind_list [用户管理]--使用绑定过的第三方账号登录:应该是第一次绑定就没绑定成功导致的
test_get_bind_list [用户管理]--获取用户已经绑定的第三方账号信息, 绑定多个账号：
test_wechat_pay [微信支付]订单创建，正常请求：支付关闭，admin 开关被关闭了
test_get_bind_list [用户管理]--获取用户已经绑定的第三方账号信息, 绑定多个账号
{'error_no': 0, 'message': '成功', 'result': {'id': '2444901', 'account': '556039189', 'token': 'VdzCwytYDkwZrmzrNyDwJrpeAtXHoAxe', 'login_time': '2023-09-20 14:52:27'}}

    TODO: 添加邮箱登录的类型
    def test_third_login_email(self):
        """[用户管理]--直接使用第三方登录, email登录"""
        path = "/v2/user/third-login"
        body = {
            "device": "676ecfc91d44fec1",
            "lang": "1",
            "mobile_info": json.dumps(generate_mobile_info()),
            "platform": "android",
            "sdk_version": "2.8.0",
            "secret_token": "",
            "token": "97STQHY4HIYI223N",
            "type": "10",
            "union_id": "jiaheqi@gmail.com"
        }
        response = sdk_http_client.post(path, body)
        self.assertEqual(response.json().get("error_no"), 0)
        self.assertIsNotNone(response.json().get('result').get('id'))
        self.assertIsNotNone(response.json().get('result').get('account'))
        self.assertIsNotNone(response.json().get('result').get('token'))
        self.assertIsNotNone(response.json().get('result').get('login_time'))

package:mine

{
"appid": "7AVS2D5QH2TV",
"dataSignature": "d8oifRUH9QRvXYxs45G\/Ut7qgekTQuD0qC0PK+\/J25mMEOgzjecXKHRcxYHYLgzpML6KxMz5hUjBDkzLBZDL9QkLZw0TKBLNDzTxkUybJenJim8o7Q+NZERH0NtknCWakOMwoG0yLV9r3VOmw7HImwB94Cz0nEaO7SR2P0ZxO7s0UcxbJPS+dhe2WrBTOf0TlWkBdwO8bMESyHvQwXo+x6mO+Ge8TVBFi79QoFZ9hZkq8N0lTtw0+L\/10UiPxoH3e2fMnkvP4niBhv0nzs+opcW\/D5+XFwMZygw5PprLftPy88np6AkIsiHtMsApidaUF+bQPPsbaLU2god7o7lWR\/5Dk2p3D5o3bOl8IQjNhEhOcI1tLgfKGuCFHr8tP7sDkNQbD3YGg1agSIs4r6X\/NLzKxrcQbIGrlHMBieMN7tmslxt7WLklw7lshEEqkHH4skz3VKkjOtnNiQ0iYJqRDIPQdURaPLgkOKNQMgYwNauuwucbLTDBmVriLTxi\/cHD",
"developerPayload": "hw_20230920191808_toEPTN",
"lang": "1",
"packageName": "com.topjoy.zeusdemo.huawei",
"pay_amount": "100",
"pay_currency": "CNY",
"platform": "android",
"productId": "zeusdemo.huawei.product01",
"purchaseToken": "0000018ab2500c26df9c7364d78e2db578519f82ba7660c8233ff3bcc9e6743ba27255a50b7c04dax434e.1.109083613",
"purchase_data": "{\"autoRenewing\":false,\"orderId\":\"2023092019180984629493eac1.109083613\",\"packageName\":\"com.topjoy.zeusdemo.huawei\",\"applicationId\":109083613,\"applicationIdString\":\"109083613\",\"kind\":0,\"productId\":\"zeusdemo.huawei.product01\",\"productName\":\"元宝 1\",\"purchaseTime\":1695208704000,\"purchaseTimeMillis\":1695208704000,\"purchaseState\":0,\"developerPayload\":\"hw_20230920191808_toEPTN\",\"purchaseToken\":\"0000018ab2500c26df9c7364d78e2db578519f82ba7660c8233ff3bcc9e6743ba27255a50b7c04dax434e.1.109083613\",\"consumptionState\":0,\"confirmed\":0,\"purchaseType\":0,\"currency\":\"CNY\",\"price\":100,\"country\":\"CN\",\"payOrderId\":\"sandboxPe160d8654896636f95968e5d0abed13\",\"payType\":\"71\",\"sdkChannel\":\"1\"}",
"sdk_version": "2.5.3",
"sign": "4ebe041e52d2f76d1f5d37016334a3f3"
}
2023-09-20 19:19:52.049 3450-3450 SDK2.0 com.topjoy.zeusdemo.huawei E MCHuaweiPayActivity:purchase fail:huawei pay fail,this product need to consume,returnCode:60051

{"error_no":1004,"message":"Error 1406: Data too long for column 'pay_id' at row 1"}

CREATE TABLE `account` (
`id` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT '主键自增',
`union_id` varchar(32) NOT NULL COMMENT '用户身份唯一标识',
`user_name` varchar(20) DEFAULT NULL COMMENT '用户名',
`email` varchar(32) DEFAULT NULL COMMENT '邮箱',
`phone` varchar(16) DEFAULT NULL COMMENT '手机号码',
`password` varchar(128) DEFAULT NULL,
`token` varchar(32) DEFAULT NULL COMMENT '登陆时生成的 token,用于 CP 服务端登陆验证',
`register_ip` varchar(32) DEFAULT NULL COMMENT '注册 ip',
`last_login_ip` varchar(32) DEFAULT NULL COMMENT '最近一次登陆 ip',
`register_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '注册时间',
`last_login_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最近一次登陆时间',
PRIMARY KEY (`id`),
UNIQUE KEY `union_id` (`union_id`),
UNIQUE KEY `email` (`email`),
UNIQUE KEY `phone` (`phone`),
KEY `register_time` (`register_time`),
KEY `last_login_time` (`last_login_time`)
) ENGINE=InnoDB AUTO_INCREMENT=10109 DEFAULT CHARSET=utf8mb4 COMMENT='账号信息表';

<http://43.135.150.180:8889/login/>  
 root/Xn199231800

def logout(request):
re = redirect('/login/')
re.delete_cookie('ticket')
return re

def logout_view(request):
re = redirect('/login/')
logout(request) # re.delete_cookie('ticket')
return re

1. loginview 跳转到短信和邮箱登录，取消之后应该到主界面而不是 loginview 界面
2. 短信登录，验证码输入框输入之后，等待一会，应用闪退
3. 短信区号下拉菜单的样式调整 bug 还没改
4. 短信验证码的 60s 倒计时，时间不会刷新，一直显示的 46s，短信验证码无法发送（已修复）
5. 找回密码，未注册的时候，弹出未注册 toast 提示，不要跳转到输入验证码的 dialog
6. 邮箱绑定，注册成功后，验证码输入框未关闭，提示“邮箱已注册，请返回登录”
7. 邮箱注册界面的用户协议没有展示

系统返回按钮，应该返回上一级还是返回主界面？

邀请大家体验一下安卓账号体系的 beta 版本，一起帮忙发现挖掘一下潜在的 bug 和易用性问题

我是这样写的，但是会报：AttributeError: 'TestAntispam' object has no attribute 'wrapper'
def retry(max_retries=3, delay_seconds=5):
"""
装饰器函数，用于在失败时重试函数调用。

    Args:
        max_retries (int): 最大重试次数。
        delay_seconds (int): 重试之间的延迟秒数。
    """

    def decorator(func):
        def wrapper(*args, **kwargs):
            retries = 0
            while retries < max_retries:
                try:
                    result = func(*args, **kwargs)
                    return result  # 如果成功，立即返回结果
                except Exception as e:
                    print(f"重试 {retries + 1}/{max_retries}: {e}")
                    time.sleep(delay_seconds)
                    retries += 1
            raise Exception(f"最大重试次数 ({max_retries}) exceeded")

        return wrapper

    return decorator

class TestAntispam(TestCase):
@retry(max_retries=3, delay_seconds=5)
def test_antispam_check(self):
"""[内容安全]--服务端屏蔽字检查, 内容通过"""
path = "/antispam/text-check"
body = {
"data_id": generate_device_id(),
"data": "text",
}

        response = sdk_http_client.post(path, body)
        self.assertEqual(response.json().get("error_no"), 0)
        self.assertEqual(response.json().get("result").get("check_ret"), 0)
        self.assertEqual(response.json().get("result").get("punish_type"), 0)
        self.assertEqual(response.json().get("result").get("result"), "text")

167106352822505
1f032774ad9a72a319f46e5272fd16e9
6353c2caf3fcdbb210e13844a7e62aab

静默登录 pass

facebook 登录 pass
twitter 登录 pass
line 登录 pass
appleid 登录 pass

用户中心登录
facebook 登录 pass
twitter 登录 pass
line 登录 pass
appleid 登录 pass

loginview 登录
facebook 登录 pass
twitter 登录 pass
line 登录 pass
appleid 登录 pass

添加重试的几种方式：

1. nosetests 的重试命令启动：
   保存失败用例到文件：nosetests --with-id --failed-tests=./failed_tests.txt
   执行失败用例的文件：nosetests --failed=./failed_tests.txt
2. run 方法中添加对于失败用例的重试逻辑
3. client 的 post 方法添加 retry 装饰

clickFacebookGetUserInfo

NSLog(@"%@",result);

账号体系发行反馈：
注册和找回密码页面的“请输入 4-20 位登录密码”修改为“请设置 4-20 位登录密码” pass
邮箱绑定的界面的“登录”按钮改为“绑定” pass
隐私协议和用户协议接口控制是否默认勾选 pass
loginview 短信登录按钮 icon 换为手机的图标 pass
Twitter 小鸟 icon 改为 X pass
后台增加解绑三方账号功能（所有三方渠道）

蝲蛄吟唱的地方（电影《沼泽深处的女孩》原著）
迪莉娅·欧文斯

罗德尼 柏树湾附近钓鱼 🎣

facebook 登录
twitter 登录
line 登录
appleid 登录

用户中心登录
facebook 登录
twitter 登录
line 登录
appleid 登录

loginview 登录
facebook 登录
twitter 登录
line 登录
appleid 登录

<https://profile.line-scdn.net/OhlZVXy6lzM3V7ISAAw_RNCgtxMB9YUGpnABIsEk4nZUQUEnEmVOEsGOskakNDQ3B3UUZ-REhzbkd3MkQTZXfPQXwRbkRHEHYnXkR5kw>

twitter 登录报错：
\*\*\* Terminating app due to uncaught exception 'TWTRInvalidInitializationException', reason: 'Attempt made to Log in or Like a Tweet without a valid Twitter Kit URL Scheme set up in the app settings. Please see <https://dev.twitter.com/twitterkit/ios/installation> for more info.'

重置密码成功之后跳转到邮箱绑定的 dialog

nosetests /tests/test_huawei_pay.py --with-flaky --force-flaky --max-runs=3

/Users/topjoy/PycharmProjects/chaos/tests/test_huawei_pay.py

nosetests -v tests/test_huawei_pay.py --with-flaky.3
nosetests

nosetests

nosetests -v tests/test_huawei_pay.py --force-flaky --max-runs=3 --min-passes=2

我想把这个装饰器放在 post 方法上，用于实现 post 请求返回 504 或者 502 的时候实现重试，应该怎么调整：
def retry(max_retries=3, delay_seconds=5):
"""
装饰器函数，用于在失败时重试函数调用。
Args:
max_retries (int): 最大重试次数。
delay_seconds (int): 重试之间的延迟秒数。
"""
def decorator(func):
def wrapper(*args, \*\*kwargs):
retries = 0
while retries < max_retries:
try:
result = func(*args, \*\*kwargs)
return result # 如果成功，立即返回结果
except Exception as e:
print(f"重试 {retries + 1}/{max_retries}: {e}")
time.sleep(delay_seconds)
retries += 1
raise Exception(f"最大重试次数 ({max_retries}) exceeded")
return wrapper
return decorator

<http://127.0.0.1:4523/m1/3392583-0-default/antispam/text-check>

<http://127.0.0.1:4523/m1/3392583-0-default/test>

    @retry(stop_max_attempt_number=3, wait_fixed=3000)
            if resp.status_code == 504 or resp.status_code == 502:
            print("返回状态码 504or502，进行重试")
            raise Exception("Gateway Timeout")
        else:
            return resp

《被讨厌的勇气：“自我启发之父”阿德勒的哲学课》
岸见一郎 古贺史健
125 个笔记

◆ 本书的赞誉

> > 如果说自卑是人类与世界互动的必然结果，那么勇气就是人们在追寻意义人生中的必然能力。

◆ 推荐序二 自我的枷锁和解放

> > 从精神分析创始人弗洛伊德开始，很多心理学家都相信人是过去、尤其是童年经历的产物。这些经历变成了潜意识，决定着我们的人生。

> > 重要的不是过去，而是你怎么看待过去，而我们对过去的看法，是可以改变的。

> > 人们又经常借“爱”之名，行支配和控制之实。

2023/10/09 发表想法
在毕业中，加贺也说过这样的话。

> > 我爱你，但与你无关

> > 我爱你，但与你无关

> > 我怎么爱你，这是我的课题，而你要不要接受我的爱，这是你的课题。每个人都守自己的本分，过自己的人生，人和人之间就没那么多纠结和烦恼。

> > 很多人目标远大，觉得只有当上 CEO、迎娶白富美、走上人生巅峰，人生才真的开始，现在的生活还不叫“人生”，只能算是在通往人生的路上。当我们这么想的时候，我们就把现在贬低成了实现未来的工具。

> > 当你急着奔向未来的时候，说明你已经不喜欢现在了。

◆ 推荐序三 人唯有在能够感觉自己有价值时，才有勇气

> > 人唯有在能够感觉自己有价值时，才有勇气

◆ 译者序

> > 常常为诸事烦恼的现代人不是缺乏获得幸福的能力，而是缺少获得幸福的勇气！

◆ 引言

2023/10/10 发表想法
核心观点

> > 人可以改变、世界极其简单、人人能获得幸福

> > 人可以改变、世界极其简单、人人能获得幸福

> > 幸福的浪漫主义季节转瞬即逝，残酷的现实主义时代终将到来

> > 人并不是住在客观的世界，而是住在自己营造的主观世界里。你所看到的世界不同于我所看到的世界，而且恐怕是不可能与任何人共有的世界

◆ 第一夜 我们的不幸是谁的错？

2023/10/10 发表想法
感觉全部在说自己，但是祝福别人的幸福，自己确实是衷心祝愿的

> > 青年自幼就缺乏自信，他对自己的出身、学历甚至容貌都抱有强烈的自卑感。也许是因为这样，他往往过于在意他人的目光

> > 青年自幼就缺乏自信，他对自己的出身、学历甚至容貌都抱有强烈的自卑感。也许是因为这样，他往往过于在意他人的目光

> > 如果一味地关注过去的原因，企图仅仅靠原因去解释事物，那就会陷入“决定论”

2023/10/10 发表想法
醍醐灌顶的醐已经醍起来了

> > 也就是说，你的朋友是先有了“不出去”这个目的，之后才会为了达到这个目的而制造出不安或恐惧之类的情绪。阿德勒心理学把这叫作“目的论”

> > 也就是说，你的朋友是先有了“不出去”这个目的，之后才会为了达到这个目的而制造出不安或恐惧之类的情绪。阿德勒心理学把这叫作“目的论”

2023/10/10 发表想法
“原因论”的很形象的一个具体例子

> > 假设你因感冒、发高烧而去看医生。如果医生只就引起感冒的原因告诉你说“你之所以会感冒是因为昨天出门的时候穿得太薄”，你对这样的话会满意吗？

> > 假设你因感冒、发高烧而去看医生。如果医生只就引起感冒的原因告诉你说“你之所以会感冒是因为昨天出门的时候穿得太薄”，你对这样的话会满意吗？

> > 决定我们自身的不是过去的经历，而是我们自己赋予经历的意义。

> > 如果闭门不出一直憋在自己房间里的话，父母会非常担心。这就可以把父母的关注集于一身，而且还可以得到父母小心翼翼的照顾。
> > 另一方面，哪怕踏出家门一步，都会沦为无人关注的“大多数”，都会成为茫茫人海中非常平凡的一员，甚至成为逊色于人的平庸之辈；而且，没人会重视自己。这些都是闭居者常有的心理。

> > 您是说愤怒是达成目的的一种手段？

> > 无论过去发生了什么样的事情，现在的状态取决于你赋予既有事件的意义。

> > 您是说问题不在于“发生了什么”，而在于“如何诠释”？

2023/10/11 发表想法
人生就像一本答案之书，每个问题都是在我们真正的经历和沉淀之后得出的答案。

> > 为什么那么急于得到答案呢？答案不应该是从别人那里得到，而应该是自己亲自找出来。从别人那里得到的答案只不过是对症疗法而已，没有什么价值

> > 为什么那么急于得到答案呢？答案不应该是从别人那里得到，而应该是自己亲自找出来。从别人那里得到的答案只不过是对症疗法而已，没有什么价值

> > 我还要再次引用阿德勒的话。他这么说：“重要的不是被给予了什么，而是如何去利用被给予的东西

> > 比如现在你感觉不到幸福。有时还会觉得活得很痛苦，甚至想要变成别人。但是，现在的你之所以不幸正是因为你自己亲手选择了“不幸”，而不是因为生来就不幸

> > 某人如何看“世界”，又如何看“自己”，把这些“赋予意义的方式”汇集起来的概念就可以理解为生活方式。从狭义上来讲可以理解为性格；从广义上来说，这个词甚至包含了某人的世界观或人生观

> > 我们假设有一个人正在为“我的性格是悲观的”而苦恼，我们可以试着把他的话换成“我具有悲观的‘世界观’”。我认为问题不在于自己的性格，而在于自己所持有的世界观。性格一词或许会带有“不可改变”这一感觉，但如果是世界观的话，那就有改变的可能性

> > 尽管有些不方便、不自由，但你还是感觉现在的生活方式更好，大概是觉得一直这样不做改变比较轻松吧。如果一直保持“现在的我”，那么如何应对眼前的事情以及其结果会怎样等问题都可以根据经验进行推测，可谓是轻车熟路般的状态。即使遇到点状况也能够想办法对付过去。另一方面，如果选择新的生活方式，那就既不知道新的自己会遇到什么问题，也不知道应该如何应对眼前的事情。未来难以预测，生活就会充满不安，也可能有更加痛苦、更加不幸的生活在等着自己。也就是说，即使人们有各种不满，但还是认为保持现状更加轻松、更能安心

> > 例如，你刚才说“如果可以变成 Y 那样的人就能够幸福”。但像这样活在“如果怎样怎样”之类的假设之中，就根本无法改变。因为“如果可以变成 Y 那样的人”正是你为自己不做改变找的借口

> > 阿德勒的目的论是说：“无论之前的人生发生过什么，都对今后的人生如何度过没有影响。”决定自己人生的是活在“此时此刻”的你自己

◆ 第二夜 一切烦恼都来自人际关系

> > 你认为对她来说最害怕的事情、最想逃避的事情是什么呢？当然是被自己喜欢的男孩拒绝了，是失恋可能带来的打击和自我否定。因为青春期的失恋在这方面的特征非常明显。但是，只要有脸红恐惧症存在，她就可以用“我之所以不能和他交往都是因为这个脸红恐惧症”这样的想法来进行自我逃避，如此便可以不必鼓起告白的勇气或者即使被拒绝也可以说服自己；而且，最终也可以抱着“如果治好了脸红恐惧症我也可以……”之类的想法活在幻想之中

2023/10/11 发表想法
又被醍醐灌了一次顶。

> > 就像有脸红恐惧症的她害怕被男性拒绝一样，你也很害怕被他人否定。害怕被别人轻视或拒绝、害怕心灵受伤。你认为与其陷入那种窘境倒还不如一开始就不与任何人有关联。也就是说，你的“目的”是“避免在与他人的关系中受伤

> > 就像有脸红恐惧症的她害怕被男性拒绝一样，你也很害怕被他人否定。害怕被别人轻视或拒绝、害怕心灵受伤。你认为与其陷入那种窘境倒还不如一开始就不与任何人有关联。也就是说，你的“目的”是“避免在与他人的关系中受伤

> > 之所以感觉孤独并不是因为只有你自己一个人，感觉自己被周围的他人、社会和共同体所疏远才会孤独。我们要想体会孤独也需要有他人的存在。也就是说，人只有在社会关系中才会成为“个人”

> > 如果真的成为一个人，也就是只有一个人活在宇宙中的话，那就既不是“个人”，也感觉不到孤独了

> > 只要在某个地方存在着那个某人，孤独就会袭来

> > 我再重复一遍：“人的烦恼皆源于人际关系。”这是阿德勒心理学的一个基本概念。如果这个世界没有人际关系，如果这个宇宙中没有他人只有自己，那么一切烦恼也都将消失

> > 仅止于个人的烦恼，即所谓的“内部烦恼”根本不存在。任何烦恼中都会有他人的因素

> > 高大强壮的男性本身就会给人一种震慑感；而另一方面，矮小的我却能让对方放下警惕心理。看来个子矮小无论是对周围人来说还是对自己来说，都有好处呢！这就是价值的转换

> > 我对自己身高的感觉终究还是在与他人的比较——也就是人际关系——中产生的一种主观上的“自卑感”

> > 困扰我们的自卑感不是“客观性的事实”而是“主观性的解释”

> > 价值必须建立在社会意义之上

> > 我们都有想要摆脱无力状态、追求进步的普遍欲求。人类史上的科学进步也是“追求优越性”的结果。

> > 对于无法达成理想的自己就会产生一种自卑感。

2023/10/11 发表想法
自卑感和自卑情结的差异性

> > 自卑感本身并不是坏事。这一点你能够理解吧？就像阿德勒说过的那样，自卑感也可以成为促成努力和进步的契机。例如，虽然对学历抱有自卑感，但若是正因为如此，才下定“我学历低所以更要付出加倍的努力”之类的决心，那反而成了好事。

> > 自卑感本身并不是坏事。这一点你能够理解吧？就像阿德勒说过的那样，自卑感也可以成为促成努力和进步的契机。例如，虽然对学历抱有自卑感，但若是正因为如此，才下定“我学历低所以更要付出加倍的努力”之类的决心，那反而成了好事。

> > 而另一方面，自卑情结是指把自己的自卑感当作某种借口使用的状态。具体就像“我因为学历低所以无法成功”或者“我因为长得不漂亮所以结不了婚”之类的想法。像这样在日常生活中大肆宣扬“因为有 A 所以才做不到 B”这样的理论，这已经超出了自卑感的范畴，它是一种自卑情结。

> > 简单地说就是害怕向前迈进或者是不想真正地努力。不愿意为了改变自我而牺牲目前所享受的乐趣——比如玩乐或休闲时间。也就是拿不出改变生活方式的“勇气”，即使有些不满或者不自由，也还是更愿意维持现状。

> > 表现得好像自己很优秀，继而沉浸在一种虚假的优越感之中。
> > 青年：虚假的优越感？
> > 哲人：一个很常见的例子就是“权势张扬”。

> > 特意自吹自擂的人其实是对自己没有自信。阿德勒明确指出“如果有人骄傲自大，那一定是因为他有自卑感”。

> > 最后再举一个关于自夸的复杂实例。这是一种通过把自卑感尖锐化来实现异常优越感的模式。具体就是指夸耀不幸。

> > 也就是暴露出自己的自卑感以当作武器来使用吗？

> > 阿德勒甚至指出：“在我们的文化中，弱势其实非常强大而且具有特权。”

> > 婴儿因为弱势所以不受任何人的支配。

> > 但是，只要把自己的不幸当作保持“特别”的武器来用，那人就会永远需要不幸。

> > 所谓“追求优越性”是指自己不断朝前迈进，而不是比别人高出一等的意思。

> > 您是说人生不是竞争？
> > 哲人：是的。不与任何人竞争，只要自己不断前进即可。当然，也没有必要把自己和别人相比较。

> > 健全的自卑感不是来自与别人的比较，而是来自与“理想的自己”的比较。

> > 竞争的可怕之处就在于此。即便不是败者、即便一直立于不败之地，处于竞争之中的人也会一刻不得安心、不想成为败者。而为了不成为败者就必须一直获胜、不能相信他人。之所以有很多人虽然取得了社会性的成功，但却感觉不到幸福，就是因为他们活在竞争之中。因为他们眼中的世界是敌人遍布的危险所在

> > 自己就像是从未真正沐浴过阳光的丝瓜，自然就会因为自卑感而扭曲

> > “无法真心祝福过得幸福的他人”，那就是因为站在竞争的角度来考虑人际关系，把他人的幸福看作“我的失败”，所以才无法给予祝福。

> > 因私愤而流露的发怒只不过是为了让别人屈服的一种工具而已

> > 遭受过父母虐待的孩子有些会误入歧途、逃学，甚至会出现割腕等自残行为。如果按照弗洛伊德的原因论，肯定会从简单的因果律角度归结为：“因为父母用这样的方法教育，所以孩子才变成这样。”就像因为不给植物浇水，所以它们才会干枯一样。这的确是简单易懂的解释。但是，阿德勒式的目的论不会忽视孩子隐藏的目的——也就是“报复父母”。如果自己出现不良行为、逃学，甚至是割腕，那么父母就会烦恼不已，父母还会惊慌失措、痛不欲生。孩子正是因为知道这一点，所以才会出现问题行为。孩子并不是受过去原因（家庭环境）的影响，而是为了达到现在的目的（报复父母）

2023/10/12 发表想法
尤其是男女关系的处理中，男生只要任何时候承认错误就对了，无论自己本身有没有错。

> > 承认错误，不代表你失败了

> > 承认错误，不代表你失败了

> > 首先希望你能够理解这样一个事实，那就是发怒是交流的一种形态，而且不使用发怒这种方式也可以交流。我们即使不使用怒气，也可以进行沟通以及取得别人的认同。如果能够从经验中明白这一点，那自然就不会再有怒气产生了。青年：但是，即使对方明显找碴儿挑衅，恶意说一些侮辱性的语言，也不能发怒吗？哲人：你似乎还没有真正理解。不是不能发怒，而是“没必要依赖发怒这一工具”。易怒的人并不是性情急躁，而是不了解发怒以外的有效交流工具。所以才会说“不由得发火”之类的话。这其实是在借助发怒来进行交流

> > 关于权力之争，还有一点需要注意。那就是无论认为自己多么正确，也不要以此为理由去责难对方。这是很多人都容易陷落进去的人际关系圈套

2023/10/12 发表想法
有时候很多事并没有真正的孰是孰非，可能对于同一个东西站在了不同的维度和角度，所以在事件的讨论中我们要忽略“我是正确的”这种权力之争的观念。

> > 我是正确的，也就是说对方是错误的。一旦这样想，辩论的焦点便会从“主张的正确性”变成了“人际关系的方式”。也就是说，“我是正确的”这种坚信意味着坚持“对方是错误的”，最终就会演变成“所以我必须获胜”之类的胜负之争。这就是完完全全的权力之争吧？

> > 我是正确的，也就是说对方是错误的。一旦这样想，辩论的焦点便会从“主张的正确性”变成了“人际关系的方式”。也就是说，“我是正确的”这种坚信意味着坚持“对方是错误的”，最终就会演变成“所以我必须获胜”之类的胜负之争。这就是完完全全的权力之争吧？

> > 承认错误、赔礼道歉、退出权力之争，这些都不是“失败”。追求优越性并不是通过与他人的竞争来完成的

> > 如果过度拘泥于胜负就无法作出正确的选择

> > 当人能够感觉到“与这个人在一起可以无拘无束”的时候，才能够体会到爱。既没有自卑感也不必炫耀优越性，能够保持一种平静而自然的状态。真正的爱应该是这样的

> > 哲人：假设你讨厌 A 这个人，说是因为 A 身上有让人无法容忍的缺点。青年：是啊，如果是讨厌的人，那还真不少。哲人：但是，那并不是因为无法容忍 A 的缺点才讨厌他，而是你先有“要讨厌 A”这个目的，之后才找出了符合这个目的的缺点。青年：怎么可能？！那我这么做又是为了什么呢？哲人：为了逃避与 A 之间的人际关系

> > 阿德勒把这种企图设立种种借口来回避人生课题的情况叫作“人生谎言”

> > 阿德勒心理学不是“拥有的心理学”而是“使用的心理学”

> > “不在于被给予了什么，而在于如何去使用被给予的东西”

◆ 第三夜 让干涉你生活的人见鬼去

> > “货币是被铸造的自由。”它是陀思妥耶夫斯基的小说中出现的一句话

> > 基本上，一切人际关系矛盾都起因于对别人的课题妄加干涉或者自己的课题被别人妄加干涉。只要能够进行课题分离，人际关系就会发生巨大改变

2023/10/12 发表想法
那即使对方在你而言觉得达到不了你的要求，也需要信任吗？？？

> > 信任这一行为也需要进行课题分离。信任别人，这是你的课题。但是，如何对待你的信任，那就是对方的课题了。如果不分清界限而是把自己的希望强加给别人的话，那就变成粗暴的“干涉”了。即使对方不如自己所愿也依然能够信任和爱吗？阿德勒所说的“爱的课题”就包括这种追问

> > 信任这一行为也需要进行课题分离。信任别人，这是你的课题。但是，如何对待你的信任，那就是对方的课题了。如果不分清界限而是把自己的希望强加给别人的话，那就变成粗暴的“干涉”了。即使对方不如自己所愿也依然能够信任和爱吗？阿德勒所说的“爱的课题”就包括这种追问

> > 首先要思考一下“这是谁的课题”。然后进行课题分离——哪些是自己的课题，哪些是别人的课题，要冷静地划清界限。而且，不去干涉别人的课题也不让别人干涉自己的课题。这就是阿德勒心理学给出的具体而且有可能彻底改变人际关系烦恼的具有划时代意义的观点

> > 当地流传着这样一个传说：“解开这个绳结的人就会成为亚细亚之王。”这是一个很多技艺高超的挑战者都没有解开的绳结。那么，你认为面对那个绳结的亚历山大大帝会怎么做呢

> > 据传，当时他接着说道：“命运不是靠传说决定而要靠自己的剑开拓出来。我不需要传说的力量而要靠自己的剑去开创命运。”正如你所了解的那样，后来他成了统治自中东至西亚全域的帝王。而“格尔迪奥斯绳结”也成了一段有名的逸闻

> > 选择了不自由生活方式的大人看着自由活在当下的年轻人就会批判其“享乐主义”。当然，这其实是为了让自己接受不自由生活而捏造出的一种人生谎言。选择了真正自由的大人就不会说这样的话，相反还会鼓励年轻人要勇于争取自由

> > 如果想要行使自由，那就需要付出代价。而在人际关系中，自由的代价就是被别人讨厌

> > 即使有人不喜欢你，那也并不是你的课题。并且，“应该喜欢我”或者“我已经这么努力了还不喜欢我也太奇怪了”之类的想法也是一种干涉对方课题的回报式的思维。不畏惧被人讨厌而是勇往直前，不随波逐流而是激流勇进，这才是对人而言的自由

◆ 第四夜 要有被讨厌的勇气

> > 例如，在法国使用的世界地图上，美洲大陆位于左端，右端则是亚洲，被绘制在地图中心的是欧洲，是法国。另一方面，如果是中国使用的地图，那么中国就会被绘制在中心位置，美洲大陆在右端、欧洲在左端。也许法国人在看中国版世界地图的时候会产生一种难以名状的不协调感，认为自己被非常不当地赶到了边缘，仿佛世界被任意切割了一样。

> > 如果了解了世界之大，就会明白自己在学校中所受的苦只不过是“杯中风暴”而已。只要跳出杯子，猛烈的风暴也会变成微风。
> > 青年：您是说如果闭门不出就无法到杯子外边去？

> > 这里有需要记住的行动原则。当我们在人际关系中遇到困难或者看不到出口的时候，首先应该考虑的是“倾听更大共同体的声音”这一原则。

> > 如果是因为你的反对就能崩塌的关系，那么这种关系从一开始就没有必要缔结，由自己主动舍弃也无所谓。活在害怕关系破裂的恐惧之中，那是为他人而活的一种不自由的生活方式。

> > 人怎样才能够获得“勇气”？阿德勒的见解是：人只有在能够感觉自己有价值的时候才可以获得勇气。

> > 对于自己，不要用“行为”标准去考虑，而要首先从“存在”标准上去接纳

> > 我们在看待他人的时候，往往会先任意虚构一个“对自己来说理想的形象”，然后再像做减法一样地去评价

◆ 第五夜 认真的人生“活在当下”

> > 正因为厌恶自己，所以才只关注自己；正因为对自己没有自信，所以才会自我意识过剩

> > “自我接纳”“他者信赖”和“他者贡献”

2023/10/13 发表想法
自我肯定和自我接纳的差异性

> > 自我肯定是明明做不到但还是暗示自己说“我能行”或者“我很强”，也可以说是一种容易导致优越情结的想法，是对自己撒谎的生活方式。而另一方面，自我接纳是指假如做不到就诚实地接受这个“做不到的自己”，然后尽量朝着能够做到的方向去努力，不对自己撒谎。

> > 自我肯定是明明做不到但还是暗示自己说“我能行”或者“我很强”，也可以说是一种容易导致优越情结的想法，是对自己撒谎的生活方式。而另一方面，自我接纳是指假如做不到就诚实地接受这个“做不到的自己”，然后尽量朝着能够做到的方向去努力，不对自己撒谎。

> > 说得更明白一些就是，对得了 60 分的自己说“这次只是运气不好，真正的自己能得 100 分”，这就是自我肯定；与此相对，在诚实地接受 60 分的自己的基础上努力思考“如何才能接近 100 分”，这就是自我接纳

> > 不去关注“无法改变的”，而是去关注“可以改变的”。这就是我所说的自我接纳

2023/10/13 发表想法
尼布尔的祈祷文

> > 上帝，请赐予我平静，去接受我无法改变的；给予我勇气，去改变我能改变的；赐我智慧，分辨这两者的区别

> > 上帝，请赐予我平静，去接受我无法改变的；给予我勇气，去改变我能改变的；赐我智慧，分辨这两者的区别

> > 在相信他人的时候不附加任何条件。即使没有足以构成信用的客观依据也依然相信，不考虑抵押之类的事情，无条件地相信。这就是信赖。

> > 请你这样想。我们可以相信也可以怀疑；并且，我们的目标是把别人当作朋友。如此一来，是该选择信任还是怀疑，答案就非常明显了

> > 他者贡献并不是舍弃“我”而为他人效劳，它反而是为了能够体会到“我”的价值而采取的一种手段

2023/10/16 发表想法
闭环形成了

> > 为了方便起见，前面我一直按照自我接纳、他者信赖、他者贡献这种顺序来进行说明。但是，这三者是缺一不可的整体。正因为接受了真实的自我——也就是“自我接纳”——才能够不惧背叛地做到“他者信赖”；而且，正因为对他人给予无条件的信赖并能够视他人为自己的伙伴，才能够做到“他者贡献”；同时，正因为对他人有所贡献，才能够体会到“我对他人有用”进而接受真实的自己，做到“自我接纳”

> > 为了方便起见，前面我一直按照自我接纳、他者信赖、他者贡献这种顺序来进行说明。但是，这三者是缺一不可的整体。正因为接受了真实的自我——也就是“自我接纳”——才能够不惧背叛地做到“他者信赖”；而且，正因为对他人给予无条件的信赖并能够视他人为自己的伙伴，才能够做到“他者贡献”；同时，正因为对他人有所贡献，才能够体会到“我对他人有用”进而接受真实的自己，做到“自我接纳”

> > 犹太教教义中有这么一段话：“假如有 10 个人，其中势必会有 1 个人无论遇到什么事都会批判你。他讨厌你，你也不喜欢他。而且，10 个人中也会有 2 个人能够成为与你互相接纳一切的好朋友。剩下的 7 个人则两者都不是。”这种时候，是关注讨厌你的那个人呢？还是聚焦于非常喜欢你的那 2 个人？抑或是关注其他作为大多数的 7 个人？缺乏人生和谐的人就会只关注讨厌自己的那个人来判断“世界”

> > 例如，有些问题儿童在上课的时候通过扔橡皮或者是大声说话来妨碍上课，如此一来肯定会引起同学或老师的注意，此刻其就可以成为特别的存在。但这是“廉价的优越性追求”，是一种不健全的态度

> > “复仇”和“廉价的优越性追求”很容易联系起来。这就是在让对方烦恼的同时还想成为“特别的存在”

> > 人生是一连串的刹那

> > 用别的话说也可以理解为“把过程本身也看作结果的运动”，跳舞是如此，旅行等本身也是如此

> > 请你想象一下自己站在剧场舞台上的样子。此时，如果整个会场都开着灯，那就可以看到观众席的最里边。但是，如果强烈的聚光灯打向自己，那就连最前排也看不见。我们的人生也完全一样。正因为把模糊而微弱的光打向人生整体，所以才能够看到过去和未来；不，是感觉能够看得到。但是，如果把强烈的聚光灯对准“此时此刻”，那就会既看不到过去也看不到未来

> > 人生是连续的刹那，根本不存在过去和未来

> > 站在现实性角度的时候，人生总是处于完结状态

> > 你还有我，即使生命终结于“此时此刻”，那也并不足以称为不幸。无论是 20 岁终结的人生还是 90 岁终结的人生，全都是完结的、幸福的人生

> > 人生中最大的谎言就是不活在“此时此刻”。纠结过去、关注未来，把微弱而模糊的光打向人生整体，自认为看到了些什么。你之前就一直忽略“此时此刻”，只关注根本不存在的过去和未来。对自己的人生和无可替代的刹那撒了一个大大的谎言

> > 只要自己心中有他者贡献这颗星就一定能够有幸福相伴，有朋友相伴

> > 我们要像跳舞一样认真过好作为刹那的“此时此刻”，既不看过去也不看未来，只需要过好每一个完结的刹那。没必要与谁竞争，也不需要目的地，只要跳着，就一定会到达某一个地方

◆ 后记

> > 人只有在社会背景下才能成为个人

"order_id": "73b62231-b437-442e-81a2-7c04e3e2b265"
}

    "order_id": "835bba2b-98b9-4a7f-ab94-2048fb5ec5ea"

"result": "{\"code\":5,\"msg\":\"GooglePay onPurchasesUpdated: responseCode:7 debugMessage:Account identifiers don't match the previous subscription.\",\"payOrderInfo\":\"MCOrderInfoBean{product_id='com.topjoy.sdk8', oldPurchaseId='null', price=99, amount=3.49, currency='USD', extendInfo='1697513552776', serverId='1', serverName='区服名', roleId='123123', roleName='charlott-', roleVIP='1', roleLevel='5', isSubscription='1', payNotifyUrl='http:\\\/\\\/192.168.148.83:8000\\\/'}\",\"payResultCode\":-1,\"extendInfo\":\"1697513552776\"}",

/var/installd/Library/Caches/com.apple.mobile.installd.staging/temp.rKlQxv/extracted/Payload/ZeusSDKDemo.app : 0xe8008001 (An unknown error has occurred.)

订阅：
杀进程后初始化之后自动恢复购买，好像没有；

1.假如没有 finished 的订单，如果再次发起订阅，会不会提示已订阅；

864267

            "id_no": "522601196404090816",
            "name": "王华平",

path = "/api/v1/orders/notify" 1.订单未支付，调用是补发 2.订单已支付，未通知调用是补单

问题记录：
1./api/v1/orders/notify 对于 gameid 没有校验；
2./api/v1/orders/google_fix 对于 product_id，game_1 没有校验 3.对于各种错误的 code 没有做区别处理，都返回 1
{'code': 1, 'message': '订单未支付或者已经通知 Game Server，请登录管理后台查看订单支付状态'}
{'code': 1, 'message': '票据信息异常，未获取到订单信息'}

2000000387360815

paylimit
1.8-16 岁：
2.16-18 岁： 3.小于 8 岁：

返回值是 0
{
"accumulation_limit": 0,
"transaction_limit": 0,
"accumulation_amount": 198.01,
"remaining_amount": -198.01,
"start_time": "2023-10-01 00:00:00",
"end_time": "2023-10-31 00:00:00",
"allow": false
}
返回值是小数
{
"accumulation_limit": 2.147483648E7,
"transaction_limit": 2.147483648E7,
"accumulation_amount": 0,
"remaining_amount": 2.147483648E7,
"start_time": "2023-10-01 00:00:00",
"end_time": "2023-10-31 00:00:00",
"allow": true
}
返回值是整数

如果项目请求 paylimit 传的类型是 double 如 100.00，sdk 会认为单位是元，sdk 会乘以 100 为 10000 的 int 类型去请求后端；
如果项目请求 paylimit 传的类型是 int 如 100，sdk 会认为单位是分，sdk 直接用 100 作为 int 类型去请求后端；

安卓：
登录 pass
三方登录 pass line
绑定解绑 pass 手机 line
支付 pass
订阅 pass
用户中心 pass
实名认证 pass
twitter 和 line 头像：
账号体系：
登录：短信，邮箱 pass
注册：短信，邮箱 pass
绑定：短信，邮箱 pass
密码找回：短信，邮箱 pass

ios：
登录 pass
三方登录 twitter 失败 facebook
绑定解绑 pass
支付 pass
订阅 pass
用户中心
实名认证 pass ios 的修改没同步
google 和 line 头像：
账号体系：
登录：短信，邮箱 pass
注册：短信，邮箱 pass
绑定：短信，邮箱 pass
密码找回：短信，邮箱 pass

{"error_no":1004,"message":"Error 1366: Incorrect string value: '\\xF0\\x9F\\x8D\\x88 S...' for column 'role_name' at row 1"}

获取头像，本身没有头像的情况；
之前保存的头像，如果切换账号之后没有清除

<ck2648967@gmail.com>
name123456
line 账号
test
test1234A

game id 常量
订单存在和不存在的 setup
payway setup

“feature finish” 命令会把我们的工作整合到主 “develop” 分支中去
这里的 develop 就类似于我们的 pre-release

开发功能分支----develop-----release（prelease）---master（release）
修复分支 fix（从 master 拉取）------同步 master--更新到 prelease 和开发分支

# dao 发行演示反馈问题验证

1.手机号注册无法输入验证码（需要调整）
适配问题，模拟器确实无法输入，邮箱的验证码也无法输入 2.邮箱找回密过程中，点击确认无任何反馈
这个问题已经解决 3.收不到验证码？（黑色），联系客服红色。做出点击区域的区分（需求）
这个是个需求，需要看下我们是否调整，因为我们目前的也只是个文案，不涉及跳转 4.邮箱找回密码无效后或者手机号接受验证码失败后，关闭找回界面卡死。（需要调整）
问题现象有两个，需要我们调整：
（1）弹窗的 dialog 直接关闭后，无法弹出“开始游戏”，导致只能杀掉进程了
（2）手机系统物理键的返回后，可以看到“开始游戏”，但是点击没反应
修改后测试验证：DEVOPS-5431-fix-bug

### 邮箱相关 dialog

#### 从 loginview 入口进入

1. 邮箱登录：返回按钮返回上一级 loginview；关闭按钮关闭 dialog，回调：{"code":2,"msg":"user cancel by key_code_back","type":11,"status":0}；系统返回键：返回到 loginview 界面
   系统返回键，偶尔会直接关闭 loginview，偶尔会返回 loginview（已修复）
2. 邮箱注册：返回按钮返回上一级邮箱登录界面；关闭按钮关闭 dialog，回调：{"code":2,"msg":"user cancel by key_code_back","type":11,"status":0}；系统返回键：返回到 loginview 界面
   系统返回键，调整为返回上一级登录界面（已修复）
3. 找回密码：返回按钮返回上一级邮箱登录界面；关闭按钮关闭 dialog，回调：{"code":2,"msg":"user cancel by key_code_back","type":11,"status":0}；系统返回键：返回到 loginview 界面
   系统返回键，调整为返回上一级登录界面（已修复）

#### 不从 loginview 进入或无法从 loginview 入口进入

1. 邮箱绑定：不存在上一级，返回按钮返回主界面，回调：{"code":2,"msg":"user cancel by key_code_back","type":11,"status":1}；关闭按钮关闭 dialog，回调：{"code":2,"msg":"user cancel by key_code_back","type":11,"status":1}；系统返回键：关闭 dialog，回调：{"code":2,"msg":"user cancel by key_code_back","type":11,"status":1}
   返回按钮添加返回回调：回调：{"code":2,"msg":"user cancel by key_code_back"}（已修复）
2. 邮箱绑定验证码校验：返回按钮返回上一级邮箱登录界面；关闭按钮关闭 dialog，回调：{"code":2,"msg":"user cancel by key_code_back","type":11,"status":1}；系统返回键：返回到邮箱绑定界面
3. 邮箱登录：返回按钮返回主界面；关闭按钮关闭 dialog；系统返回键：返回主界面。都有回调：{"code":2,"msg":"user cancel by key_code_back","type":11,"status":0}
4. 邮箱注册：返回按钮返回上一级登录界面；关闭按钮关闭 dialog，回调：{"code":2,"msg":"user cancel by key_code_back","type":11,"status":0}；系统返回键：返回上一级登录界面。
5. 找回密码：返回按钮返回上一级登录界面；关闭按钮关闭 dialog，回调：{"code":2,"msg":"user cancel by key_code_back"}；系统返回键：返回上一级登录界面。
   其他三方登录和绑定的现状：
6. google 登录-loginview：
7. google 登录：没有返回和关闭按钮；系统返回键返回主界面，回调：{"code":2,"msg":"The sign in was cancelled by the user.","status":0,"third":6,"type":6}
   返回体增加了 type
8. google 绑定：没有返回和关闭按钮；系统返回键返回主界面，回调：{"code":2,"msg":"The sign in was cancelled by the user.","type":6,"status":1}
   返回体本身就有 type，不需要添加 third

### 手机相关 dialog

#### 从 loginview 入口进入

1. 短信登录：返回按钮返回上一级 loginview；关闭按钮关闭 dialog，回调：{"code":2,"msg":"user cancel by key_code_back","type":10,"status":0}；系统返回键：返回到 loginview 界面
2. 验证码校验：返回按钮返回上一级登录界面；关闭按钮关闭 dialog，回调：{"code":2,"msg":"user cancel by key_code_back","type":10,"status":0}；系统返回键：返回到 loginview 界面
   系统返回键需要返回上一级

#### 不从 loginview 进入或无法从 loginview 入口进入

1. 短信绑定：不存在上一级，返回按钮返回主界面，回调：{"code":2,"msg":"user cancel by key_code_back"}；关闭按钮关闭 dialog，回调：{"code":2,"msg":"user cancel by key_code_back"}；系统返回键：关闭 dialog，回调：{"code":2,"msg":"user cancel by key_code_back"}
2. 验证码校验：返回按钮返回上一级登录界面；关闭按钮关闭 dialog，回调{"code":2,"msg":"user cancel by key_code_back","type":10,"status":1}；系统返回键：返回上一级登录界面
3. 短信登录：返回按钮，系统返回键，关闭按钮都返回到主界面，回调：{"code":2,"msg":"user cancel by key_code_back","type":10,"status":0}

### loginview

系统返回键：返回主界面，回调：{"error_no":10001,"message":"user close the login view"}
关闭 loginview 和关闭 dialog 的回调调整为一致的。
调整后：loginview 系统返回键：返回主界面，回调：{"code":2,"msg":"user cancel by key_code_back"}

问题：是否有回调的表现不一样！

1. 邮箱注册和找回密码，点击系统返回键需要返回到上一级的邮箱登录界面，现在是返回到了 loginview；
2. 邮箱绑定因为不存在上一级，返回按钮返回主界面需要添加回调：{"code":2,"msg":"user cancel by key_code_back"}
3. 不是从 loginview 进入从单独入口进入的邮箱登录、注册、找回密码，短信登录，需要确认一下其他三方登录是否有返回和关闭的回调，最终和其他三方效果保持一致即可；
4. 短信登录，系统返回键返回到 loginview 后又关闭了，需要调整为返回到 loginview；
5. 短信绑定，不存在上一级，返回按钮返回主界面，需要添加返回回调：{"code":2,"msg":"user cancel by key_code_back"}
6. 短信的验证码校验，系统返回需要上一级登录界面
7. 不是从 loginview 进入从单独入口进入的短信登录，在验证码界面关闭需要添加回调：{"code":2,"msg":"user cancel by key_code_back"}（目前是如果从 loginview 进入，关闭会有回调，单独进入没有）
8. 关闭 loginview 和关闭 dialog 的回调需要调整为一致的，目前 loginview 是：{"error_no":10001,"message":"user close the login view"}，其他 dialog 是：{"code":2,"msg":"user cancel by key_code_back"}

5.邮箱登录后杀进程，重新登录没继承登录状态，需要重新输入登录（需要调整）
这个就是我们要做的自动登录 6.邮箱找回密码，输入信息后，点击“确认重置”无任何反应。
同问题 2 已经解决 7.任何操作过程中点击 X 后，无法回到初始登陆界面。建议不提供 X 选项。
这个同 4，看下我们怎么调整。

2023-10-30 10:54:00.240
2023-10-30 10:54:00.448

同一笔请求，如果前一笔成功了，后一笔返回了{"error_no":10007,"message":"Google 订单重复, 无法完成支付操作"}，订单状态还会被更新为失败吗？

i_20231030110738_ebQun9

### 自动调用 recover 测试场景

ios：
构造未确认订单： 1.杀掉进程后，重新打开，不初始化，不会自动调用 verify； 2.杀掉进程后，重新打开，初始化，不登录，不会自动调用 verify； 3.杀掉进程后，重新打开，初始化，登录：自动调用 verify；pass 4.后台应用，再进入前台；
支付有问题，测不了

android：
构造未确认订单： 1.杀掉进程后，重新打开，不初始化，自动调用 verify；pass 2.杀掉进程后，重新打开，初始化，不登录，自动调用 verify； 3.杀掉进程后，重新打开，初始化，登录：自动调用 verify；pass 4.后台应用，再进入前台，自动调用 verify；pass

登录成功调用 recover
后台切换到前台调用 recover

ios：
调整之前：

1. 初始化和登录之后都不会自动调用恢复订单，再次点击支付的时候会去调用恢复订单
2. 后台之后已经发起的 verify 请求会中断，返回前台后会自动发起新的 verify，会成功
   调整之后：
   支付遇到了问题，无法测试（已修复）
   每次支付完成后会有两次 verify 调用（已修复）
3. 如果存在未确认的订单，重新打开进程，初始化登录后，自动调用 recover 恢复订单
4. 后台之后已经发起的 verify 请求会中断，返回前台后会自动发起新的 verify，会成功
   还会有一个后台到前台的 verify，也会成功。
5. 正常后台切前台切换也会调用 recover，如果不存在待恢复订单，不会请求后端的接口，如果存在，会请求后端 verify。

调用恢复订单的时候返回了：
"order_id": "i_20231030173408_8K3wJf"
{
"error_no": 10007,
"message": "苹果支付订单重复, 无法完成支付操作"
}

安卓：
调整之前：

1. 如果存在未确认的订单，重新打开进程之后初始化不会恢复订单，登录也不会恢复订单，只有再次点击支付的时候会调用恢复订单；
2. 支付未完成，后台之后已经发起的 verify 请求会中断，返回前台后会自动发起新的 verify，会成功；
3. 正常后台切前台切换，不会调用 recover。
   调整之后：
4. 如果存在未确认的订单，重新打开进程也会触发 onResume，所以也会触发后台切换前台的 recover；
   登录之后会再调用 recover，因为没有待恢复订单，所以会调用 recover，但是不会请求后端的接口。
5. 支付未完成，后台之后已经发起的 verify 请求会中断，返回前台后会自动发起新的 verify，会成功；
6. 正常后台切前台切换也会调用 recover，如果不存在待恢复订单，不会请求后端的接口，如果存在，会请求后端 verify。

/Users/topjoy/Desktop

## groot 学习遇到的问题

1. 模块创建的时候，镜像名称从哪里获取？区服模式和全局模式什么区别？端口名称有什么定义规则 TCP_PORT,SERVER_PORT？
   ![Alt text](image-1.png)
2. 数据库创建的时候，”系统创建的直接填写第三方发布的版本号，可以在 dockerhub 上搜索使用到的镜像版本“是什么意思？
   ![Alt text](image.png)
3. 使用到的镜像和数据库等：mongo，redis，zk 需要提前在服务器上安装部署好吗？
4. 创建集群的 request body 参数怎么获取？
   '''json
   {
   "name":"test-robot-account",
   "description":"",
   "section_ids":"",
   "template_id":82,
   "environments":[],
   "is_lock":false,
   "module_tag_mappings":[
   {"id":3,
   "module":"config",
   "tags":["0.3","latest","0.2","0.1","test_v1"],
   "tag":"0.3"
   },
   {"id":2,
   "module":"global",
   "tags":["latest"],
   "tag":"latest"
   }
   ],
   "temp_environments":[],
   "is_auto_upgrade":false,
   "game_name":"subor"
   }
   '''
   选择对应的 dao 可用的 tag 版本，然后 groot 的功能是实现自动化的部署，lient 调用 groot 的接口，会返回一个可用的 global 地址
   <https://groot-api.youle.game/api/v1/clusters/summary?game_name=dao>
   game_name 是对应的游戏名称，更换游戏只用更换游戏名称就可以。

5. 完成工程的搭建；
6. 添加了启动驱动；
7. 添加了部分元素 ID 和工具方法
   问题：使用启动安卓驱动的同样方式启动 dao 有点问题，需要看一下怎么解决。

基于 unittest 的接口自动化，通过 jenkins 配置执行策略为 10 分钟一次，如何实现这一次的执行中不执行其中的发邮件的测试接口，下一次的执行中执行发邮件的测试接口

如何实现不同接口的测试频次不一样？因为比如测试发邮件的接口，并不希望测试的频次很高，只是希望别的接口执行十次，但是发邮件的接口只支持一次

使用 Jenkinsfile 或 Pipeline 的脚本实现的自动触发构建，如何调整脚本实现定期更新构建参数 RUN_EMAIL_TESTS 的值

pkg = 'com.topjoy.sdk_demo'
activity = 'MainTxtLogActivity'

pkg = 'com.topjoy.dao'
activity = 'UnityPlayerActivity'

ios 测试：不存在系统返回键

### 邮箱相关 dialog

#### 从 loginview 入口进入

1. 邮箱登录：返回按钮返回上一级 loginview；关闭按钮关闭 dialog，弹窗提示：登录失败，回调：{"code":"2","status":"0","msg":"usercancel.","type":11}；
2. 邮箱注册：返回按钮返回上一级邮箱登录界面；关闭按钮关闭 dialog，弹窗提示：登录失败，回调：{"code":"2","status":"0","msg":"usercancel.","type":11}；
3. 找回密码：返回按钮返回上一级邮箱登录界面；关闭按钮关闭 dialog，弹窗提示：登录失败，回调：{"code":"2","status":"0","msg":"usercancel.","type":11}；

#### 不从 loginview 进入或无法从 loginview 入口进入

1. 邮箱绑定：不存在上一级，返回按钮返回主界面，回调：{"code":"2","status":"1","msg":"usercancel.","type":11}；；关闭按钮关闭 dialog，回调：{"code":"2","status":"0","msg":"usercancel.","type":11}；
   绑定取消没有弹窗提示登录失败。
2. 邮箱绑定验证码校验：返回按钮返回上一级邮箱登录界面；关闭按钮关闭 dialog，回调：{"code":"2","status":"1","msg":"usercancel.","type":11}；
3. 邮箱登录：返回按钮返回主界面；关闭按钮关闭 dialog；弹窗提示：登录失败，都有回调：{"code":"2","status":"0","msg":"usercancel.","type":11}；
4. 邮箱注册：返回按钮返回上一级登录界面；关闭按钮关闭 dialog，弹窗提示：登录失败，都有回调：{"code":"2","status":"0","msg":"usercancel.","type":11}；
5. 找回密码：返回按钮返回上一级登录界面；关闭按钮关闭 dialog，弹窗提示：登录失败，都有回调：{"code":"2","status":"0","msg":"usercancel.","type":11}；
6. google 登录-loginview：
7. google 登录：没有返回和关闭按钮；系统返回键返回主界面，回调：{"code":2,"msg":"The sign in was cancelled by the user.","status":0,"third":6}
8. google 绑定：没有返回和关闭按钮；系统返回键返回主界面，回调：{"code":2,"msg":"The sign in was cancelled by the user.","type":6,"status":1}

### 手机相关 dialog

#### 从 loginview 入口进入

1. 短信登录：返回按钮返回上一级 loginview；关闭按钮关闭 dialog，弹窗提示登录失败，回调：{"code":"2","status":"0","msg":"usercancel.","type":10}；
2. 验证码校验：返回按钮返回上一级登录界面；关闭按钮关闭 dialog，弹窗提示登录失败，回调：{"code":"2","status":"0","msg":"usercancel.","type":10}；
   绑定的时候验证码校验 status 是 1，登录的时候 status 是 0

#### 不从 loginview 进入或无法从 loginview 入口进入

1. 短信绑定：不存在上一级，返回按钮返回主界面，回调：{"code":"2","status":"1","msg":"usercancel.","type":10}；关闭按钮关闭 dialog，回调：{"code":"2","status":"1","msg":"usercancel.","type":10}；
2. 验证码校验：返回按钮返回上一级登录界面；关闭按钮关闭 dialog，回调{"code":"2","status":"0","msg":"usercancel.","type":10}；
   绑定的时候验证码校验 status 是 1，登录的时候 status 是 0
3. 短信登录：不存在上一级，返回按钮返回主界面，回调{"code":"2","status":"1","msg":"usercancel.","type":10}；；关闭按钮关闭 dialog，回调：{"code":"2","status":"0","msg":"usercancel.","type":10}；

### loginview

系统返回键：返回主界面，回调： {"msg":"usercancel.","code":"2"}
关闭 loginview 和关闭 dialog 的回调一致。

问题：

1. loginview 添加回调没有？
   没有加 需要加一下
2. 其他三方登录取消现在有没有回调？
   有回调，是失败的回调

# dao 验收账号体系

1. 短信登录，短信绑定，短信验证码 pass
2. 邮箱登录，邮箱绑定，邮箱注册，找回密码 pass
3. 重点验证的问题：
   邮箱找回密码无效后或者手机号接受验证码失败后，关闭找回界面卡死。（需要调整）
   问题现象有两个，需要我们调整：pass
   （1）弹窗的 dialog 直接关闭后，无法弹出“开始游戏”，导致只能杀掉进程了
   （2）手机系统物理键的返回后，可以看到“开始游戏”，但是点击没反应
4. 自动登录 pass
5. 切换账号 pass

{"appid":"7AVS2D5QH2TV","lang":"1","platform":"android","sdk_version":"2.10.0","secret_token":"","token":"EAACXZB3rMuOkBO5OL3lisYzW7eSvYRXYlFm0yySAszEx9YGtjOFcHHpDYv1rfVUUOmWZAhUhxxCjuZCvImcxudtM08EujK8vpybDTKEZB0lEusuNqI6iAL9YRrRvfAD950yhm43d2V4qlKZACk3qzI67ZCQ2ejFSrM1vvQC3qmOldSX3alA3dq1YEFnie3L470oK4VKZCY1czOSZBe9u9Cigy376pwpV7XZBZBtEJK9U21ygWg5dc3eQZDZD","type":"1","union_id":"263564919784853","user_id":"71773","sign":"8373eb9206fcffb6b94495e7f9fb68da"}

{"error_no":1005,"message":"参数无效"}

        ZeusSDK.getInstance().isGoogleConnected(){ resultCode, msg, result ->
            addText("检查支付环境", "", "resultCode: $resultCode\nmsg: $msg\nresult: $result")
            if (resultCode == MCConstant.RESULT_CODE_SUCCESS)
                setYes()
            else
                setNo()
        }   

1. getSkuDetail 没有做校验处理；
2. translation未初始化调用会闪退
3. 这里如果params为空，就会报空指针
             for (Object param : params) { // 检查参数是否为空
            if (null == param) {
                MCLogUtil.e(TAG, "fun# param is null");
                code = Common.PARAM_ERROR;
                error = Common.PARAM_ERROR.description;
                break;
            }
        }

<https://git.youle.game/chenzhongyou/autoui.git>

## 账号密码登录问题验证

1. code不一致是因为重友代码中的code用错了

场景：

1. 密码不符合正则，登录；{"code":2005,"msg":"Password is invalid","error_no":2005,"message":"Password is invalid"}
2. 账号类型不是手机也不是邮件，登录；{"code":2004,"msg":"Mobile phone number or Email is invalid","error_no":2004,"message":"Mobile phone number or Email is invalid"}
3. 密码不符合正则，注册；{"error_no":2005,"message":"Password is invalid"}
4. 账号类型不是手机也不是邮件，注册；{"error_no":2004,"message":"Mobile phone number or Email is invalid"}

{"code":2005,"msg":"Password is invalid","error_no":2005,"message":"Password is invalid"}
{"code":2004,"msg":"Mobile phone number or Email is invalid","error_no":2004,"message":"Mobile phone number or Email is invalid"}

## 测试demo需要添加的入口

    fun reStart(view: View?){
        setWaitting()
//        if (!isInitSuccess){
//            startSnsInit(lv_txt_log)
//        }
        MCLogUtil.e(TAG, "reStart")
        ZeusSDK.getInstance().reStart(this@MainTxtLogActivity)
    }

    fun reLogin(view: View?){
        setWaitting()
//        if (!isInitSuccess){
//            startSnsInit(lv_txt_log)
//        }
        MCLogUtil.e(TAG, "reStart")
        ZeusSDK.getInstance().reLogin(this@MainTxtLogActivity){ resultCode, msg, result ->
            addText("重新登录", "", "resultCode: $resultCode\nmsg: $msg\nresult: $result")
            if (resultCode == MCConstant.RESULT_CODE_SUCCESS)
                setYes()
            else
                setNo()
        }
    }

                        <TextView
                            android:id="@+id/restart"
                            android:layout_width="match_parent"
                            android:layout_height="35dp"
                            android:background="#EEF7FF"
                            android:gravity="center_vertical"
                            android:onClick="reStart"
                            android:paddingLeft="10dp"
                            android:text="reStart" />

                        <TextView
                            android:id="@+id/reLogin"
                            android:layout_width="match_parent"
                            android:layout_height="35dp"
                            android:background="#EEF7FF"
                            android:gravity="center_vertical"
                            android:onClick="reLogin"
                            android:paddingLeft="10dp"
                            android:text="reLogin" />

## 连接testbird的远程设备

1. 步骤一
adb connect tc.testbird.com:35118
2. 步骤二
adb -s tc.testbird.com:35118 shell auth 4de0e5d1450040a197605f9cab4005b4

Fira Code Light, Operator Mono, “YouYuan”
Fira Code Light,'微软雅黑',monospace

# 日常测试内容

## 账号体系的3个调整验证

1. 短信绑定和邮箱绑定的dialog返回和关闭会崩溃 在5522分支
经验证，该问题在release分支也存在，需要定位是什么原因导致，及问题引入的原因。
2. 切换账号的游客登录是否显示影响到了显示登录，显示登录需要调整一下
iOS：
本地不存在账号：
显示登录展示loginview，展示游客登录
切换账号，loginview，不展示游客登录 fail 展示游客登录（这种情况真实不存在，可以忽略）
本次存在账号，且未绑定三方
显示登录不展示loginview，直接登录
切换账号，loginview，不展示游客登录
本次存在账号，且绑定三方
显示登录不展示loginview，直接登录
切换账号，loginview，展示游客登录
android：
本地不存在账号：
显示登录展示loginview，展示游客登录
切换账号，loginview，不展示游客登录 fail 展示游客登录（这种情况真实不存在，可以忽略）
本次存在账号，且未绑定三方
显示登录不展示loginview，直接登录
切换账号，loginview，不展示游客登录
本次存在账号，且绑定三方
显示登录不展示loginview，直接登录
切换账号，loginview，展示游客登录
3. 绑定成功后崩溃（出现了一次，看看能不能复现）
4. 登录成功后出现登录失败的回调

## ios的语言和地区获取通用配置

### 测试点

1. 切换已经配置的语言，查看最终本地化语言是否是已经配置的语言
2. 切换没有配置的语言，查看最终本地化语言是否是英文

## 翻译全球化的邮箱验证码模板

1. zh-Hant-CN/MO 繁体中文
sdk端参数正确，后端验证码为繁体中文 “您的驗證碼為：6666，有效期30分鐘”
本地化语言为繁体中文
2. zh-Hans-CN 简体中文  zh-Hans-CN
sdk端传参错误
**安卓使用简体中文请求发邮件的时候是zh-CN，没有Hans？？ios是正确的zh-Hans-CN**
本地化语言为简体中文
3. en-CN 英文 中国
sdk端参数正确，后端验证码为英文 “Your verification code is 6666, valid for 30 minutes.”
本地化语言为英文
4. es-CN 西班牙文（fail）
sdk端参数正确，**后端验证码为英文？？**
本地化语言为西班牙文
5. de-CN 德文(fail)
sdk端参数正确，**后端验证码为英文？？**
本地化语言为德文
6. ja-CN 日本语
sdk端参数正确，后端截取还没改
本地化语言为简体日文
7. ko-CN 韩语
sdk端参数正确，后端验证码为韩文“인증코드: 6666, 유효기간 30분”
本地化语言为韩语
8. pt-CN葡萄牙语
sdk端参数正确，后端截取还没改
本地化语言为葡萄牙语
9. fr-CN法语
sdk端参数正确，后端截取还没改
ios全球化没有法语，android是有的
10. ru-CN俄语
sdk端参数正确，后端截取还没改
本地化语言为英文，因为list中不存在俄语

> 最终确定的模板配置只有：英语，中文，韩语，其他都发英文。

## 小游戏报白系统

### 需求疑问

1. “若主播无账号，则公会上传主播信息添加新主播，主播注册账号后信息同步；若上传已存在的主播，则用新的主播信息覆盖原有主播信息”
    公会上传主播信息添加主播的入口在哪里？和主播自己注册什么区别？
    公会入口的主播tab下添加主播，可以批量添加
2. 撤销主播权限时，是否需要提供撤销理由，或者通过什么方式将撤销理由通知给主播或者工会管理员？
    对于已通过的审批记录的拒绝==撤销主播权限
3. 登录/注册成功后跳转到哪个页面？首页？
   点击申请后登录回到之前的页面；点击左侧菜单后登录转到目标页
4. 主播信息的字段值确认：抖音昵称？主播昵称
   音浪流水截图时间区间？音浪流水时间区间
   音浪流水截图？近30天流水截图
   主播信息的字段值确认：抖音昵称 音浪流水截止日期 近30天流水截图
5. 主播基本信息 手机号也支持修改和编辑吗？
   >手机号可以修改，需要验证，我和王悦确认一下方式
6. 游戏申请 提交申请成功后，没有一个页面跳转，只有一个toast提示，需要添加吗？
   >需要返回上一级
7. 字段应该叫“游戏”还是“玩法”，现在不统一，有的地方是游戏，有的地方是玩法
   >玩法
8. 审批拒绝后还可以再通过吗？ 通过后还可以再拒绝吗？
   >可以
9. 管理员的游戏查询页面的字段需要确认一下
    文档是：展示字段：玩法名称、创建时间、玩法状态、操作（编辑和导出名单）  搜索字段：玩法名称、创建时间（区间）、玩法状态
    实际是：游戏名称，文字简介，封面图片，创建时间，权重，操作
    >展示字段：玩法名称、封面图片、创建时间、玩法状态、权重、操作（编辑和导出名单）  搜索字段：玩法名称、创建时间（区间）、玩法状态
10. 上新玩法可以申请，热门玩法不能申请？
    对
11. 游戏资料展示的项目和字段需要确认
    > 已确认，展示页面没问题，编辑页面需要修改部分输入框提示，确定后同步
张羽之前说：主播基本信息 手机号可以修改，需要验证，她说和你确认一下方式；
还有一个游戏资料编辑页面需要修改部分输入框提示，她和你确认同步了吗？
--- 以上问题已确认 ---
12. 管理员 白名单审批记录的申请人类型和所在公会感觉有点重，看下需要最终怎么展示？
   ![图 9](images/dd00471f61b9d6863de25ea48a5bb24a17097124a7cbc513ffeaf5b6f4ad1046.png)

   >需要都保留

13. 管理员 游戏添加，指引的信息中的图片像素要求是固定的吗？
   ![图 7](images/9a46abf884bf338acdb79d3bfacdcd9c4cf172c038d395299582a002ce3e0393.png)

   >是固定的

14. 游戏编辑的介绍视频，要展示这个链接吗？
   ![图 8](images/9fae25c71a3ab10783a55f920f97653c7cb9c053c257530fe1f0ae861cde3ae7.png)  

   >不需要展示

15. 短信的模板还是【TopJoyGames】，需要调整吗?

   >需要调整为：【嘻位科技】123456（火火浪弹幕小玩法白名单征集系统验证码，十分钟内有效）

16. 微信绑定
    - 获取验证码需要校验手机号是否已经注册吗？
    - 绑定没有注册的手机号目前也可以绑定成功，需要拦截吗？

### 问题记录

1. 注册 验证码接收能力还没添加
2. 注册 手机号的格式校验没有加
3. 主播信息 抖音UID截图字段需要去掉，认证中也需要去掉
   主播信息 平台展示为“douyin”，认证的时候表单中是“抖音”
   done
4. 页面刷新 或者打开新的tab页面，跳转到404界面，回到首页点击也没有反应：<https://nut.youle.game/#/error/404>
5. 主播认证 隐藏掉搜索公会的选项，流水区间需要改成只有一个截止时间 done
6. 主播认证 音浪为0，没有填截止时间的话认证报错：Uncaught (in promise) TypeError: Cannot read properties of undefined (reading 'map')
   t.statement_img_url = t.statement_img_url.map((e=>e.url)),
   现在音浪流水为0，截止日期也变成了必填
7. 主播申请记录 没有展示所属公会，查询条件只有申请状态，缺少申请玩法、申请时间（区间）done
8. 管理员审批记录 字段不统一  申请状态？ 状态  
   查询条件缺失，只由申请状态：搜索字段：申请人、申请人类型、申请人所在公会、申请玩法、申请时间（区间）、申请状态，
9. 管理员 审批记录查询，申请人详情都展示的是test，不确定是不是测试目前写死的值？
10. 管理员 审批通过的记录，无法再拒绝，提示：审批已处理；拒绝的也无法再通过。
11. 首页 游戏开播指南无法查看
12. 退出登录后打开个人中心提示：未知错误
![图 2](images/2aaca5248abe0a2ab557e1122867159afc9b730b1f52c890c71f75bd2203f703.png)  
13. 主播信息 抖音昵称———>主播昵称  近30天音浪流水日期————>近30天音浪流水截止日期
14. 游戏申请提交成功后，需要返回上一级，首页，现在还是停留在提交页面，只是一个toast提示申请已提交
![图 3](images/7c3a3f192c1e3528e6311229f3937049747f67d287524cd14e0163187dbaf061.png)  
15. 需要把字段设置为游戏的地方都更换为玩法
16. 管理员 游戏管理的表单不需要文字简介，游戏名称改为玩法名称
--- 以上已建立jira ---
17. 主播 游戏申请页面的重置按钮，重置后主播信息也无法更改，感觉这个重置按钮没什么作用
![图 6](images/3a1e24af67dc6aeebf7b84e319f92b5245a139056857b25caaf273cdaa4d8b9a.png)  
18. 主播 申请记录查询，按申请时间查询只能选择日期，默认是当前时间，会导致查询不到记录
19. 管理员 白名单审批界面的申请时间查询只能选择日期，默认是当前时间，会导致查询不到记录
20. 管理员 白名单审批界面申请类型的公会两个字错了，现在是“公会”
21. 管理员 游戏管理按照申请时间查询只能选择日期，默认是当前时间，会导致查询记录有问题
22. 管理员 全局搜索，404
23. 退出登录 主播退出登录跳转到了管理员登录界面，管理员退出登录跳转到了主播登录界面（还是同一类问题，两个页面同时打开会错乱）
24. 管理员 主播管理查询，抖音号查询，清空条件后<https://bolt.youle.game/api/v1/users?douyin_uid=&page=1&limit=10&is_livestreamer=true，查询结果为空>
25. 游戏申请 重置按钮去掉
26. 游戏申请 提交的时候，需要判断截止时间和当前时间是否大于一个月
27. 管理员 主播管理 根据公会和抖音号查询有问题
28. p, admin, /api/v1/admin/*/change_password, PUT ，更换id之后没有更换token也能请求成功
29. <https://bolt.youle.game/api/v1/approval_logs> 使用主播的token也能查询，主播的查询会加user_id
30. 主播信息的编辑，需要给管理员配置权限吗？
31. 主播个人信息修改成功后没有提示：修改成功。管理员游戏添加/修改成功后也没有提示：成功。

### 分类的问题记录

1. 主播信息
   - 主播信息字段调整：抖音昵称—>主播昵称  近30天音浪流水日期—>近30天音浪流水截止日期
   - 退出登录后打开个人中心提示：未知错误
2. 主播认证和申请
   - 认证时，音浪为0，没有填截止时间的话认证报错：Uncaught (in promise) TypeError: Cannot read properties of undefined (reading 'map') t.statement_img_url = t.statement_img_url.map((e=>e.url)), 现在音浪流水为0，截止日期也变成了必填吗？
   - 游戏申请提交成功后，需要返回上一级，首页，现在还是停留在提交页面，只是一个toast提示申请已提交
3. 管理员
   - 页面刷新或者复制tab会 404
   - 白名单审批记录 查询条件：只有申请状态，文档要求搜索字段：申请人、申请人类型、申请人所在公会、申请玩法、申请时间（区间）、申请状态
   - 白名单审批记录 应该是“申请状态”不是“状态”
   - 白名单审批记录 申请人详情都展示的是test，不确定是不是测试目前写死的值
   - 审批通过的记录，无法再拒绝，拒绝的也无法再通过[产品需要能这样做，因为涉及到权限撤销等]
   - 游戏管理的表单不需要文字简介，游戏名称改为玩法名称
4. 首页
   - 游戏开播指南无法查看
--- 以上已提交jira ---
5. 申请时间查询，的开始时间和结束时间需要调整为开始时间00:00点到截止时间23：59，现在默认是取当前时间，会导致查询有问题：
   - 管理员 白名单审批界面的申请时间查询
   - 管理员 游戏管理按照申请时间查询
   - 主播 申请记录查询，按申请时间查询
6. 管理员 白名单审批界面申请类型的公会两个字错了，现在是“工会”
7. 退出登录 主播退出登录跳转到了管理员登录界面，管理员退出登录跳转到了主播登录界面（还是同一类问题，两个页面同时打开会错乱）
   >基本不存在同时打开两个页面的，所以该问题可以不改
8. 游戏编辑的介绍视频，展示链接需要去掉
   >看下好不好调整，不好调整的话就不改了
9. 短信的模板还是【TopJoyGames】，需要调整为：【嘻位科技】123456（火火浪弹幕小玩法白名单征集系统验证码，十分钟内有效）
   需要后端改。
   >这个得短信模版创建好了，换一下配置就好了
10. 管理员 主播管理和白名单审批，所属公会为null的时候展示为个人主播

## 国内微信支付宝测试

1. 未安装微信客户端，wechat-exchange创建订单成功，无法拉起微信，一直处于loading状态；
   如果是存在微信分身，可以选择微信拉起，成功支付。

## iOS twitter登录和分享改造

### 测试问题

1. 首次登录的时候跳转到网业登录成功后没办法跳转回去SDK。
   这个我们没办法修改，就先维持这样。
2. iOS twitter分享没有回调。
3. Android twitter分享成功回调是取消。

## 2023.12.27 验证线上的邮件验证码语言

"language":"zh-CN"：验证码为简体中文
"language":"zh-Hans-CN"：验证码为简体中文
"language":"zh-Hant-TW"：验证码为繁体中文
"language":"zh-Hant-MO"：验证码为繁体中文
"language":"zh-Hant-HK"：验证码为繁体中文
"language":"ko-KR"：验证码为韩语
"language":"de-BE"：验证码为英语

现在就支持英语，中文，韩语，其他都发英语

## 2023.12.27 登录失败提示语修改

前面是ios，后面是android
简体中文：pass  pass
繁体中文：香港，澳门，台湾 pass  pass
德语：pass pass
韩语：pass  pass
日语：pass  pass
西班牙语：pass pass
英语：pass pass
葡萄牙语：pass pass

## 2023.12.28 修改ios的短信和邮箱登录绑定

问题：

1. iOS 邮箱绑定界面展示不全，添加换行 pass
2. iOS 短信登录和邮箱登录的toast提示无法弹出（可以是我们的页面的按钮点击不生效导致的）pass
3. iOS 账号体系的界面做屏蔽点击，否则能够点击到下方的图层
4. iOS 我们的页面的按钮点击不生效，比如输入了手机号也无法发送验证码 pass
5. Android 短信和邮箱解绑loading无法销毁 pass
6. 提示语翻译调整
7. timelimit接口增加回调
8. 账号删除后登录无限循环调用login

## 2023.1.2 admin账号删除

需要确认：

1. user和unregister表的更新是不是同步的，1，user更新成功了，unregister更新失败了，会回滚吗？2.user更新失败了，unregister还会更新吗？
2. 在马上要执行删除的时候，登录，应该怎么处理？
3. 任务1计算当前时间-删除申请时间>30天，任务2扫描到当前时间-上一次登录时间<30天，如果任务1先执行了怎么办？
4. 查询30天内是否有登录的任务，做的更新都有哪些？更新为取消删除状态的是删除任务还是查询任务？

测试数据构造：

执行删除的账号：
72272
删除后又登录的账号：
72300
大于30天未登录的删除账号：
72047
绑定三方账号删除
72318，绑定了line和google
未绑定三方账号删除
72035
注销通知失败，重新执行定时任务：
72035
注销通知能够成功，执行定时任务：
70815
取消注销通知失败，重新执行定时任务：
71536
取消注销能够成功，执行定时任务
72307

## tkw和wukong登录问题

1. 手机上原本装过tkw，然后装wukong的新包
2. 手机安装wukong的老包，然后再安装wukong的新包

## 2014.1.4 回调消息体和安卓不一致

测试场景

1. 参数错误
2. 没有初始化
3. 没有登陆
4. 登录类型错误
5. bind类型错误
6. 网络错误

## 2024.1.5 bolt缓存过期导致无法跳转登录页

测试数据：
主播：
USER_INFO {"value":{"user_id":10,"name":"七","role":["livestreamer"],"exp":1707015076},"expire":1705027877180}
管理员：
USER_INFO {"value":{"user_id":8,"name":"jiaheqi","role":["admin"],"exp":1707016901},"expire":1705029701833}

测试环境管理员：
USER_INFO {"value":{"user_id":1,"name":"tong","role":["admin"],"exp":1707016458},"expire":1705029259301}

不需要token和unser_info的请求：

1. 首页菜单
2. 游戏资料详情
3. 游戏开播指南

## 2024.1.5 iOS 接口回调添加code

1. 支付
![Alt text](image.png)![图 10](images/6df543a5933cc2bf05c65a91a10bd5bc1e4e6358b07165e9c55649bb63617603.png)  

2. 分享
eusSDK:====== 10008 callback ======resultCode:1|msg:Success|result:{"code":1,"msg":"share successfacebook","type":"facebook"}
分享取消：
ZeusSDK:====== 10010 callback ======resultCode:2|msg:Cancel|result:{"code":2,"msg":"share canceltwitter","type":"twitter"}
3. 实名
安卓：
realname：ZeusSDK:====== 10032 callback ======resultCode:1|msg:Success|result:{"code":1,"msg":"Adult","res":true}
timelimit：ZeusSDK:====== 10034 callback ======resultCode:1|msg:Success|result:can play,detail:Adult
paylimit：2024-01-05 18:02:55.654 16741-16741 SDK2.0                  com.topjoy.sdk_demo                  I  ZeusSDK:====== 10033 callback ======resultCode:1|msg:Success|result:{"accumulation_limit":2.147483648E7,"transaction_limit":2.147483648E7,"accumulation_amount":0.99,"remaining_amount":2.147483549E7,"start_time":"2024-01-01 00:00:00","end_time":"2024-01-31 00:00:00","trace_id":"7b04b9c640cd459aaf74af4f1e431d21","allow":true}

## 2014.1.9 basicsdk图片选择器

问题记录：

1. 鸿蒙4.0闪退，设备是mate50；鸿蒙3.0选取后照片不展示；鸿蒙2.0正常；
2. 模拟器雷电正常，夜神崩溃，蓝叠选取后不展示；
3. 真我手机android12闪退；
4. 荣耀v9的android7选取后图片不展示

# UI automation

## 问题

1. D:\AirtestIDE\poco\drivers\android\uiautomation.py:285: UserWarning: [pocoservice.apk] instrumentation test server process is no longer alive
  warnings.warn("[pocoservice.apk] instrumentation test server process is no longer alive")
2. D:\AirtestIDE\poco\drivers\android\uiautomation.py:306: UserWarning: AndroidUiautomationPoco should not run together with "uiautomator". "uiautomator" will be killed.
该问题无法解决，最终还是采用使用图片的方式，但是需要想办法提高识别率。
  .format(self.**class**.**name**))
3. 在一个文件中跑多条用例会存在的问题
File "D:\AirtestIDE\poco\utils\simplerpc\transport\tcp\safetcp.py", line 36, in recv
    trunk = self.sock.recv(size)
ConnectionAbortedError: [WinError 10053] 你的主机中的软件中止了一个已建立的连接。
4. 安装输入法的路径
<airtest.core.android.adb> C:\Users\DELL\AppData\Local\Android\Sdk\platform-tools\adb.exe -P 5037 -s tc.testbird.com:33686 push D:\AirtestIDE\airtest\core\android\static\apks\Yosemite.apk /data/local/tmp/Yosemite.apk
5. 某一些设备无法实现清除缓存
真我realme
6. 某些设备无法安装包
TCL，Google Nexus 5，
7. 使用testin遇到的超时问题
Exception ignored in: <function RpcObjectProxy.**del** at 0x048301D8>
Traceback (most recent call last):
  File "D:\PycharmProjects\daoautoui\venv\lib\site-packages\hrpc\object_proxy.py", line 114, in **del**
    self._client__.evaluate(RpcObjectProxy(self._uri__, self._client__, action), wait_for_response=False)
  File "D:\PycharmProjects\daoautoui\venv\lib\site-packages\hrpc\client.py", line 63, in evaluate
    self.transport.send({'id': reqid, 'uri': obj_proxy._uri__, 'method': obj_proxy._invocation_path__},
  File "D:\PycharmProjects\daoautoui\venv\lib\site-packages\hrpc\transport\http.py", line 23, in send
    r = requests.post(self.endpoint, data=json.dumps(req), headers={'Content-Type': 'application/json'},
  File "D:\PycharmProjects\daoautoui\venv\lib\site-packages\requests\api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "D:\PycharmProjects\daoautoui\venv\lib\site-packages\requests\api.py", line 59, in request
    return session.request(method=method, url=url,**kwargs)
  File "D:\PycharmProjects\daoautoui\venv\lib\site-packages\requests\sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "D:\PycharmProjects\daoautoui\venv\lib\site-packages\requests\sessions.py", line 703, in send
    r = adapter.send(request,**kwargs)
  File "D:\PycharmProjects\daoautoui\venv\lib\site-packages\requests\adapters.py", line 532, in send
    raise ReadTimeout(e, request=request)
requests.exceptions.ReadTimeout: HTTPConnectionPool(host='127.0.0.1', port=14319): Read timed out. (read timeout=0.3)
8. 延迟很高的问题
![图 5](images/5a5ea5d751309d91142865c8ca0e354bb64608ce89c3a0217481d5674adabdfc.png)  
9. 由于oppo、vivo、小米手机的特殊性，在安装App时可能需要输入密码。默认密码：testin123 （由于此设备为共享设备，所以请您不要尝试更换帐号及密码，谢谢您的合作）
10. 系统检测到您连接真机的网络较慢，可能会存在轻微的操作卡顿问题
11. 某些设备的安装需要手动同意

## 参数设置

1. 信任值设置参数,threshold=0.4
2. pocoservice的apk的路径：D:\Python39\Lib\site-packages\poco\drivers\android\lib\pocoservice-debug.apk

## 最终的实现方案

1. 统一都按照图片识别的方式
2. 对于可能存在的多机型分辨率不同的问题，看看采用什么方案
（1）按设备区分用例
（2）通过信任值设置，但是也可能存在识别不准的问题
3. 远程机器需要一台一台租用和连接，所以全自动还是没办法实现
因为每台机器的端口号和auth都不一样，且需要执行adb命令先连接

## 各步骤计时

1. 推送安装包到手机 1min35s  35s 1min20s  45s  30s 50s
2. 设备连接及脚本启动 可以忽略
3. 测试用例脚本执行 6min 42s 203ms   5min 32s 13ms  6min 10s 817ms  5min 43s 755ms  5min 20s 346ms  5min 58s 60ms 4min 40s 743ms  6min 33s 136ms
总耗时：8min17s

## 兼容测试遇到的问题

1. 短信绑定，闪退
![图 4](images/920a509681ec42c20aed80c23af768538043decba892ab59a967c62d6a8661a3.png)  

# 发版内容notes

## 11.14

1. 获取商品详情 适配低版本商店 pass
   旧版本商店获取商品详情
   新版本商店获取商品详情
2. sdk自动调用recover接口恢复订单 pass
    ios：
    构造未确认订单：
    1.杀掉进程后，重新打开，不初始化，不会自动调用 verify；pass
    2.杀掉进程后，重新打开，初始化，不登录，不会自动调用 verify；pass
    3.杀掉进程后，重新打开，初始化，登录：自动调用 verify；pass
    4.后台应用，再进入前台  自动调用recvover； pass
    android：
    构造未确认订单：
    1.杀掉进程后，重新打开，不初始化，自动调用 verify；pass
    2.杀掉进程后，重新打开，初始化，不登录，自动调用 verify；
    3.杀掉进程后，重新打开，初始化，登录：自动调用 verify；pass
    4.后台应用，再进入前台，自动调用 verify；pass
    Todo: 确认一下这个日志不删除有没有什么影响？？
    切换为v2的支付之后会不会有一些v1的订单因为调用v2的verify而导致找不到订单？？
3. 参数检测添加回调
   回归checklist即可
4. 邮箱注册传参保持和android一致（开发自测）
   回归checklist即可
5. 账号密码登录，密码格式错误返回信息构造时判断条件错误 pass
   账号密码注册/登录 ：参数正确pass；参数错误（账号有误，密码有误）pass
6. ios payV2
   支付v2
   订阅v2
   恢复订单v2

## 11.28

1. iOS 获取设备语言，根据语言实现全球化 pass
2. iOS 支付和订阅去除分转元操作 pass
3. 账号体系的几个变动
   - iOS+Android 切换账号的loginview页面，游客登录根据当前账号状态判断是否展示，若当前账号未绑定三方，则游客登录按钮不显示 pass
   - iOS+Android 切换账号的游客登录点击后先调用注销，清除本地账号，再调用设备绑定的游客登录 pass
   - iOS+Android 找回密码点击确认重置后添加提示“验证码发送中”（本地化待提供）pass
   - Android 隐私协议未勾选样式变为空格 pass
   - iOS+Android 手机输入验证码界面，手机号前面添加展示区号 pass
   - Android 切换账号loginview增加关闭按钮
   - iOS+Android 游客登录增加提示以及提示本地化 pass
4. bugfix iOS 短信绑定和邮箱绑定的dialog关闭和返回会崩溃 pass
5. iOS+Android 数数打点增加zeus_device_id字段 pass
6. bugfix Unity短信发送验证码崩溃

## 12.12

bugfix

1. Unity Zeus-Unity alipay wxpay 补充 notifyURL

feature

1. Android PBL升级6.0
2. iOS + Android Doh模式支持
3. iOS twitter登录和分享升级

## 12.15

feature

1. iOS + Android 账号体系注册/找回密码，邮箱输入框改为两个框

bugfix

1. Unity iOS 邮箱绑定和短信绑定崩溃，提示语显示异常

## 12.22

feature

1. iOS 账号体系旋转屏幕适配，根据游戏方向旋转
2. iOS 账号体系短信登录区号选择样式调整
3. iOS 广告归因

bugfix

1. Android unity 短信绑定和邮箱绑定隐私协议不展示 pass
2. Android facebook登录崩溃（监控到的，无法复现测试）
3. Android 日志开关开启后，应用配置混淆配置后，会导致登录崩溃 pass
4. Android 调用recover崩溃修复
5. iOS 同一设备不用游戏静默登录问题修复

### 回归问题记录

1. iOS 短信登录输入验证码返回后，区号选择样式会多出两条横线。
2. doh 对于内网域名没办法解析
2023-12-08 14:35:54.365 24146-1977  SDK2.0                  com.topjoy.sdk_demo                  V  MCHttpUtil:MCHttpUtil,client:{"Status":0,"TC":false,"RD":true,"RA":true,"AD":false,"CD":false,"Question":[{"name":"zeus.youle.game","type":1}],"Answer":[{"name":"zeus.youle.game","type":1,"TTL":592,"data":"36.110.106.42"}]}

2023-12-08 14:35:54.788 24146-24146 SDK2.0                  com.topjoy.sdk_demo                  I  ZeusSDK:====== init callback ======resultCode:0|msg:Fail|result:{"code":3,"msg":"java.security.cert.CertPathValidatorException: Trust anchor for certification path not found.","net_name":"info"}

2023-12-08 14:37:44.982 29626-3250  SDK2.0                  com.topjoy.sdk_demo                  V  MCHttpUtil:MCHttpUtil,client:{"Status":0,"TC":false,"RD":true,"RA":true,"AD":false,"CD":false,"Question":[{"name":"abroad.topjoy.com","type":1}],"Answer":[{"name":"abroad.topjoy.com","type":5,"TTL":600,"data":"abroad.topjoy.com.cdn.cloudflare.net."},{"name":"abroad.topjoy.com.cdn.cloudflare.net","type":1,"TTL":300,"data":"104.18.30.151"},{"name":"abroad.topjoy.com.cdn.cloudflare.net","type":1,"TTL":300,"data":"104.18.31.151"}]}
3. 下午打包pre-release的ios的时候，改一下unity的订阅商品名称，现在返回无效的商品。
4. 验证码发送中的提示语位置很不好，看不到吗，需要调整一下。
5. unity ios 短信绑定和邮箱绑定返回和关闭崩溃。

## 2024.1.23

feature

1. iOS + Android  重新开始/账号解绑 接口添加二次确认弹窗
2. iOS + Unity timelimit添加回调
3. iOS + Android 业务场景中没有不需要绑定设备ID的情况，为了避免项目接错，还不如默认就绑定设备。
4. BasicSDK google照片选择器升级
5. iOS + Android 三方登录参数类型变更
6. Android 短信和邮箱输入验证码后自动收起键盘 [测试完成待发布]

bugfix

1. unity-Android QQ登录一直处于loading状态
2. iOS 如果在收到login的回调后，调用realname接口，已经实名过的账号，还会弹出实名认证弹框

## 2024.1.30

feature

1. iOS + Android 账号体系短信登录根据返回区号列表第一项展示默认区号
2. Android-Basicsdk google照片选择器升级
3. iOS timelimit 接口增加回调
4. iOS + Android 默认绑定设备登录
5. iOS + Android 重新开始/账号解绑 接口添加二次确认弹窗

bugfix

1. iOS 如果在收到login的回调后，调用realname接口，已经实名过的账号，还会弹出实名认证弹框

## 2024.2.27

feature

1. iOS + Android+Unity 移除update接口的调用
2. iOS 更新doh请求方式为curl
3. iOS + Unity timelimit添加回调
4. iOS + Android + Unity 修改游客登录为默认绑定设备
5. iOS + Android + Unity 升级Upgrade ThinkingSDK
6. iOS + Android + Unity 解绑和重新开始二次弹窗添加
7. iOS + Android 支付verify接口请求添加设备id
8. Android Doyxgen android文档

bugfix

1. iOS realname的bug修复：如果在收到login的回调后，调用realname接口，已经实名过的账号，还会弹出实名认证弹框
2. iOS fix MCSurveyMonkey Crash
3. Android 微信解绑后更新绑定状态常量错误
4. Android loading的crash修复
5. Android fix AliyunLogReporter.log crash

## 2024.3.12

feature

1. Android 修改getString逻辑
2. iOS 分离三方绑定的回调
3. iOS 将SDK中代表三方登录方式的代码统一成NSNumber类型
4. iOS+Android init数数上报添加全局唯一id
5. iOS+Android 三方登录修改为枚举类型

bugfix

1. iOS fix cocoapods publish

# 数数查询

# 数数查询

## 查询测试的demo

使用bundle id 查询：where
iOS "#bundle_id" = 'com.topjoy.zeusdemo'
Android "#bundle_id" = 'com.topjoy.sdk_demo'

# 日记本

## 2024.1.11

昨天因为一些事情和小猫生气了，白天的时候心情有点低落，小猫也发觉了我的情绪不正常，给我点了奶茶和晚饭，奶茶很好喝，晚饭的面条也特别好吃。
对了还有车厘子，车厘子特别甜。
我感觉自己是一个性格很别扭的人，有时候其实没有那么生气了，但是还是不想说话，并且还会偶尔沉浸在小猫一直讨好我的情绪中。
可能是因为觉得这样会让自己被珍视。
昨晚在玩了游戏之后，低落的情绪就已经基本消失了。
可能这就是游戏存在我的生命里的意义。
昨晚的梦里，一直焦虑于找不到很满意的婚礼礼堂。
小猫不在的这几天，每天都会睡不好，有时候还会做噩梦。
才明白有些分别是为了让彼此更珍爱。
对了对了，今晚还会有小猫给我点的晚饭吃，好开心。

## 2024.1.17

在梦中，梦到我们是不同的种族。
有的是虫族，有的是人族，有的是彩虹族，每个种族都有各自的标志像logo一样。
虫族目标就是消灭人族和彩虹族。
虫族有翅膀，就像蚂蚁和蜜蜂一样。
故事的背景是未来世界，晚上没有阳光的时候，需要在营养仓里面休眠补充能量，只到第二天日出之后才能出来。
有一段情节是小猫穿着虫族战士的着装，手里拿着弓箭，说着她未来的梦想是成为很厉害的射手。
她的爸爸妈妈告诉她虫族誓要消灭人族，而我在梦中的身份是人族。
我在他们的领地偷偷找到她，她递给我一张纸条上面写着电话号码，告诉我不要主动打过来，要等着她的电话。

昨天帮小猫的省考报了名，从选岗位到最终的缴费小猫都没有参与，可能最开始她并不想报名。
我当初以为可以同时报名两个省份，所以初衷是想一起试试。
下午小猫看到周口的岗位之后，就说如果报名了就不去太原的考试了，可是我刚缴了费。
或者你可以试着问问我“那个考试我可以不去了吗？”而不是那句冷冰冰的话，会让我感觉，自己忙前忙后的报名缴费像个小丑。
可能在你心里，还是希望待在老家，并不想去任何地方，即使是郑州。
你反复强调过你自己的婚姻标准，你说出来的条条框框中很看重的一个环节就是物质条件。
你说不希望以后的生活中有贷款的压力，会让你的生活质量下降，可是在当下的中国社会，如果可以，谁愿意背负几十年的债务呢？
从你的叙述中，我只能听到“会让我生活质量下降”，“物质是我是否走进婚姻必要条件的一环”，“我是不会陪男生一起吃苦的”。
我多想听到一句“没关系，未来的幸福我们一起努力”，但是你一句没有讲过，哪怕是在安慰我，是在骗我。
哪个男人会让自己的女孩吃苦呢？只会在一句句我要对她更好的暗示中默默努力。努力去幸福真的等于吃苦吗？
你会把一些省吃节用归结到吃苦，会把只是我个人背负的贷款归结为对你生活质量的下降，因为你声称结婚之后，都是共同财产了。
可是你也说是共同财产了，那我是否有权利支配其中的部分呢？我把我的那部分拿去还贷款是否可以呢？
我想可能是我太过于理想主义了，这个年纪了还在向往那种义无反顾的浪漫，现实会一次次提醒自己别做梦了。
我在看《我要我们在一起》的时候，对于别人评价不高的这部片子我热泪盈眶，因为我一次次感动于凌一尧的奋不顾身。
或许就像结局一样，幸福和圆满只能存在于天国的幻境中。
在零重力的那个世界，我们的灵魂可能才会没有现实的种种压力，才能真正的自由，真正的幸福。

## 2024.3.12

梦到了我和刘总不知道要去一个什么地方，然后又两只小狗，狗妈妈和她的孩子，他的孩子一致靠近我们，我们看见狗妈妈很凶，一直在躲，但是那个小狗一直接近我们。
我给刘总说没事，这个体积我应该能打过。但是真的当狗妈妈扑过来的时候，一下就咬到了我的手臂。后来好像掌握了揍他的技巧，就被他制伏了。

我和小猫不知道是要去什么地方，然后手机可以开附近区域热感应，然后不小心偶然碰到了一起杀人案，凶手是一家四口的儿子。
然后我说他应该没看见我们，但是小猫说那个工具可以检测到他时候看见我们，如果在区域内发生移动，是可以检测到的，然后我们发现确实发现了我们，我们回去之后就躲在宿舍了（我也不知道为什么是宿舍）。
后来是晚上，但是开着灯，很亮，我们听见了敲门声。
开门之后发现并不是那个凶手，而是另一个宿舍来找茬的。我说没事让他来，因为在梦里我已经把身体锻炼的很壮了。但是当出门冲上去的时候遇到了一个更壮更高的，再给我们展示她的肌肉，但是下一面就被咒灵吃掉了头。后来就醒了。

很不喜欢离别。
但是从前总是分不清自己是不愿意做远行者还是被留下的人，会觉得二者同样痛苦。
今天看着之前每天一起工作的同事，分别背着他们的书包离开的时候，瞬间有一种冲脑的悲伤感。
我会在想，如果我是那个离开的人，会不会自己内心会更好受一些。
我试着代入了一下曾经自己毕业的经历，原来并不是会好受一些，而是当时内心另一种情绪--愤怒更占据上风。
这种离别感在我身上可以过分到一种什么程度呢？会过分到即时是公交车窗外，只有匆匆一眼的斑马线行人，以后再也不会见。
虽然好像时间会帮助自己忙忙忘记这些，但当下的那种感觉也太过真实。
搞不清楚这种情绪的由来？这样的行为表现在心理学上被怎么定义呢？

# 写字板

![图 0](images/554389ab699164f173d2e48985f61d6430ef2b042fcd87b69aca1e36e442ac3c.jpg)

23FWQ412-HO01-0001
23FWQ412-PO01-0006
23FWQ412-PO01-0007
1.尺码：XL
2.地址电话姓名：
收货人: 贾赫琦 手机号码: 17600116844 所在地区: 北京北京市朝阳区立水桥立城苑1号楼1单元1001
3.得物ID：狗卷七

maestro
任务描述：

1. 登录界面选择邮箱登录，登录成功（登录账号使用：<jiaheqi@topjoy.com>  1234）
2. 登录界面选择手机登录，输入手机号后跳转到验证码校验界面，输入验证码后登录成功
3. 登录界面选择邮箱登录，登录界面选择去注册，输入账号密码后注册成功
4. 登录界面选择邮箱登录，登录界面选择忘记密码，输入账号密码后重置密码，跳转到验证码校验界面，输入验证码后重置成功
5. 登录界面选择游客登录，登录成功后，选择设置-账号中心-绑定手机号，输入手机号和验证码后绑定成功
6. 登录界面选择游客登录，登录成功后，选择设置-账号中心-绑定邮箱，输入账号密码后绑定成功

MCRequestParamUtil:发送的参数{"appid":"7AVS2D5QH2TV","email":"<jiaheqi@topjoy.com>","language":"de-BE","platform":"android","sdk_version":"2.11.0","sign":"1f3dd1b6a3e1456f24eafca0f0489bbd"}

错误原因：
D:\AirtestIDE\poco\drivers\android\uiautomation.py:306: UserWarning: AndroidUiautomationPoco should not run together with "uiautomator". "uiautomator" will be killed.
官方文档的常见问题：<https://airtest.doc.io.netease.com/IDEdocs/faq/2_common%20problems/#3-poco>

Traceback (most recent call last):
  File "D:\PycharmProjects\daoautoui\venv\lib\site-packages\hrpc\object_proxy.py", line 114, in **del**
    self._client__.evaluate(RpcObjectProxy(self._uri__, self._client__, action), wait_for_response=False)
  File "D:\PycharmProjects\daoautoui\venv\lib\site-packages\hrpc\client.py", line 63, in evaluate
    self.transport.send({'id': reqid, 'uri': obj_proxy._uri__, 'method': obj_proxy._invocation_path__},
  File "D:\PycharmProjects\daoautoui\venv\lib\site-packages\hrpc\transport\http.py", line 23, in send
    r = requests.post(self.endpoint, data=json.dumps(req), headers={'Content-Type': 'application/json'},
  File "D:\PycharmProjects\daoautoui\venv\lib\site-packages\requests\api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "D:\PycharmProjects\daoautoui\venv\lib\site-packages\requests\api.py", line 59, in request
    return session.request(method=method, url=url,**kwargs)
  File "D:\PycharmProjects\daoautoui\venv\lib\site-packages\requests\sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "D:\PycharmProjects\daoautoui\venv\lib\site-packages\requests\sessions.py", line 703, in send
    r = adapter.send(request,**kwargs)
  File "D:\PycharmProjects\daoautoui\venv\lib\site-packages\requests\adapters.py", line 532, in send
    raise ReadTimeout(e, request=request)
requests.exceptions.ReadTimeout: HTTPConnectionPool(host='127.0.0.1', port=18323): Read timed out. (read timeout=0.3)
187.5

import kotlin.math.roundToInt 报红 Unresolved reference: roundToInt

<https://bolt.youle.game/api/v1/games?create_time[]=2023-11-17+10:47:16&create_time[]=2023-11-17+10:47:16&page=1&limit=10&create_tim_start=2023-11-17+00:00:00&create_time_end=2023-11-17+23:59:59>

<https://bolt.youle.game/api/v1/users?guild_id=2&page=1&limit=10&is_livestreamer=true>

<https://bolt.youle.game/api/v1/users?douyin_uid=987654321&page=1&limit=10&is_livestreamer=true>

<https://bolt.youle.game/api/v1/admin/1/change_password>

主播token：
eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoyMSwibmFtZSI6IjE3NjAwMTE2ODQ0Iiwicm9sZSI6WyJsaXZlc3RyZWFtZXIiXSwiZXhwIjoxNzAyMDkwMDkzfQ.8dGjKTF9W1dcWIb9kSZZZ5iI9b8tOpxM2BbsTcpZ91g

管理员token：
eyJ1c2VyX2lkIjoxLCJuYW1lIjoidG9uZyIsInJvbGUiOlsiYWRtaW4iXSwiZXhwIjoxNzAxNzYyNjg0fQ.zV1dCBrnlRojz0S_bL-Wcw0UEIe6d7NnQlKg8EaoZck

<https://bolt.youle.game/api/v1/uploadfile>

-----------------------------3637058302636441466501795719
Content-Disposition: form-data; name="files"; filename="æ¡é¢.jpg"
Content-Type: image/jpeg

<https://bolt.youle.game/api/v1/games/24>

 OkHttpDns:Doh解析结果：[/36.110.106.42]
 MCHttpUtil:MCHttpUtil,client:{"Status":0,"TC":false,"RD":true,"RA":true,"AD":false,"CD":false,"Question":[{"name":"zeus.youle.game","type":1}],"Answer":[{"name":"zeus.youle.game","type":1,"TTL":600,"data":"36.110.106.42"}]}
 OkHttpDns:正常DNS解析结果：[zeus.youle.game/172.16.149.200]

OkHttpDns:正常DNS解析结果：[abroad.topjoy.com/104.18.31.151, abroad.topjoy.com/104.18.30.151]

Jiaheqi77
<https://testflight.apple.com/join/2RSRj9QI>

testin123
Jiaheqi77

<jiaheqi@topjoy.com>

<1097099589@qq.com>

13以下的系统打开dao都闪退。

git clone --recursive git://github.com/nvie/gitflow.git

外向者与外界的关系，就像鱼与水的关系一样，鱼需要一刻不停地生活在水中，自然就会进化出娴熟的游泳能力。

如果说外向者和外界的关系是鱼和水的关系的话，那么内向者和外界的关系更像是青蛙和水的关系。作为两栖动物，成年的青蛙主要用肺呼吸，这就导致它们在水下待的时间比较短，一般不超过20分钟。内向者也是如此，虽然他们也可以参加各种社交活动，但持续的时间通常不会太久。当不得不在社交场合停留很长时间时，内向者会感觉自己像电量不足的电池那样，思维变得迟缓，感受变得麻木，最后感到疲惫不堪，只想早点逃离。

报白系统 图片上传选多张图片一起上传。

twitter分享图片
twitter分享如果没有安装twitter

同一个项目，不同的appid，同一个设备注册的时候，返回同一个账号。

应该返回不同的账号才对。

{"error_no":0,"message":"成功","result":{"id":3490542,"account":"138172694"}}
{"error_no":0,"message":"成功","result":{"id":3490543,"account":"578994928"}}
{"error_no":0,"message":"成功","result":{"id":3490544,"account":"888156881"}}
{"error_no":0,"message":"成功","result":{"id":3490545,"account":"75722968"}}
{"error_no":0,"message":"成功","result":{"id":3490546,"account":"36774779"}}

pre环境：
{"error_no":0,"message":"成功","result":{"id":3490799,"account":"174919688"}}
{"error_no":0,"message":"成功","result":{"id":3490800,"account":"70583408"}}
测试环境：
{"error_no":0,"message":"成功","result":{"id":72112,"account":"469992254"}}
{"error_no":0,"message":"成功","result":{"id":72113,"account":"460254424"}}

"force_renew": "false" ：绑定设备注册
{"error_no":0,"message":"成功","result":{"id":3491305,"account":"99618562"}}
{"error_no":0,"message":"成功","result":{"id":3491305,"account":"99618562"}}

"force_renew": "true" ：不绑定设备注册

{"error_no":0,"message":"成功","result":{"id":72120,"account":"251268957"}}
{"error_no":0,"message":"成功","result":{"id":72121,"account":"723762003"}}

我的SDKHTTPClient是这样初始化的
sdk_http_client = SDKHTTPClient(
    get_host(),
    get_app_id(),
    get_secret_key()
)
class SDKHTTPClient(object):

    def __init__(self, host, app_id, secret_key):
        self.host = host
        self.app_id = app_id
        self.secret_key = secret_key
我在这个测试方法内部的第二次请求想成功新设置之前的全局app_id和secret_key，我应该怎么写？
def test_user_register_with_diff_appid_one_key(self):
    path = "/user/register"
    device_id = generate_device_id()
    body = {
        "device": device_id,
        "mobile_info": json.dumps(generate_mobile_info()),
        "platform": "Android",
        "force_renew": "false"
    }
    response = sdk_http_client.post(path, body)
    print(response.text)
    sdk_http_client.secret_key = "508XPF5Q045XC7DV"
    sdk_http_client.app_id = "2YBKKM9W9TX9"
    response1 = sdk_http_client.post(path, body)
    print(response1.text)

同一个项目，在不同的appid（安卓，ios）需要在同一个设备是一个账号，这种怎么实现？
同一个项目，在不同的appid（安卓，ios）需要在同一个设备是不同账号，目前是这样的。

刚开始改完：
登录的时候查询账号用了user_id+appid1，导致如果换了appid2就查询不到了，因为我们只能配置一套appid。

1. ip发送短信限制调大
2. 音浪值输入框调大，设置上限-99999999
3. 微信号提示-若您的申请遇到问题，管理员将通过微信联系，请使用能搜索到您的微信号/手机号
4. 微信绑定状态提示-请扫描左下方二维码关注微信公众号并绑定账号，绑定后可在公众号接收申请进度通知
5. 抖音号提示-请确认抖音号输入无误，玩法申请通过后我们将为您的抖音号开通直播权限
6. 绑定微信点击输入框后直接提示格式错误
7. 操作频繁弹窗两次
8. 手机输入验证码粘贴两次
9. 微信号、抖音号添加正则校验

微信号：6-20位数字、字母、下划线、减号，必须字母或下划线开头
不可以小于6位
不可以大于20位
可以只有数字（因为有的人微信号是手机号）
可以数字开头（因为有的人微信号是手机号）
可以下划线开头
可以有减号
不可以含有下划线以外的符号

抖音号：4-16位数字、字母、下划线、点，不能以点开头
只有数字：不可以  pass
小于4位 不可以 pass
大于16位 不可以 pass
含有点和下划线之外的特殊符号：不可以  pass
点开头 不可以 pass
下划线开头  可以 pass

.gitignore

我想把这样取值的方式改成get的形式，且通过不同的环境进行区分，应该怎么调整我的.gitignore，以及创建怎么的文件实现

def get_app_id():
    return os.environ["APP_ID"]
    # return "7AVS2D5QH2TV"  # android
    # return "2YBKKM9W9TX9"  # ios

def get_secret_key():
    return os.environ["SECRET_KEY"]
    # return "DF864TCE1XWZE1NH"  # android
    # return "508XPF5Q045XC7DV"  # ios

def get_app_id():
    return os.getenv("APP_ID")

APP_ID="7AVS2D5QH2TV"
SECRET_KEY="DF864TCE1XWZE1NH"
APP_ID_ANOTHER="2YBKKM9W9TX9"
SECRET_KEY_ANOTHER="508XPF5Q045XC7DV"
HOST="<https://zeus.youle.game>"

if **name** == '**main**':
    env = "test"
    if env == 'test':
        env_file = '../.env.test'
    elif env == 'pre':
        env_file = '../.env_pre'
    else:  # 默认为生产环境
        env_file = '../.env_prod'
    load_dotenv(env_file)
    print(get_app_id())

我是这样写的，为什么调用get_app_id()返回的结果是None？

我希望如果我是在本地测试环境调试，那么取.env.test中的配置，如果是生产环境取jenkins配置的变量参数，我应该怎么修改？

MCEmailRegisterDialog:{"error_no":1007,"message":"Error 1406: Data too long for column 'email' at row 1","trace_id":"0940d471d481466491e2a4db50503b59","result":{"trace_id":"0940d471d481466491e2a4db50503b59"},"code":10,"net_name":"register-with-email"}

class SDKHTTPClient(object):

    def __init__(self, host, app_id, secret_key):
        self.host = host
        self.app_id = app_id
        self.secret_key = secret_key

我的类和初始化方法是这样的，我可以再增加一个下面的构造方法吗？

    def __init__(self, host, app_id_another,secret_key_another):
        self.host = host
        self.app_id_another = app_id_another
        self.secret_key_another = secret_key_another

我是这样实例化SDKHTTPClient的
sdk_http_client = SDKHTTPClient(
    get_host(),
    get_app_id(),
    get_secret_key()
)
其他代码是这样的111
env = "test"
if env == 'test':
    env_file = '../../.env.test'
elif env == 'pre':
    env_file = '../../.env.pre'
else:  # 默认为生产环境
    env_file = '../../.env_prod'
load_dotenv(env_file)

def get_app_id():
    return os.getenv('APP_ID')
    # return os.environ['APP_ID']
    # return "7AVS2D5QH2TV"  # android
    # return "2YBKKM9W9TX9"  # ios

def get_secret_key():
    return os.getenv('SECRET_KEY')
    # return "DF864TCE1XWZE1NH"  # android
    # return "508XPF5Q045XC7DV"  # ios

    class SDKHTTPClient(object):

    def __init__(self, host, app_id, secret_key, app_id_another, secret_key_another):
        self.host = host
        if app_id_another is not None and secret_key_another is not None:
            self.app_id = app_id_another
            self.secret_key = secret_key_another
        else:
            self.app_id = app_id
            self.secret_key = secret_key

    def _sign(self, body):
        sort_keys = sorted(body.keys())
        body_string = ""
        for key in sort_keys:
            body_string += f"{key}{body[key]}"

        body_string += self.secret_key
        return hashlib.md5(body_string.encode("utf-8")).hexdigest()

    @retry(stop_max_attempt_number=3, wait_fixed=3000)
    def post(self, url, body):
        data = copy.copy(body)
        if "appid" not in data:
            data.update({"appid": self.app_id})
        data.update({"sign": self._sign(data)})
        body_base64 = base64.b64encode(json.dumps(data).encode("ascii"))
        resp = requests.post(urljoin(self.host, url), data=body_base64, headers=self.headers)
        if resp.status_code == 504 or resp.status_code == 502:
            raise Exception(resp.text)
        else:
            return resp
为什么      if "appid" not in data:
            data.update({"appid": self.app_id})
            会把我的appid更新微None

我这段代码在我的fake.py中
env = os.getenv('ENV')
env = "test"
if env == 'test':
    env_file = '../../.env.test'
elif env == 'pre':
    env_file = '../../.env.pre'
else:  # 默认为生产环境
    env_file = '../../.env_prod'
load_dotenv(env_file)

def get_app_id():
    return os.getenv('APP_ID')
    # return os.environ['APP_ID']
    # return "7AVS2D5QH2TV"  # android
    # return "2YBKKM9W9TX9"  # ios

def get_secret_key():
    return os.getenv('SECRET_KEY')
    # return "DF864TCE1XWZE1NH"  # android
    # return "508XPF5Q045XC7DV"  # ios

这段实例化在另一个httpclient.py中
 sdk_http_client = SDKHTTPClient(
    get_host(),
    get_app_id(),
    get_secret_key()

如果这样写目前我得到的 get_app_id()，get_secret_key()为None，我应该怎么修改我的代码
我的fake.py文件中有一个这个方法：
def get_app_id():
    env = "test"
    if env == 'test':
        env_file = '../../.env.test'
        print(f"Loading test environment file from: {env_file}")
    elif env == 'pre':
        env_file = '../../.env.pre'
    else:  # 默认为生产环境
        env_file = '../../.env_prod'
    flag = load_dotenv(env_file)
    return os.getenv('APP_ID')

我在当前文件调用get_app_id()，flag值为True，通过别的文件调用get_app_id()这个方法，flag为False是为什么？
别的文件是另一个httpclient.py中调用appid = get_app_id()

## 2023.12.27

"language":"zh-CN"：验证码为简体中文
"language":"zh-Hans-CN"：验证码为简体中文
"language":"zh-Hant-TW"：验证码为繁体中文
"language":"zh-Hant-MO"：验证码为繁体中文
"language":"zh-Hant-HK"：验证码为繁体中文
"language":"ko-KR"：验证码为韩语
"language":"de-BE"：验证码为德语

现在就支持英语，中文，韩语，其他都发英语

## 2023.12.28

执行删除的账号：
72272
删除后又登录的账号：
72300
大于30天未登录的删除账号：

## 2024.1.8

我的两个py脚本中都要用到同一个变量，我想设置一个全局变量来存储这个值，并且这个值是通过一个方法生成的，为了不造成循环引用，我应该怎么设置

<https://git.youle.game/TC/TAG/frontend/ZeusSDK/uploads/f4a7bc7e9ade263ffccf76721c750c25/ZeusSDK_v2.12.10_Android.zip>

30 H/2 ** *

CC开始护肤：新年穿红装，白皙肌肤更显精致。换季敏感，用温和产品。介绍谷雨美白奶罐，已用完（尴尬脸特效），但有囤货。

CC涂奶罐：谷雨产品美白成分光甘草定温和高效，纯度90%+，温润细嫩白。

CC展示质地和使用方法：酸奶般易涂抹吸收，早薄涂保湿，晚厚涂暗沉区。

## 2024.1.10

facebook：
apple：邮箱<jiaheqi@topjoy.com>：美丽的霍巴特
手机号17600116844：英俊的基恩
line
分别对应三个账号

## 2024.1.11

梦境
1.8
宝贝不在身边的第一天晚上做了噩梦，噩梦的内容忘记了，但是感觉在噩梦中自己想翻身怎么也翻不动，醒来后发现是被子掉地上了，身体被拽住了。
1.9
第二天晚上也没睡好，梦到小猫和男生出去吃饭，还和男生坐在一起，那个男的还拍她的背，醒来之后给小猫说了梦，但是她说她确实和男生一起吃饭了，所以很生气。
但是后来小猫给我点了奶茶和晚饭，还有车厘子，晚饭很香，车厘子很甜。
然后又玩了游戏，很开心。
然后心情就好了起来。
想小猫了。
1.10
晚上的梦梦到自己选择了4.33号结婚，而且那天也有很多人结婚，但是就根本不存在4.33号。

我要写一篇开题报告，我的研究主题是： AI智能技术在时尚和服装行业中的应用研究 ，帮我完成一片开题报告，包含：
（1）选题的背景、意义
（2）综述本课题相关研究的最新成果及动态（可借用文献综述中相关内容）
    ① 引言部分
    ② 正文部分
    ③ 总结部分
（3）课题的研究内容及拟采取的研究方法、技术路线及研究难点，预期达到的目标
    ① 课题的研究内容
    ② 课题的研究方法、技术路线
    ③ 研究难点
    ④ 预期达到的目标
（4）论文详细工作进度和安排
（5）主要参考文献

公会申请玩法，如果不选择公会点击提交之后提示红色必填项，选择公会之后信息加载成功，但是红字也不会消失；
且如果选择了公会再删除，会报一个未知错误。

081O9zFa1OgFKG02Y6Ja1o9YbW3O9zF4
<https://api.weixin.qq.com/sns/oauth2/access_token?appid=wx5ee397c1bcb66dcc&secret=eb2e1dfe0772d811cee381825c61335c&code=081O9zFa1OgFKG02Y6Ja1o9YbW3O9zF4&grant_type=authorization_code>
2024-01-22 15:32:53.753 20449-20449 SDK2.0                  com.topjoy.sdk_demo                  D  sp:从INTERACTIVE key: lineAvatar value: 680342092|:|<https://profile.line-scdn.net/0hWNDXrBMsCGFpIRuedBR2HhlxCwtKUFFzR0JHUwsgAgVTRU9gQUQXAVQlXlFWEkkzFU5HUlR2XlZlMn8Hd3f0VW4RVlZQFEw2TUNGgA>

dao：
三方登录：google登录不上，facebook提示异常

通过百度网盘分享的文件：【1】理论精讲等7个文件
链接:<https://pan.baidu.com/s/1_fcf19G7NMxa85s3maPMjA?pwd=qmp5>
提取码:qmp5
复制这段内容打开「百度网盘APP 即可获取」

## 2024.1.29

{"time":"2024-01-29T11:16:44.154775069+08:00","level":"INFO","msg":"","trace_id":"14c5525e667c84736df23f99c45527a1","user_agent":"Go-http-client/2.0","client_ip":"10.42.0.198","method":"POST","status_code":200,"request_path":"/third-pay/v2/order",
"request_body":{"activity_id":30,"currency":"TWD","pay_notify_url":"<http://8.219.193.118:8090/admin/pay/zeus/notify","pay_return_url":"https://tkw-pay.youle.game/pay_return","pay_way":8,"product_id":50,"project_id":"1","region":"tw","role_id":"10002","server_id":"80002","sign":"ba7945065bb64f93fdaaed15155446a7eea6005e0474b4810a0c9181dc765842","timestamp":"1706498200"}>,

"response_body":{"code":0,"message":"成功","result":{"pay_url":"<https://test.mycard520.com.tw/MyCardPay/?AuthCode=A2C16FC9F62068C9121D3E713AEC8FFDB0EEBDD98FCC3A5CA444B1BC05FF67B9AE1383101A508511B4FB26AAA9998A5FD1D8FF9A93EB167F89067845EB754D8D8AC5BDD0065ACC5D2576F5E386DD360B"}},"latency":"3.87278052s"}>

## 2024.1.30

订单1：mycard_20240130104504_6FDZG1
5min之后创建订单2：mycard_20240130105653_jPiJzE ，订单1的order和purchase_record状态更新为-1
支付订单1，支付成功，order和purchase_record的状态还是-1

一个浏览器：

第一种情况：

1. 订单1：mycard_20240130110817_bAWih6，保留在选择支付方式的页面；
2. 5min之后创建订单2：mycard_20240130111620_it42Ao，保留再选择支付方式的页面；
3. 订单1的order和purchase_record状态更新为-1，订单2状态为0
4. 在订单1的页面选择支付方式支付，订单1的order和purchase_record的状态还是-1，订单2状态更新为1，并且更新了pay_id

第二种情况：

1. 订单1：mycard_20240130114418_kEHF9r，选择支付方式跳转到确认支付的页面；
2. 5min之后创建订单2：mycard_20240130115021_ykiY5S，选择支付方式跳转到确认支付的页面；
3. 订单1的order和purchase_record状态更新为-1，订单2状态为0；
4. 在订单1的页面支付，提示：交易發生錯誤，請您再次確認或重新操作，若有疑問請洽客服。錯誤代號: MCPBI125
5. 在订单2的页面支付，提示：交易發生錯誤，請您再次確認或重新操作，若有疑問請洽客服。錯誤代號: MCPBI010
6. 订单1状态依旧是-1，订单2状态是0

不同浏览器：

第一种情况：

1. 订单1：mycard_20240130142002_EbzBSo，保留在选择支付方式的页面；
2. 5min之后创建订单2:mycard_20240130142643_hRmxnd，保留再选择支付方式的页面；
3. 订单1的order和purchase_record状态更新为-1，订单2状态为0；
4. 在订单1的页面选择支付方式支付，确认完成后，提示“支付失败，”订单1order和purchase_record的状态还是-1，更新了pay_id，并且pay_error_message为：支付订单已取消，verify_status=2

第二种情况：

1. 订单1：mycard_20240130142643_hRmxnd，选择支付方式跳转到确认支付的页面；
2. 5min之后创建订单2：mycard_20240130143224_cfp4kH，选择支付方式跳转到确认支付的页面；
3. 订单1的order和purchase_record状态更新为-1，订单2状态为0；
4. 在订单1的页面支付，确认完成后，提示“支付失败，”订单1order和purchase_record的状态还是-1，更新了pay_id，并且pay_error_message为：支付订单已取消，verify_status=2

我的工程是基于unittest实现的UI自动化，测试方法在断言失败后我想实现重试3次，我需要怎么做?

切换账号的方法调试一下；
对于选择zeus的账户的加一个判断如果弹窗了再选择，否则不选择；

"zeus_device_id"='67f2785ea46606c8' or "zeus_device_id" = '073564AD-DA10-4850-BB35-A4E7E0E4467C';

## 2024.2.20

Eyepony 暮色迟迟:上眼是很微妙的粉棕色，而且有三段高光，避免了高光款对眼的问题，不管怎么转，眼神都是水光盈盈的，有种梦幻泪光瞳的味道！第一次在眼睛里看到星星，带一下眼睛又亮又有神了！小细边很自然的就放大双眼，而且很自然，素颜状态无压力，或者搭配一个淡颜系的妆容，太适合约会拍照片啦！

glam up 琥珀光：这款是适合我们中国宝宝的轻混血眼珠！上眼看是冷色调的，像琥珀色的玻璃珠子，看起来特别通透，棕色光圈加上黑色锁边，有种冷冷的女神气质，虽然没有高光但是有满满的光泽感！像是在眼睛里安了一盏灯。带上眼睛又亮又有神，混血感一下就上来了，深瞳上眼也一秒变浅瞳。不需要浓妆搭配，越素越好看，小心机还百搭！

aisei 珍珠雾灰：同样也是有黑色的锁边，清透效果真的很棒，尤其是眨眼的时候。眼珠整体偏灰棕色系，瞳色有一种从中心到周边的由深到浅的渐变感觉，就很像那种灰蒙蒙的晨雾。如果刚好发色又是偏棕色，再加上睫毛的修饰，会让眼睛整体放大还有一种水汪汪的迷离感觉。搭配妆容也是轻微淡颜+眼影就完全ok凹。

上一次對陣，他們就採用放棄中央只在上下兩戰線放人，只是被我們用硬實力壓倒了
{'error_no': 0, 'message': '成功', 'result': {'data_id': 'A6BAC157-84FC-49FF-97FA-A4B35185F4DD', 'result': '', 'check_ret': 2, 'punish_type': 1}}
fuck
{'error_no': 0, 'message': '成功', 'result': {'data_id': 'EF9F6DA7-D6E5-48F9-A0E6-FB75DE67AEAE', 'result': '', 'check_ret': 2, 'punish_type': 1}}
text
{'error_no': 0, 'message': '成功', 'result': {'data_id': '83F652C0-A732-499B-8575-0A17B0E858DA', 'result': 'text', 'check_ret': 0, 'punish_type': 0}}
我認為可以學他們上次對我們時，採用放棄中央只在上下兩戰線放人
{'error_no': 0, 'message': '成功', 'result': {'data_id': '7FDA8195-96CB-47EF-9700-4A8CB0EBB467', 'result': '', 'check_ret': 2, 'punish_type': 1}}

## 2024.2.26

    def __get_reports(self):
        print("所有用例执行完毕，正在生成测试报告中......")
        test_result = {
            "success": 0,
            "all": 0,
            "fail": 0,
            "skip": 0,
            "error": 0,
            "results": [],
            "testClass": [],
        }
        for res in self.result:
            for item in test_result:
                test_result[item] += res.fields[item]

        test_result['runtime'] = '{:.2f} S'.format(time.time() - self.starttime)
        test_result["begin_time"] = time.strftime("%Y-%m-%d %H:%M:%S", time.localtime(self.starttime))
        test_result["title"] = self.title
        test_result["tester"] = self.tester
        test_result['desc'] = self.desc
        if test_result['all'] != 0:
            test_result['pass_rate'] = '{:.2f}'.format(test_result['success'] / test_result['all'] * 100)
        else:
            test_result['pass_rate'] = 0
        # 判断是否要生产测试报告
        if os.path.isdir(self.report_dir):
            pass
        else:
            os.mkdir(self.report_dir)
        # 获取历史执行数据
        test_result['history'] = self.__handle_history_data(test_result)

        template_path = os.path.join(os.path.dirname(__file__), '../templates')
        env = Environment(loader=FileSystemLoader(template_path))
        if self.templates == 2:
            template = env.get_template('templates2.html')
        elif self.templates == 3:
            template = env.get_template('templates3.html')
        else:
            template = env.get_template('templates.html')
        file_path = os.path.join(self.report_dir, self.filename)
        res = template.render(test_result)
        with open(file_path, 'wb') as f:
            f.write(res.encode('utf8'))
        print("测试报告已经生成，报告路径为:{}".format(file_path))
        self.email_conent = {"file": os.path.abspath(file_path),
                             "content": env.get_template('templates03.html').render(test_result)
                             }
        self.test_result = test_result
        return test_result

        iOS real machine test, but after the system was upgraded to 17.3.1, the test was successful. After iproxy 8100 8100, it still could not successfully connect to the device.

    FBScreenshot.m

        static const NSTimeInterval SCREENSHOT_TIMEOUT = 50.;
  info.list
  
  info.list

    <string>com.facebook.wda.lib</string>

    <string>com.facebook.WebDriverAgentLib</string>
    为什么会报这个错，怎么改正
    testcases = unittest.defaultTestLoader.discover(start_dir, pattern)
    assert not _relpath.startswith('..'), "Path must be within the project"
    AssertionError: Path must be within the project
    我的目录是这样写的：
    start_dir = 'test/account_system/'
    pattern = "test_*.py"
    我的run方法在main文件中，main文件和test在同一级目录

    exportJAVA_HOME=$(/usr/libexec/java_home -v 11)


    tcp\safetcp.py", line 29, in send
    sent = self.sock.send(msg[totalsent:])
ConnectionAbortedError: [WinError 10053] 你的主机中的软件中止了一个已建立的连接。

## 2024.3.7

需要收藏的题：14
德育原则，德育方法，德育规律，教学原则

德育包含：政治，思想，道德，法制，心理健康

教学原则

1. 科学性和思想性统一：讲xxx的故事
2. 启发性原则：举一反三
3. 循序渐进：不陵节而驰，学不塌
4. 巩固性原则：温故而知新

心理辅导方法：强化，系统脱敏（建立等级，一步步克服），理性情绪疗法（不合理信念变得合理正确），来访者中心疗法（有问题的人自我探索，自我剖析），行为分析法（一步一步做）

信度：稳定和可靠性
效度：有效性正确性
难度：难易程度
区分度：区分不同学生的能力

教育：德义务（起源）法终身美单轨
效应：
首因效应：第一印象，一见钟情
晕轮效应：以偏概全，这个人坏，啥坏事都是他干的
刻板效应：固定标签，北方人好爽，南方人温婉
投射效应：以己度人，自己喜欢的别人也喜欢

培根首提出，夸美来实现，康德首开课，巴特来规范，杜威去改变
看到泰勒选目标
维果斯基：最近发展区

赫尔巴特《普通教育学》
洛克《教育漫画》
泰勒《课程与教学的基本原理》
夸美纽斯：太阳底下最光辉的职业（夸父喜欢太阳）

科目三
进制转换，排序算法，通过IP和子网掩码推算主机地址，比特串冗余位，菲波那切数列，通信协议
押题一
AACBD CACBC CCCCB

访问根节点（N）遍历左子树（L）遍历右子树（R）
先序遍历：NLR中序遍历LNR：后序遍历：LRN
16.斐波那契：第三项等于前两项之和 12358
17.物理层，数据链路层，网络层（IP,ARP），传输层（TCP,UDP），会话层，表示层，应用层(http，https，dns，ftp，telnet，pop3)
18.信息意识的内涵和具有信息意识的学生的主要表现。

押题二
ADDCC

## 2024.3.12

中宣部实名和阿里实名的区别：

1. user表的唯一认证id，中宣部是38位，阿里是36位；
2. 调用中宣部实名失败，会降级调用阿里；
3. 中宣部实名的调用后端时长上报才会成功，阿里实名的调后端上班就不会上报了；
4. 数据库针对中宣部和阿里的是能够区分出来的。

不确定的题：
2，3，4,5，6,7，8，9，10，11，12，13，16，17，18，19，20
21，

滕王阁序-江西南昌

根据“给定资料1”，请概括H市为优化营商环境采取了哪些措施，取得了哪些成效。

措施：

1. 创新项⽬落地服务保障机制；
2. 政务服务中⼼还设⽴“周末不打烊”窗⼝，公安、不动产、税务、社保等24个单位实⾏轮岗制，随时为企业提供服务；
3. 建立到市优化营商环境⼯作督导组，及时询问；
4. 市安排专⼈对企业留⾔和诉求梳理分类，根据属地和部⻔职责推送移交，全过程留痕，并对办理结果、时限进⾏追踪督导；
5. 平台会主动为企业提供政策解读；
6. 线上服务快速⾼效，线下帮扶周到细致;
7. 组织相关部⻔的⼯作⼈员和专家来到公司，深⼊调查，召开座谈，⾯对⾯问诊把脉，帮助寻找准确的市场定位，指导企业;
8. 免费举办针对企业家的培训，提升企业家的思想、业务⽔平.

成效：

1. 是效率⾼，审批时间较以前减了⼀半；
2. “红⾊”加急清单，办理进度加快，仅两天就办完了；
3. 组织企业对接，为企业打开了销路；
4. 面对面帮助企业形成了新的产品结构；
5. 企业家在政府部⻔锻炼，可以开阔眼界、熟悉政策、增⻓才⼲；
6. 市场主体数量同⽐增⻓47%，居⺠收⼊也明显提⾼。

“给定资料2”中画线部分提到，“新局蕴新机，新机⽣新局。”请你谈谈对这句话的理解。

环环相扣，交错生长。局面促进机遇产生，而新的机遇同时也会促成新的局面。

新局蕴新机：

1. 交易所的成⽴标志着碳汇交易开启了正规化的局⾯，这将促使企业更加意识到碳排放权的价值，相信未来的碳汇交易市场会有更多的新机遇；
2. “碳汇”理念，为破解多年未解的难题-城市治理，提供了新机遇；
3. 碳汇交易给这个本来有些偏僻的⼭村带来了新机遇。

新机⽣新局：

1. 借助建设‘碳汇城市’的新机遇，打开城市经济发展的新局⾯；
2. ⽣态碳汇能⼒⼤⼤提⾼，“⻘⼭绿道碧⽔”的城市空间新格局不断成型；
3. “碳汇”理念浸润到了C市治理的⽅⽅⾯⾯，形成城市治理的新局⾯；
4. ‘碳汇’模式⼀举两得，既治理建筑垃圾，也解决市政污泥；
5. 碳汇理念改变了我们的⽣活习惯，形成低碳出行环保的新局面。

总结：二者相辅相成，互相促进彼此发展，‘碳汇城市’建设将给我们带来⼀场从个⼈到城市，从观念到⾏为的全⽅位变⾰。

邻市有关部⻔拟到W市考察“15分钟⽂化服务圈”建设问题。假如你是W市政府⼯作⼈员，请根据“给定资料3”拟写
⼀份介绍“15分钟⽂化服务圈”建设情况的提纲。

标题，背景，做法。

关于“15分钟⽂化服务圈”建设情况的考察提纲

“为了打造新时代⽂化⾼地，丰富⼈⺠精神⽂化⽣活，市委、市政府提出建设‘15分钟⽂化服务圈’的规划，以综合性⽂体活动中⼼为主阵地、以⽂化家园为基点、以其他不可移动⽂物和历史⽂化场馆为补充的“15分钟⽂化服务圈”，⼤⼤提升了⼈们的获得感。

1. 制定了公共⽂化服务阵地的分布原则、建设标准和验收程序，能从整体布局，⼯作时有章可依；
2. 遇到难题，通过科技手段攻克难关，通过科学精确的测距、选点，⽬前W市已经完成所有项⽬的选址；
3. 不仅要丰富周边群众的⽂体⽣活，还要重视地域⽂化的传承，植⼊地⽅特⾊⽂化的‘基因’，既彰显当地⽂化特⾊，⼜能盘活这些⽂化资产，实现物质富⾜和精神富有的良性互动，同时还缓解了空间，经费和⽤地压⼒
4. ⼩程序建设，⽂化服务信息就能及时传播，真正能服务到最多的⼈；
5. 城乡同步进⾏，共享优质⽂化服务，些精准的服务⾮常灵活地满⾜了郊区群众的需求。

城市的社会⻛⽓发⽣了显著变化，变得更⽂明、更健康了。

“给定资料4”中，两处画线部分先后提到，“我们要以不变应万变”，“我们要以变应变”。请你深⼊思考这两句话之
间的关系，参考给定资料，联系实际，⾃选⻆度，⾃拟题⽬，写⼀篇议论⽂。

草稿：

1. 变化指的是时代的不断变化，创新方式的不断变化，不变指的是文化传承的使命的核心不变；
2. 时代在改变，我们要改变，运用科技和新技术；

题目：抓住机遇，迎接变化，固收本心

论点：

1. 变化指的是时代的不断变化，创新方式的不断变化，不变指的是文化传承的使命的核心不变；
2. 时代在改变，我们要改变，运用科技和新技术；

论据：

1. 的⽂创开发经历了从⽆到有、从少到多的过程，是机制创新，产品创新；
2. 我们要以不变应万变，不断开发各类⽂创产品的⽬的是为了更好地履⾏传承⽂化的使命，实现博物馆的⽂化辐射；
3. 在从过去的单次化、碎⽚化、讲解化过渡为现在的系统化、系列化、趣味化，从过去主要关注孩⼦到进⼀步关注全年龄段的群体；
4. “现代科技的发展给⽂物活化带来了新的契机
5. 市⽯刻⽂化博物馆联合⼀家科技公司制作了百集⽯刻⽂化短视频，凝固的⽯刻变为⼀个个鲜活的⼈物或动植物，演绎出⼀幕幕⽯刻背后的故事
6. “时代在变，我们要以变应变，积极运⽤⻜速发展的新技术，让⽂物以更便捷的⽅式进⼊现代⽣活，实现传统与现代的跨时空对话。

论证：

总结：

alembic revision --autogenerate -m "创建数据库表" 

children: getChildren("./docs", 'study')
const { getChildren } = require("./vuepress-sidebar-atuo/vuepress-sidebar-auto.js");
我的vuepress-sidebar-auto.js中是这样的//侧边栏
// const autosidebar = require('vuepress-auto-sidebar-doumjun')
const fs = require('fs')
const path = require('path')
 
/**
 * 过滤所要导航的文件
 * 文件名 包含.md 但 不包含  README */
function checkFileType(path) {
    return path.includes(".md")&&(!path.includes("README"));
}
 
/**
 * 格式化文件路径*/
function prefixPath(basePath, dirPath) {
    let index = basePath.indexOf("/")
// 去除一级目录地址
    basePath = basePath.slice(index, path.length)
// replace用于处理windows电脑的路径用\表示的问题
    return path.join(basePath, dirPath).replace(/\\/g, "/")
}
 
/**
 * 截取文档路径*/
function getPath(path,ele) {
    let item=prefixPath(path,ele);
    if (item.split('/')[6]) {
        return item.split('/')[3] + '/' + item.split('/')[4]+ '/' + item.split('/')[5]+ '/' + item.split('/')[6]
    }else if (item.split('/')[5]) {
        return item.split('/')[3] + '/' + item.split('/')[4]+ '/' + item.split('/')[5]
    }else if (item.split('/')[4]) {
        return item.split('/')[3] + '/' + item.split('/')[4]
    } else {
        return item.split('/')[3]
    }
}
 
/**
 * 递归获取分组信息并排序*/
function getGroupChildren(path,ele,root) {
    let pa = fs.readdirSync(path + "/" + ele + "/");
    let palist=pa;
    pa = palist.sort(function (a, b) {
        return a.replace(".md", "").match(/[^-]*$/) - b.replace(".md", "").match(/[^-]*$/)
    });
    pa.forEach(function (item, index) {
        let info = fs.statSync(path + "/" + ele + "/" + item);
        if (info.isDirectory()) {
            let children = [];
            let group = {};
            group.title = item.split('-')[0];
            group.collapsable = true;
            group.sidebarDepth = 2;
            getGroupChildren(path + "/" + ele, item, children);
            group.children=children;
            root.push(group);
        } else {
            if (checkFileType(item)) {
                root.push(getPath(path + "/" + ele, item));
            }
        }
    })
}
/**
 * 初始化*/
function getChildren(path,ele){
    var root=[]
    getGroupChildren(path,ele,root);
    return root;
}
 
module.exports = {getChildren: getChildren};
最终报错TypeError: getChildren is not a function什么意思


op.add_column("auth",sa.Column('channel',sa.String(32),nullable=True))